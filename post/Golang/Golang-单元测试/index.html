<!doctype html>
<html lang="zh-CN">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Golang 单元测试 | PHOENIX</title>
    <meta property="og:title" content="Golang 单元测试 - PHOENIX">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content='2021-06-10T17:37:08&#43;08:00'>
        
        
    <meta property="article:modified_time" content='2021-06-10T17:37:08&#43;08:00'>
        
    <meta name="Keywords" content="golang,go语言,go语言笔记,博客,项目管理,python,公众号">
    <meta name="description" content="Golang 单元测试">
        
    <meta name="author" content="周闖">
    <meta property="og:url" content="https://aszhc.github.io/post/Golang/Golang-%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/">
    
    <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-4031353640611810",
        enable_page_level_ads: true
    });
    </script>
    


    
    
        <link rel="stylesheet" href='/css/douban.css'>
    
        <link rel="stylesheet" href='/css/other.css'>
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://aszhc.github.io">
                        PHOENIX
                    </a>
                
                <p class="description">Computers do not solve problems, they execute solutions.</p>
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="current" href="https://aszhc.github.io">首页</a>
                    
                    <a  href="https://aszhc.github.io/collect/" title="搜集">搜集</a>
                    
                    <a  href="https://aszhc.github.io/archives/" title="归档">归档</a>
                    
                    <a  href="https://aszhc.github.io/about/" title="关于">关于</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    <style type="text/css">
    .post-toc {
        position: fixed;
        width: 250px;
        margin-left: -300px;
        padding: 5px 10px;
        font-family: Athelas, STHeiti, Microsoft Yahei, serif;
        font-size: 12px;
        border: 1px solid rgba(0, 0, 0, .07);
        border-radius: 5px;
        background-color: rgba(255, 255, 255, 0.98);
        background-clip: padding-box;
        -webkit-box-shadow: 1px 1px 2px rgba(0, 0, 0, .125);
        box-shadow: 1px 1px 2px rgba(0, 0, 0, .125);
        word-wrap: break-word;
        white-space: nowrap;
        -webkit-box-sizing: border-box;
        box-sizing: border-box;
        z-index: 999;
        cursor: pointer;
        max-height: 70%;
        overflow-y: auto;
        overflow-x: hidden;
    }

    .post-toc .post-toc-title {
        width: 100%;
        margin: 0 auto;
        font-size: 20px;
        font-weight: 400;
        text-transform: uppercase;
        text-align: center;
    }

    .post-toc .post-toc-content {
        font-size: 15px;
    }

    .post-toc .post-toc-content>nav>ul {
        margin: 10px 0;
    }

    .post-toc .post-toc-content ul {
        padding-left: 20px;
        list-style: square;
        margin: 0.5em;
        line-height: 1.8em;
    }

    .post-toc .post-toc-content ul ul {
        padding-left: 15px;
        display: none;
    }

    @media print,
    screen and (max-width:1057px) {
        .post-toc {
            display: none;
        }
    }
</style>
<div class="post-toc" style="position: absolute; top: 188px;">
    <h2 class="post-toc-title">文章目录</h2>
    <div class="post-toc-content">
        <nav id="TableOfContents">
  <ol>
    <li><a href="#什么是单元测试">什么是单元测试</a></li>
    <li><a href="#go-test-工具">go test 工具</a></li>
    <li><a href="#测试函数">测试函数</a>
      <ol>
        <li><a href="#测试函数的格式">测试函数的格式</a></li>
        <li><a href="#测试函数示例">测试函数示例</a></li>
        <li><a href="#测试组">测试组</a></li>
        <li><a href="#子测试">子测试</a></li>
        <li><a href="#测试覆盖率">测试覆盖率</a></li>
      </ol>
    </li>
    <li><a href="#基准测试">基准测试</a>
      <ol>
        <li><a href="#基准测试示例">基准测试示例</a></li>
        <li><a href="#性能比较函数">性能比较函数</a></li>
        <li><a href="#重置时间">重置时间</a></li>
        <li><a href="#并行测试">并行测试</a></li>
      </ol>
    </li>
    <li><a href="#示例函数">示例函数</a>
      <ol>
        <li><a href="#示例函数的格式">示例函数的格式</a></li>
        <li><a href="#示例函数示例">示例函数示例</a></li>
      </ol>
    </li>
  </ol>
</nav>
    </div>
</div>
<script type="text/javascript">
    $(document).ready(function () {
        var postToc = $(".post-toc");
        if (postToc.length) {
            var leftPos = $("#main").offset().left;
            if(leftPos<220){
                postToc.css({"width":leftPos-10,"margin-left":(0-leftPos)})
            }

            var t = postToc.offset().top - 20,
                a = {
                    start: {
                        position: "absolute",
                        top: t
                    },
                    process: {
                        position: "fixed",
                        top: 20
                    },
                };
            $(window).scroll(function () {
                var e = $(window).scrollTop();
                e < t ? postToc.css(a.start) : postToc.css(a.process)
            })
        }
    })
</script>
    <article class="post">
        <header>
            <h1 class="post-title">Golang 单元测试</h1>
        </header>
        <date class="post-meta meta-date">
            2021年6月10日
        </date>
        
        <div class="post-meta">
            <span>|</span>
            
            <span class="meta-category"><a href='https://aszhc.github.io/categories/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80'>语言基础</a></span>
            
        </div>
        
        
        <div class="post-meta">
            <span id="busuanzi_container_page_pv">|<span id="busuanzi_value_page_pv"></span><span>
                    阅读</span></span>
        </div>
        
        
        <div class="clear" style="display: none">
            <div class="toc-article">
                <div class="toc-title">文章目录</div>
            </div>
        </div>
        
        <div class="post-content">
            <h2 id="什么是单元测试">什么是单元测试</h2>
<p>顾名思义，单元测试强调的是对单元进行测试。在开发中，一个单元可以是一个函数、一个模块等。一般情况下，你要测试的单元应该是一个完整的最小单元，比如 Go 语言的函数。这样的话，当每个最小单元都被验证通过，那么整个模块、甚至整个程序就都可以被验证通过。</p>
<p>单元测试由开发者自己编写，也就是谁改动了代码，谁就要编写相应的单元测试代码以验证本次改动的正确性。</p>
<h2 id="go-test-工具">go test 工具</h2>
<p>go test命令是一个按照一定约定和组织的测试代码的驱动程序。在包目录内，所有以<code>_test.go</code>为后缀名的源代码文件都是<code>go test</code>测试的一部分，不会被<code>go build</code>编译到最终的可执行文件中。</p>
<p>在<code>*_test.go</code>文件中有三种类型的函数，单元测试函数、基准测试函数和示例函数。</p>
<table>
<thead>
<tr>
<th align="center">类型</th>
<th align="center">格式</th>
<th align="center">作用</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">测试函数</td>
<td align="center">函数名前缀为Test</td>
<td align="center">测试程序的一些逻辑行为是否正确</td>
</tr>
<tr>
<td align="center">基准函数</td>
<td align="center">函数名前缀为Benchmark</td>
<td align="center">测试函数的性能</td>
</tr>
<tr>
<td align="center">示例函数</td>
<td align="center">函数名前缀为Example</td>
<td align="center">为文档提供示例文档</td>
</tr>
</tbody>
</table>
<h2 id="测试函数">测试函数</h2>
<h3 id="测试函数的格式">测试函数的格式</h3>
<p>每个测试函数必须导入<code>testing</code>包，测试函数的基本格式（签名）如下：</p>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a2f;font-weight:bold">func</span> <span style="color:#00a000">TestName</span>(t <span style="color:#666">*</span>testing.T){
    <span style="color:#080;font-style:italic">// ...
</span><span style="color:#080;font-style:italic"></span>}
</code></pre></td></tr></table>
</div>
</div><p>测试函数的名字必须以<code>Test</code>开头，可选的后缀名必须以大写字母开头，举几个例子：</p>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a2f;font-weight:bold">func</span> <span style="color:#00a000">TestAdd</span>(t <span style="color:#666">*</span>testing.T){ <span style="color:#666">...</span> }
<span style="color:#a2f;font-weight:bold">func</span> <span style="color:#00a000">TestSum</span>(t <span style="color:#666">*</span>testing.T){ <span style="color:#666">...</span> }
<span style="color:#a2f;font-weight:bold">func</span> <span style="color:#00a000">TestLog</span>(t <span style="color:#666">*</span>testing.T){ <span style="color:#666">...</span> }
</code></pre></td></tr></table>
</div>
</div><p>其中参数<code>t</code>用于报告测试失败和附加的日志信息。 <code>testing.T</code>的拥有的方法如下：</p>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a2f;font-weight:bold">func</span> (c <span style="color:#666">*</span>T) <span style="color:#00a000">Error</span>(args <span style="color:#666">...</span><span style="color:#a2f;font-weight:bold">interface</span>{})
<span style="color:#a2f;font-weight:bold">func</span> (c <span style="color:#666">*</span>T) <span style="color:#00a000">Errorf</span>(format <span style="color:#0b0;font-weight:bold">string</span>, args <span style="color:#666">...</span><span style="color:#a2f;font-weight:bold">interface</span>{})
<span style="color:#a2f;font-weight:bold">func</span> (c <span style="color:#666">*</span>T) <span style="color:#00a000">Fail</span>()
<span style="color:#a2f;font-weight:bold">func</span> (c <span style="color:#666">*</span>T) <span style="color:#00a000">FailNow</span>()
<span style="color:#a2f;font-weight:bold">func</span> (c <span style="color:#666">*</span>T) <span style="color:#00a000">Failed</span>() <span style="color:#0b0;font-weight:bold">bool</span>
<span style="color:#a2f;font-weight:bold">func</span> (c <span style="color:#666">*</span>T) <span style="color:#00a000">Fatal</span>(args <span style="color:#666">...</span><span style="color:#a2f;font-weight:bold">interface</span>{})
<span style="color:#a2f;font-weight:bold">func</span> (c <span style="color:#666">*</span>T) <span style="color:#00a000">Fatalf</span>(format <span style="color:#0b0;font-weight:bold">string</span>, args <span style="color:#666">...</span><span style="color:#a2f;font-weight:bold">interface</span>{})
<span style="color:#a2f;font-weight:bold">func</span> (c <span style="color:#666">*</span>T) <span style="color:#00a000">Log</span>(args <span style="color:#666">...</span><span style="color:#a2f;font-weight:bold">interface</span>{})
<span style="color:#a2f;font-weight:bold">func</span> (c <span style="color:#666">*</span>T) <span style="color:#00a000">Logf</span>(format <span style="color:#0b0;font-weight:bold">string</span>, args <span style="color:#666">...</span><span style="color:#a2f;font-weight:bold">interface</span>{})
<span style="color:#a2f;font-weight:bold">func</span> (c <span style="color:#666">*</span>T) <span style="color:#00a000">Name</span>() <span style="color:#0b0;font-weight:bold">string</span>
<span style="color:#a2f;font-weight:bold">func</span> (t <span style="color:#666">*</span>T) <span style="color:#00a000">Parallel</span>()
<span style="color:#a2f;font-weight:bold">func</span> (t <span style="color:#666">*</span>T) <span style="color:#00a000">Run</span>(name <span style="color:#0b0;font-weight:bold">string</span>, f <span style="color:#a2f;font-weight:bold">func</span>(t <span style="color:#666">*</span>T)) <span style="color:#0b0;font-weight:bold">bool</span>
<span style="color:#a2f;font-weight:bold">func</span> (c <span style="color:#666">*</span>T) <span style="color:#00a000">Skip</span>(args <span style="color:#666">...</span><span style="color:#a2f;font-weight:bold">interface</span>{})
<span style="color:#a2f;font-weight:bold">func</span> (c <span style="color:#666">*</span>T) <span style="color:#00a000">SkipNow</span>()
<span style="color:#a2f;font-weight:bold">func</span> (c <span style="color:#666">*</span>T) <span style="color:#00a000">Skipf</span>(format <span style="color:#0b0;font-weight:bold">string</span>, args <span style="color:#666">...</span><span style="color:#a2f;font-weight:bold">interface</span>{})
<span style="color:#a2f;font-weight:bold">func</span> (c <span style="color:#666">*</span>T) <span style="color:#00a000">Skipped</span>() <span style="color:#0b0;font-weight:bold">bool</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="测试函数示例">测试函数示例</h3>
<p>一个软件程序由很多单元组件组成。单元组件可以是函数、结构体、方法和最终用户可能依赖的东西。单元测试是一些利用各种方法测试单元组件的程序，它会将结果与预期输出进行比较。</p>
<p>创建palindrome.go 编写一个能够检测回文串的函数：</p>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#080;font-style:italic">// isPalindrome 可以检测输入的字符串是否是符合回文串
</span><span style="color:#080;font-style:italic"></span><span style="color:#a2f;font-weight:bold">func</span> <span style="color:#00a000">isPalindrome</span>(s <span style="color:#0b0;font-weight:bold">string</span>) <span style="color:#0b0;font-weight:bold">bool</span> {
   s = strings.<span style="color:#00a000">ToLower</span>(s)
   l, r <span style="color:#666">:=</span> <span style="color:#666">0</span>, <span style="color:#a2f">len</span>(s)<span style="color:#666">-</span><span style="color:#666">1</span>
   <span style="color:#a2f;font-weight:bold">for</span> l &lt; r {
      <span style="color:#a2f;font-weight:bold">if</span> !<span style="color:#00a000">isValid</span>(s[l]) {
         l<span style="color:#666">++</span>
         <span style="color:#a2f;font-weight:bold">continue</span>
      }
      <span style="color:#a2f;font-weight:bold">if</span> !<span style="color:#00a000">isValid</span>(s[r]) {
         r<span style="color:#666">--</span>
         <span style="color:#a2f;font-weight:bold">continue</span>
      }
      <span style="color:#a2f;font-weight:bold">if</span> s[l] <span style="color:#666">!=</span> s[r] {
         <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#a2f;font-weight:bold">false</span>
      }
      l<span style="color:#666">++</span>
      r<span style="color:#666">--</span>
   }
   <span style="color:#a2f;font-weight:bold">return</span> <span style="color:#a2f;font-weight:bold">true</span>
}

<span style="color:#a2f;font-weight:bold">func</span> <span style="color:#00a000">isValid</span>(c <span style="color:#0b0;font-weight:bold">byte</span>) <span style="color:#0b0;font-weight:bold">bool</span> {
   <span style="color:#a2f;font-weight:bold">return</span> (c <span style="color:#666">&gt;=</span> <span style="color:#b44">&#39;a&#39;</span> <span style="color:#666">&amp;&amp;</span> c <span style="color:#666">&lt;=</span> <span style="color:#b44">&#39;z&#39;</span>) <span style="color:#666">||</span> (c <span style="color:#666">&gt;=</span> <span style="color:#b44">&#39;A&#39;</span> <span style="color:#666">&amp;&amp;</span> c <span style="color:#666">&lt;=</span> <span style="color:#b44">&#39;Z&#39;</span>) <span style="color:#666">||</span> (c <span style="color:#666">&gt;=</span> <span style="color:#b44">&#39;0&#39;</span> <span style="color:#666">&amp;&amp;</span> c <span style="color:#666">&lt;=</span> <span style="color:#b44">&#39;9&#39;</span>)
}
</code></pre></td></tr></table>
</div>
</div><p>在当前目录下创建一个palindrome_test.go文件</p>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a2f;font-weight:bold">func</span> <span style="color:#00a000">TestIsPalindrome</span>(t <span style="color:#666">*</span>testing.T) {
   got <span style="color:#666">:=</span> <span style="color:#00a000">isPalindrome</span>(<span style="color:#b44">&#34;A man, a plan, a canal: Panama&#34;</span>)
   want <span style="color:#666">:=</span> <span style="color:#a2f">bool</span>(<span style="color:#a2f;font-weight:bold">true</span>)
   <span style="color:#a2f;font-weight:bold">if</span> !reflect.<span style="color:#00a000">DeepEqual</span>(want, got) {
      t.<span style="color:#00a000">Errorf</span>(<span style="color:#b44">&#34;excepted:%v, got:%v&#34;</span>, want, got)
   }
}
</code></pre></td></tr></table>
</div>
</div><p>在<code>split</code>包路径下，执行<code>go test -v</code>命令，可以看到输出结果如下：</p>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">➜  go <span style="color:#a2f">test</span> -v
<span style="color:#666">===</span> RUN   TestIsPalindrome
--- PASS: TestIsPalindrome <span style="color:#666">(</span>0.00s<span style="color:#666">)</span>
PASS
ok      go-testing/palindrome   0.001s
</code></pre></td></tr></table>
</div>
</div><h3 id="测试组">测试组</h3>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a2f;font-weight:bold">func</span> <span style="color:#00a000">TestIsPalindrome</span>(t <span style="color:#666">*</span>testing.T) {
   <span style="color:#a2f;font-weight:bold">type</span> test <span style="color:#a2f;font-weight:bold">struct</span> {
      input <span style="color:#0b0;font-weight:bold">string</span>
      want  <span style="color:#0b0;font-weight:bold">bool</span>
   }
   tests <span style="color:#666">:=</span> []test{
      {input: <span style="color:#b44">&#34;上海自来水来自海上&#34;</span>, want: <span style="color:#a2f;font-weight:bold">true</span>},
      {input: <span style="color:#b44">&#34;asdfghjklkjhgfdsa&#34;</span>, want: <span style="color:#a2f;font-weight:bold">true</span>},
      {input: <span style="color:#b44">&#34;信言不美，美言不信。&#34;</span>, want: <span style="color:#a2f;font-weight:bold">true</span>},
      {input: <span style="color:#b44">&#34;日往则月来，月往则日来。&#34;</span>, want: <span style="color:#a2f;font-weight:bold">true</span>},
      {input: <span style="color:#b44">&#34;12345654321&#34;</span>, want: <span style="color:#a2f;font-weight:bold">true</span>},
      {input: <span style="color:#b44">&#34;asd@d8ddsa&#34;</span>, want: <span style="color:#a2f;font-weight:bold">true</span>},
      {input: <span style="color:#b44">&#34;redivider&#34;</span>, want: <span style="color:#a2f;font-weight:bold">true</span>},
      {input: <span style="color:#b44">&#34;Able was I ere I saw Elba&#34;</span>, want: <span style="color:#a2f;font-weight:bold">true</span>},
      {input: <span style="color:#b44">&#34;日往则月来asd月往则日来。&#34;</span>, want: <span style="color:#a2f;font-weight:bold">false</span>},
   }

   <span style="color:#a2f;font-weight:bold">for</span> _, tc <span style="color:#666">:=</span> <span style="color:#a2f;font-weight:bold">range</span> tests {
      got <span style="color:#666">:=</span> <span style="color:#00a000">isPalindrome</span>(tc.input)
      <span style="color:#a2f;font-weight:bold">if</span> !reflect.<span style="color:#00a000">DeepEqual</span>(got, tc.want) {
         t.<span style="color:#00a000">Errorf</span>(<span style="color:#b44">&#34;execpted:%v, got:%v&#34;</span>, tc.want, got)
      }
   }
}
</code></pre></td></tr></table>
</div>
</div><h3 id="子测试">子测试</h3>
<p>编写子测试可以快速发现出错处</p>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a2f;font-weight:bold">func</span> <span style="color:#00a000">TestIsPalindrome</span>(t <span style="color:#666">*</span>testing.T) {
	<span style="color:#a2f;font-weight:bold">type</span> test <span style="color:#a2f;font-weight:bold">struct</span> { <span style="color:#080;font-style:italic">// 定义test结构体
</span><span style="color:#080;font-style:italic"></span>		input <span style="color:#0b0;font-weight:bold">string</span>
		want  <span style="color:#0b0;font-weight:bold">bool</span>
	}
	tests <span style="color:#666">:=</span> <span style="color:#a2f;font-weight:bold">map</span>[<span style="color:#0b0;font-weight:bold">string</span>]test{ <span style="color:#080;font-style:italic">// 测试用例使用map存储
</span><span style="color:#080;font-style:italic"></span>		<span style="color:#b44">&#34;1&#34;</span>: {input: <span style="color:#b44">&#34;上海自来水来自海上&#34;</span>, want: <span style="color:#a2f;font-weight:bold">true</span>},
		<span style="color:#b44">&#34;2&#34;</span>: {input: <span style="color:#b44">&#34;asdfghjklkjhgfdsa&#34;</span>, want: <span style="color:#a2f;font-weight:bold">true</span>},
		<span style="color:#b44">&#34;3&#34;</span>: {input: <span style="color:#b44">&#34;信言不美，美言不信。&#34;</span>, want: <span style="color:#a2f;font-weight:bold">true</span>},
		<span style="color:#b44">&#34;4&#34;</span>: {input: <span style="color:#b44">&#34;日往则月来，月往则日来。&#34;</span>, want: <span style="color:#a2f;font-weight:bold">true</span>},
		<span style="color:#b44">&#34;5&#34;</span>: {input: <span style="color:#b44">&#34;12345654321&#34;</span>, want: <span style="color:#a2f;font-weight:bold">true</span>},
		<span style="color:#b44">&#34;6&#34;</span>: {input: <span style="color:#b44">&#34;asd@d8ddsa&#34;</span>, want: <span style="color:#a2f;font-weight:bold">true</span>},
		<span style="color:#b44">&#34;7&#34;</span>: {input: <span style="color:#b44">&#34;redivider&#34;</span>, want: <span style="color:#a2f;font-weight:bold">true</span>},
		<span style="color:#b44">&#34;8&#34;</span>: {input: <span style="color:#b44">&#34;Able was I ere I saw Elba&#34;</span>, want: <span style="color:#a2f;font-weight:bold">true</span>},
		<span style="color:#b44">&#34;9&#34;</span>: {input: <span style="color:#b44">&#34;日往则月来asd月往则日来。&#34;</span>, want: <span style="color:#a2f;font-weight:bold">true</span>},
	}

	<span style="color:#a2f;font-weight:bold">for</span> name, tc <span style="color:#666">:=</span> <span style="color:#a2f;font-weight:bold">range</span> tests {
		t.<span style="color:#00a000">Run</span>(name, <span style="color:#a2f;font-weight:bold">func</span>(t <span style="color:#666">*</span>testing.T) {	<span style="color:#080;font-style:italic">// 子测试
</span><span style="color:#080;font-style:italic"></span>			got <span style="color:#666">:=</span> <span style="color:#00a000">isPalindrome</span>(tc.input)
			<span style="color:#a2f;font-weight:bold">if</span> !reflect.<span style="color:#00a000">DeepEqual</span>(got, tc.want) {
				t.<span style="color:#00a000">Errorf</span>(<span style="color:#b44">&#34;execpted:%v, got:%v&#34;</span>, tc.want, got) <span style="color:#080;font-style:italic">// 将测试用例的name格式化输出
</span><span style="color:#080;font-style:italic"></span>			}
		})
	}
}
</code></pre></td></tr></table>
</div>
</div><p>结果：</p>
<pre><code>➜  go test -v
=== RUN   TestIsPalindrome
=== RUN   TestIsPalindrome/1
=== RUN   TestIsPalindrome/5
=== RUN   TestIsPalindrome/7
=== RUN   TestIsPalindrome/8
=== RUN   TestIsPalindrome/9
=== RUN   TestIsPalindrome/2
=== RUN   TestIsPalindrome/3
=== RUN   TestIsPalindrome/4
=== RUN   TestIsPalindrome/6
--- PASS: TestIsPalindrome (0.00s)
    --- PASS: TestIsPalindrome/1 (0.00s)
    --- PASS: TestIsPalindrome/5 (0.00s)
    --- PASS: TestIsPalindrome/7 (0.00s)
    --- PASS: TestIsPalindrome/8 (0.00s)
    --- PASS: TestIsPalindrome/9 (0.00s)
    --- PASS: TestIsPalindrome/2 (0.00s)
    --- PASS: TestIsPalindrome/3 (0.00s)
    --- PASS: TestIsPalindrome/4 (0.00s)
    --- PASS: TestIsPalindrome/6 (0.00s)
PASS
ok      go-testing/palindrome   0.002s
</code></pre><h3 id="测试覆盖率">测试覆盖率</h3>
<p>测试覆盖率是你的代码被测试套件覆盖的百分比。通常我们使用的都是语句的覆盖率，也就是在测试中至少被运行一次的代码占总代码的比例。</p>
<p>Go提供内置功能来检查你的代码覆盖率。我们可以使用<code>go test -cover</code>来查看测试覆盖率</p>
<pre><code>➜ go test -cover
PASS
coverage: 100.0% of statements
ok      go-testing/palindrome   0.002s
</code></pre><p>Go还提供了一个额外的<code>-coverprofile</code>参数，用来将覆盖率相关的记录信息输出到一个文件。例如：</p>
<pre><code>➜  go test -cover -coverprofile=c.out
PASS
coverage: 100.0% of statements
ok      go-testing/palindrome   0.002s
</code></pre><p>上面的命令会将覆盖率相关的信息输出到当前文件夹下面的<code>c.out</code>文件中，然后我们执行<code>go tool cover -html=c.out</code>，使用<code>cover</code>工具来处理生成的记录信息，该命令会打开本地的浏览器窗口生成一个HTML报告。</p>
<h2 id="基准测试">基准测试</h2>
<p>基准测试就是在一定的工作负载之下检测程序性能的一种方法。基准测试的基本格式如下：</p>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a2f;font-weight:bold">func</span> <span style="color:#00a000">BenchmarkName</span>(b <span style="color:#666">*</span>testing.B){
    <span style="color:#080;font-style:italic">// ...
</span><span style="color:#080;font-style:italic"></span>}
</code></pre></td></tr></table>
</div>
</div><p>基准测试以<code>Benchmark</code>为前缀，需要一个<code>*testing.B</code>类型的参数b，基准测试必须要执行<code>b.N</code>次，这样的测试才有对照性，<code>b.N</code>的值是系统根据实际情况去调整的，从而保证测试的稳定性。 <code>testing.B</code>拥有的方法如下：</p>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a2f;font-weight:bold">func</span> (c <span style="color:#666">*</span>B) <span style="color:#00a000">Error</span>(args <span style="color:#666">...</span><span style="color:#a2f;font-weight:bold">interface</span>{})
<span style="color:#a2f;font-weight:bold">func</span> (c <span style="color:#666">*</span>B) <span style="color:#00a000">Errorf</span>(format <span style="color:#0b0;font-weight:bold">string</span>, args <span style="color:#666">...</span><span style="color:#a2f;font-weight:bold">interface</span>{})
<span style="color:#a2f;font-weight:bold">func</span> (c <span style="color:#666">*</span>B) <span style="color:#00a000">Fail</span>()
<span style="color:#a2f;font-weight:bold">func</span> (c <span style="color:#666">*</span>B) <span style="color:#00a000">FailNow</span>()
<span style="color:#a2f;font-weight:bold">func</span> (c <span style="color:#666">*</span>B) <span style="color:#00a000">Failed</span>() <span style="color:#0b0;font-weight:bold">bool</span>
<span style="color:#a2f;font-weight:bold">func</span> (c <span style="color:#666">*</span>B) <span style="color:#00a000">Fatal</span>(args <span style="color:#666">...</span><span style="color:#a2f;font-weight:bold">interface</span>{})
<span style="color:#a2f;font-weight:bold">func</span> (c <span style="color:#666">*</span>B) <span style="color:#00a000">Fatalf</span>(format <span style="color:#0b0;font-weight:bold">string</span>, args <span style="color:#666">...</span><span style="color:#a2f;font-weight:bold">interface</span>{})
<span style="color:#a2f;font-weight:bold">func</span> (c <span style="color:#666">*</span>B) <span style="color:#00a000">Log</span>(args <span style="color:#666">...</span><span style="color:#a2f;font-weight:bold">interface</span>{})
<span style="color:#a2f;font-weight:bold">func</span> (c <span style="color:#666">*</span>B) <span style="color:#00a000">Logf</span>(format <span style="color:#0b0;font-weight:bold">string</span>, args <span style="color:#666">...</span><span style="color:#a2f;font-weight:bold">interface</span>{})
<span style="color:#a2f;font-weight:bold">func</span> (c <span style="color:#666">*</span>B) <span style="color:#00a000">Name</span>() <span style="color:#0b0;font-weight:bold">string</span>
<span style="color:#a2f;font-weight:bold">func</span> (b <span style="color:#666">*</span>B) <span style="color:#00a000">ReportAllocs</span>()
<span style="color:#a2f;font-weight:bold">func</span> (b <span style="color:#666">*</span>B) <span style="color:#00a000">ResetTimer</span>()
<span style="color:#a2f;font-weight:bold">func</span> (b <span style="color:#666">*</span>B) <span style="color:#00a000">Run</span>(name <span style="color:#0b0;font-weight:bold">string</span>, f <span style="color:#a2f;font-weight:bold">func</span>(b <span style="color:#666">*</span>B)) <span style="color:#0b0;font-weight:bold">bool</span>
<span style="color:#a2f;font-weight:bold">func</span> (b <span style="color:#666">*</span>B) <span style="color:#00a000">RunParallel</span>(body <span style="color:#a2f;font-weight:bold">func</span>(<span style="color:#666">*</span>PB))
<span style="color:#a2f;font-weight:bold">func</span> (b <span style="color:#666">*</span>B) <span style="color:#00a000">SetBytes</span>(n <span style="color:#0b0;font-weight:bold">int64</span>)
<span style="color:#a2f;font-weight:bold">func</span> (b <span style="color:#666">*</span>B) <span style="color:#00a000">SetParallelism</span>(p <span style="color:#0b0;font-weight:bold">int</span>)
<span style="color:#a2f;font-weight:bold">func</span> (c <span style="color:#666">*</span>B) <span style="color:#00a000">Skip</span>(args <span style="color:#666">...</span><span style="color:#a2f;font-weight:bold">interface</span>{})
<span style="color:#a2f;font-weight:bold">func</span> (c <span style="color:#666">*</span>B) <span style="color:#00a000">SkipNow</span>()
<span style="color:#a2f;font-weight:bold">func</span> (c <span style="color:#666">*</span>B) <span style="color:#00a000">Skipf</span>(format <span style="color:#0b0;font-weight:bold">string</span>, args <span style="color:#666">...</span><span style="color:#a2f;font-weight:bold">interface</span>{})
<span style="color:#a2f;font-weight:bold">func</span> (c <span style="color:#666">*</span>B) <span style="color:#00a000">Skipped</span>() <span style="color:#0b0;font-weight:bold">bool</span>
<span style="color:#a2f;font-weight:bold">func</span> (b <span style="color:#666">*</span>B) <span style="color:#00a000">StartTimer</span>()
<span style="color:#a2f;font-weight:bold">func</span> (b <span style="color:#666">*</span>B) <span style="color:#00a000">StopTimer</span>()
</code></pre></td></tr></table>
</div>
</div><h3 id="基准测试示例">基准测试示例</h3>
<p>一个基准测试如下：</p>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a2f;font-weight:bold">func</span> <span style="color:#00a000">BenchmarkIsPalindrome</span>(b <span style="color:#666">*</span>testing.B) {
   <span style="color:#a2f;font-weight:bold">for</span> i <span style="color:#666">:=</span> <span style="color:#666">0</span>; i &lt; b.N; i<span style="color:#666">++</span> {
      <span style="color:#00a000">isPalindrome</span>(<span style="color:#b44">&#34;上海自来水来自海上&#34;</span>)
   }
}
</code></pre></td></tr></table>
</div>
</div><p>运行基准测试：</p>
<pre><code>➜  go test -bench=IsPalindrome -benchmem
goos: linux
goarch: amd64
pkg: go-testing/palindrome
cpu: Intel(R) Core(TM) i5-7300HQ CPU @ 2.50GHz
BenchmarkIsPalindrome-4          3475104               338.8 ns/op             0 B/op          0 allocs/op
PASS
ok      go-testing/palindrome   1.530s

</code></pre><p>BenchmarkIsPalindrome-4 表示对IsPalindrome函数进行基准测试，4表示GOMAXPROCS的值，3475104和338.8 ns/op表示每次调用函数耗时338.8ns，这个结果是调用3475104次的平均值。0 B/op表示每次操作内存分配的字节数为0，0 allocs/op表示每次操作进行了0次内存分配。</p>
<h3 id="性能比较函数">性能比较函数</h3>
<p>上面的基准测试只能得到给定操作的绝对耗时，但是在很多性能问题是发生在两个不同操作之间的相对耗时，比如同一个函数处理1000个元素的耗时与处理1万甚至100万个元素的耗时的差别是多少？再或者对于同一个任务究竟使用哪种算法性能最佳？我们通常需要对两个不同算法的实现使用相同的输入来进行基准比较测试。</p>
<p>性能比较函数通常是一个带有参数的函数，被多个不同的Benchmark函数传入不同的值来调用。举个例子如下：</p>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a2f;font-weight:bold">func</span> <span style="color:#00a000">benchmark</span>(b <span style="color:#666">*</span>testing.B, size <span style="color:#0b0;font-weight:bold">int</span>){<span style="color:#080;font-style:italic">/* ... */</span>}
<span style="color:#a2f;font-weight:bold">func</span> <span style="color:#00a000">Benchmark10</span>(b <span style="color:#666">*</span>testing.B){ <span style="color:#00a000">benchmark</span>(b, <span style="color:#666">10</span>) }
<span style="color:#a2f;font-weight:bold">func</span> <span style="color:#00a000">Benchmark100</span>(b <span style="color:#666">*</span>testing.B){ <span style="color:#00a000">benchmark</span>(b, <span style="color:#666">100</span>) }
<span style="color:#a2f;font-weight:bold">func</span> <span style="color:#00a000">Benchmark1000</span>(b <span style="color:#666">*</span>testing.B){ <span style="color:#00a000">benchmark</span>(b, <span style="color:#666">1000</span>) }
</code></pre></td></tr></table>
</div>
</div><p>例如我们编写了一个计算斐波那契数列的函数如下：</p>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#080;font-style:italic">// fib.go
</span><span style="color:#080;font-style:italic"></span>
<span style="color:#080;font-style:italic">// Fib 是一个计算第n个斐波那契数的函数
</span><span style="color:#080;font-style:italic"></span><span style="color:#a2f;font-weight:bold">func</span> <span style="color:#00a000">Fib</span>(n <span style="color:#0b0;font-weight:bold">int</span>) <span style="color:#0b0;font-weight:bold">int</span> {
	<span style="color:#a2f;font-weight:bold">if</span> n &lt; <span style="color:#666">2</span> {
		<span style="color:#a2f;font-weight:bold">return</span> n
	}
	<span style="color:#a2f;font-weight:bold">return</span> <span style="color:#00a000">Fib</span>(n<span style="color:#666">-</span><span style="color:#666">1</span>) <span style="color:#666">+</span> <span style="color:#00a000">Fib</span>(n<span style="color:#666">-</span><span style="color:#666">2</span>)
}
</code></pre></td></tr></table>
</div>
</div><p>我们编写的性能比较函数如下：</p>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#080;font-style:italic">// fib_test.go
</span><span style="color:#080;font-style:italic"></span>
<span style="color:#a2f;font-weight:bold">func</span> <span style="color:#00a000">benchmarkFib</span>(b <span style="color:#666">*</span>testing.B, n <span style="color:#0b0;font-weight:bold">int</span>) {
	<span style="color:#a2f;font-weight:bold">for</span> i <span style="color:#666">:=</span> <span style="color:#666">0</span>; i &lt; b.N; i<span style="color:#666">++</span> {
		<span style="color:#00a000">Fib</span>(n)
	}
}

<span style="color:#a2f;font-weight:bold">func</span> <span style="color:#00a000">BenchmarkFib1</span>(b <span style="color:#666">*</span>testing.B)  { <span style="color:#00a000">benchmarkFib</span>(b, <span style="color:#666">1</span>) }
<span style="color:#a2f;font-weight:bold">func</span> <span style="color:#00a000">BenchmarkFib2</span>(b <span style="color:#666">*</span>testing.B)  { <span style="color:#00a000">benchmarkFib</span>(b, <span style="color:#666">2</span>) }
<span style="color:#a2f;font-weight:bold">func</span> <span style="color:#00a000">BenchmarkFib3</span>(b <span style="color:#666">*</span>testing.B)  { <span style="color:#00a000">benchmarkFib</span>(b, <span style="color:#666">3</span>) }
<span style="color:#a2f;font-weight:bold">func</span> <span style="color:#00a000">BenchmarkFib10</span>(b <span style="color:#666">*</span>testing.B) { <span style="color:#00a000">benchmarkFib</span>(b, <span style="color:#666">10</span>) }
<span style="color:#a2f;font-weight:bold">func</span> <span style="color:#00a000">BenchmarkFib20</span>(b <span style="color:#666">*</span>testing.B) { <span style="color:#00a000">benchmarkFib</span>(b, <span style="color:#666">20</span>) }
<span style="color:#a2f;font-weight:bold">func</span> <span style="color:#00a000">BenchmarkFib40</span>(b <span style="color:#666">*</span>testing.B) { <span style="color:#00a000">benchmarkFib</span>(b, <span style="color:#666">40</span>) }
</code></pre></td></tr></table>
</div>
</div><p>运行基准测试：</p>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">split $ go <span style="color:#a2f">test</span> -bench<span style="color:#666">=</span>.
goos: darwin
goarch: amd64
pkg: test_demo/fib
BenchmarkFib1-8         <span style="color:#666">1000000000</span>               2.03 ns/op
BenchmarkFib2-8         <span style="color:#666">300000000</span>                5.39 ns/op
BenchmarkFib3-8         <span style="color:#666">200000000</span>                9.71 ns/op
BenchmarkFib10-8         <span style="color:#666">5000000</span>               <span style="color:#666">325</span> ns/op
BenchmarkFib20-8           <span style="color:#666">30000</span>             <span style="color:#666">42460</span> ns/op
BenchmarkFib40-8               <span style="color:#666">2</span>         <span style="color:#666">638524980</span> ns/op
PASS
ok      test_demo/fib 12.944s
</code></pre></td></tr></table>
</div>
</div><p>这里需要注意的是，默认情况下，每个基准测试至少运行1秒。如果在Benchmark函数返回时没有到1秒，则b.N的值会按1,2,5,10,20,50，…增加，并且函数再次运行。</p>
<p>最终的BenchmarkFib40只运行了两次，每次运行的平均值只有不到一秒。像这种情况下我们应该可以使用<code>-benchtime</code>标志增加最小基准时间，以产生更准确的结果。例如：</p>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">split $ go <span style="color:#a2f">test</span> -bench<span style="color:#666">=</span>Fib40 -benchtime<span style="color:#666">=</span>20s
goos: darwin
goarch: amd64
pkg: test_demo/fib
BenchmarkFib40-8              <span style="color:#666">50</span>         <span style="color:#666">663205114</span> ns/op
PASS
ok     test_demo/fib 33.849s
</code></pre></td></tr></table>
</div>
</div><p>这一次<code>BenchmarkFib40</code>函数运行了50次，结果就会更准确一些了。</p>
<h3 id="重置时间">重置时间</h3>
<p><code>b.ResetTimer</code>之前的处理不会放到执行时间里，也不会输出到报告中，所以可以在之前做一些不计划作为测试报告的操作。例如：</p>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a2f;font-weight:bold">func</span> <span style="color:#00a000">BenchmarkIsPalindrome</span>(b <span style="color:#666">*</span>testing.B) {
	time.<span style="color:#00a000">Sleep</span>(<span style="color:#666">5</span> <span style="color:#666">*</span> time.Second) <span style="color:#080;font-style:italic">// 假设需要做一些耗时的无关操作
</span><span style="color:#080;font-style:italic"></span>	b.<span style="color:#00a000">ResetTimer</span>()              <span style="color:#080;font-style:italic">// 重置计时器
</span><span style="color:#080;font-style:italic"></span>	<span style="color:#a2f;font-weight:bold">for</span> i <span style="color:#666">:=</span> <span style="color:#666">0</span>; i &lt; b.N; i<span style="color:#666">++</span> {
		<span style="color:#00a000">isPalindrome</span>(<span style="color:#b44">&#34;上海自来水来自海上&#34;</span>)
	}
}
</code></pre></td></tr></table>
</div>
</div><h3 id="并行测试">并行测试</h3>
<p><code>func (b *B) RunParallel(body func(*PB))</code>会以并行的方式执行给定的基准测试。</p>
<p><code>RunParallel</code>会创建出多个<code>goroutine</code>，并将<code>b.N</code>分配给这些<code>goroutine</code>执行， 其中<code>goroutine</code>数量的默认值为<code>GOMAXPROCS</code>。用户如果想要增加非CPU受限（non-CPU-bound）基准测试的并行性， 那么可以在<code>RunParallel</code>之前调用<code>SetParallelism</code> 。<code>RunParallel</code>通常会与<code>-cpu</code>标志一同使用。</p>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a2f;font-weight:bold">func</span> <span style="color:#00a000">BenchmarkIsPalindromeParallel</span>(b <span style="color:#666">*</span>testing.B) {
	<span style="color:#080;font-style:italic">// b.SetParallelism(1) // 设置使用的CPU数
</span><span style="color:#080;font-style:italic"></span>	b.<span style="color:#00a000">RunParallel</span>(<span style="color:#a2f;font-weight:bold">func</span>(pb <span style="color:#666">*</span>testing.PB) {
		<span style="color:#a2f;font-weight:bold">for</span> pb.<span style="color:#00a000">Next</span>() {
			<span style="color:#00a000">isPalindrome</span>(<span style="color:#b44">&#34;上海自来水来自海上&#34;</span>)
		}
	})
}
</code></pre></td></tr></table>
</div>
</div><p>还可以通过在测试命令后添加<code>-cpu</code>参数如<code>go test -bench=. -cpu 1</code>来指定使用的CPU数量。</p>
<h2 id="示例函数">示例函数</h2>
<h3 id="示例函数的格式">示例函数的格式</h3>
<p>被<code>go test</code>特殊对待的第三种函数就是示例函数，它们的函数名以<code>Example</code>为前缀。它们既没有参数也没有返回值。标准格式如下：</p>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a2f;font-weight:bold">func</span> <span style="color:#00a000">ExampleName</span>() {
    <span style="color:#080;font-style:italic">// ...
</span><span style="color:#080;font-style:italic"></span>}
</code></pre></td></tr></table>
</div>
</div><h3 id="示例函数示例">示例函数示例</h3>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a2f;font-weight:bold">func</span> <span style="color:#00a000">ExampleIsPalindrome</span>() {
   fmt.<span style="color:#00a000">Println</span>(<span style="color:#00a000">IsPalindrome</span>(<span style="color:#b44">&#34;上海自来水来自海上&#34;</span>))
   fmt.<span style="color:#00a000">Println</span>(<span style="color:#00a000">IsPalindrome</span>(<span style="color:#b44">&#34;Able was I ere I saw Elba&#34;</span>))
   <span style="color:#080;font-style:italic">// Output:
</span><span style="color:#080;font-style:italic"></span>   <span style="color:#080;font-style:italic">// true
</span><span style="color:#080;font-style:italic"></span>   <span style="color:#080;font-style:italic">// true
</span><span style="color:#080;font-style:italic"></span>}
</code></pre></td></tr></table>
</div>
</div><p>在Goland中可以方便的看到注释和示例函数</p>
<p><img src="https://gitee.com/aszh/Gitee-Pages/raw/master/img/20210610174756.png" alt="image-20210610174754983"></p>

        </div>

        


        

<div class="post-archive">
    <h2>See Also</h2>
    <ul class="listing">
        
        <li><a href="/post/Golang/Golang-struct-%E5%86%85%E5%AD%98%E5%AF%B9%E9%BD%90/">Golang Struct 内存对齐</a></li>
        
        <li><a href="/post/Golang/Golang-Slice%E5%8E%9F%E7%90%86/">Golang Slice原理</a></li>
        
        <li><a href="/post/Golang/Golang-Map%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/">Golang Map的实现原理</a></li>
        
        <li><a href="/post/Golang/Golang%E4%B8%ADmake%E4%B8%8Enew%E6%9C%89%E4%BD%95%E5%8C%BA%E5%88%AB/">Golang中make与new有何区别？</a></li>
        
        <li><a href="/post/%E9%85%8D%E7%BD%AE%E5%9B%BE%E5%BA%8A/">linux 下安装配置 Typora &#43; gitee &#43; PicGo-Core 图床</a></li>
        
    </ul>
</div>


        <div class="post-meta meta-tags">
            
            <ul class="clearfix">
                
                <li><a href='https://aszhc.github.io/tags/Golang'>Golang</a></li>
                
                <li><a href='https://aszhc.github.io/tags/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95'>单元测试</a></li>
                
            </ul>
            
        </div>
    </article>
    
    

    
    
    <div class="post bg-white">
      <script src="https://utteranc.es/client.js"
            repo= "aszhc/aszhc.github.io"
            issue-term="pathname"
            theme="github-light"
            crossorigin="anonymous"
            async>
      </script>
    </div>
    
</div>

                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://aszhc.github.io/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://aszhc.github.io">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://aszhc.github.io/post/CircleCI/" title="使用CircleCI&#43;GitHub 进行CI/CD">使用CircleCI&#43;GitHub 进行CI/CD</a>
    </li>
    
    <li>
        <a href="https://aszhc.github.io/post/Golang/Golang-%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/" title="Golang 单元测试">Golang 单元测试</a>
    </li>
    
    <li>
        <a href="https://aszhc.github.io/post/%E9%85%8D%E7%BD%AE%E5%9B%BE%E5%BA%8A/" title="linux 下安装配置 Typora &#43; gitee &#43; PicGo-Core 图床">linux 下安装配置 Typora &#43; gitee &#43; PicGo-Core 图床</a>
    </li>
    
    <li>
        <a href="https://aszhc.github.io/post/markdown%E4%B8%AD%E7%9A%84emoji%E5%9B%BE%E6%A0%87%E6%A0%87%E7%AD%BE%E8%A1%A8/" title="Markdown中的emoji图标标签表">Markdown中的emoji图标标签表</a>
    </li>
    
    <li>
        <a href="https://aszhc.github.io/post/Golang/Golang-struct-%E5%86%85%E5%AD%98%E5%AF%B9%E9%BD%90/" title="Golang Struct 内存对齐">Golang Struct 内存对齐</a>
    </li>
    
    <li>
        <a href="https://aszhc.github.io/post/Golang/Golang-Slice%E5%8E%9F%E7%90%86/" title="Golang Slice原理">Golang Slice原理</a>
    </li>
    
    <li>
        <a href="https://aszhc.github.io/post/Golang/Golang-Map%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/" title="Golang Map的实现原理">Golang Map的实现原理</a>
    </li>
    
    <li>
        <a href="https://aszhc.github.io/post/Golang/Golang%E4%B8%ADmake%E4%B8%8Enew%E6%9C%89%E4%BD%95%E5%8C%BA%E5%88%AB/" title="Golang中make与new有何区别？">Golang中make与new有何区别？</a>
    </li>
    
    <li>
        <a href="https://aszhc.github.io/post/algorithm/%E5%93%88%E5%B8%8C%E6%98%A0%E5%B0%84%E5%92%8C%E9%9B%86%E5%90%88%E7%BB%83%E4%B9%A0/" title="哈希映射和集合练习">哈希映射和集合练习</a>
    </li>
    
    <li>
        <a href="https://aszhc.github.io/post/algorithm/%E6%A0%88%E5%92%8C%E9%98%9F%E5%88%97%E7%BB%83%E4%B9%A0%E9%A2%98/" title="栈和队列练习题">栈和队列练习题</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">分类</h3>
<ul class="widget-list">
    
    <li><a href="https://aszhc.github.io/categories/CI/CD/">CI/CD (1)</a></li>
    
    <li><a href="https://aszhc.github.io/categories/Docker/">Docker (1)</a></li>
    
    <li><a href="https://aszhc.github.io/categories/%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/">安装与配置 (1)</a></li>
    
    <li><a href="https://aszhc.github.io/categories/%E5%B7%A5%E5%85%B7/">工具 (1)</a></li>
    
    <li><a href="https://aszhc.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库 (1)</a></li>
    
    <li><a href="https://aszhc.github.io/categories/%E7%AE%97%E6%B3%95/">算法 (5)</a></li>
    
    <li><a href="https://aszhc.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络 (1)</a></li>
    
    <li><a href="https://aszhc.github.io/categories/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/">语言基础 (5)</a></li>
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title">标签</h3>
<div class="tagcloud">
    
    <a href="https://aszhc.github.io/tags/Golang/">Golang</a>
    
    <a href="https://aszhc.github.io/tags/markdown/">markdown</a>
    
    <a href="https://aszhc.github.io/tags/markdown/">markdown</a>
    
    <a href="https://aszhc.github.io/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/">动态规划</a>
    
    <a href="https://aszhc.github.io/tags/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/">单元测试</a>
    
    <a href="https://aszhc.github.io/tags/%E5%93%88%E5%B8%8C/">哈希</a>
    
    <a href="https://aszhc.github.io/tags/%E5%9B%BE%E5%BA%8A/">图床</a>
    
    <a href="https://aszhc.github.io/tags/%E5%AE%B9%E5%99%A8%E5%8C%96/">容器化</a>
    
    <a href="https://aszhc.github.io/tags/%E6%95%B0%E7%BB%84/">数组</a>
    
    <a href="https://aszhc.github.io/tags/%E6%A0%88/">栈</a>
    
    <a href="https://aszhc.github.io/tags/%E7%AC%94%E8%AE%B0/">笔记</a>
    
    <a href="https://aszhc.github.io/tags/%E8%BF%90%E7%BB%B4/">运维</a>
    
    <a href="https://aszhc.github.io/tags/%E9%80%92%E5%BD%92/">递归</a>
    
    <a href="https://aszhc.github.io/tags/%E9%83%A8%E7%BD%B2/">部署</a>
    
    <a href="https://aszhc.github.io/tags/%E9%93%BE%E6%8E%A5/">链接</a>
    
    <a href="https://aszhc.github.io/tags/%E9%93%BE%E8%A1%A8/">链表</a>
    
    <a href="https://aszhc.github.io/tags/%E9%98%9F%E5%88%97/">队列</a>
    
    <a href="https://aszhc.github.io/tags/%E9%9B%86%E5%90%88/">集合</a>
    
</div>
    </section>

    
<section class="widget">
    <h3 class="widget-title">友情链接</h3>
    <ul class="widget-list">
        
        <li>
            <a target="_blank" href="https://blog.csdn.net/Andrew_ZhouC" title="我的CSDN博客">我的CSDN博客</a>
        </li>
        
        <li>
            <a target="_blank" href="https://github.com/aszhc" title="我的github">我的github</a>
        </li>
        
    </ul>
</section>

	
	<section class="widget">
        <h3 class="widget-title">公众号</h3>
		<ul class="widget-list">
        <li>
            
                <img src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJ%0AChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/%0A2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgo%0AKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCABkAGQDASIAAhEBAxEB/8QA%0AHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUF%0ABAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkK%0AFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1%0Adnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXG%0Ax8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEB%0AAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAEC%0AAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRom%0AJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOE%0AhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU%0A1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD6jvLqCytJ%0Arq8mjgtoEaSWWVgqRqBksxPAAHJJrmf+FkeB/wDocfDn/gzh/wDiqX4tf8kr%0A8Y/9ga8/9EPXzJ4h1rwv4C8B+AZJfAOgaxdarpKXE89zGFcsAuSTtOSc0AfT%0A9r8QfBt1cxW9r4s8PzTyuI4449RhZnYnAUANkknjFaE/ibQrddRafWtNiXTS%0Aq3pe6RRaljhRJk/JntnGa+Wmm0DxB4O8A+J9J8K6VoF7J4ytbN/sUYBKLk4L%0AYBwTg49hR8Vvhb8T9V8deLpvDlhM2g6xcI8iJfwxpcqgG3chcHg5xkUAfWwu%0AoDaC6E0ZtinmiXcNmzGd2emMc5rP0LxLoXiAzDQdZ03UzBt837HdJN5ec43b%0A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%0AigAooooAKKKKACiiigD/2Q==">
           
        </li>
    </ul>
    </section>
	
    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://aszhc.github.io/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
    <footer id="footer">
    <div class="container">
        &copy; 2021 <a href="https://aszhc.github.io">PHOENIX By 周闖</a>.
        Powered by <a rel="nofollow noreferer noopener" href="https://gohugo.io" target="_blank">Hugo</a>.
        <a href="https://www.flysnow.org/" target="_blank"></a>         	</a>.
        
    </div>
</footer>


    
    <script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>


<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




    <script src='/js/douban.js'></script>

</body>

</html>