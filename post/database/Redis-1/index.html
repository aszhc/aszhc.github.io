<!doctype html>
<html lang="zh-CN">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title> | PHOENIX</title>
    <meta property="og:title" content=" - PHOENIX">
    <meta property="og:type" content="article">
        
        
    <meta name="Keywords" content="golang,go语言,go语言笔记,博客,项目管理,python,公众号">
    <meta name="description" content="">
        
    <meta name="author" content="周闖">
    <meta property="og:url" content="https://aszhc.github.io/post/database/Redis-1/">
    
    <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-4031353640611810",
        enable_page_level_ads: true
    });
    </script>
    


    
    
        <link rel="stylesheet" href='/css/douban.css'>
    
        <link rel="stylesheet" href='/css/other.css'>
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://aszhc.github.io">
                        PHOENIX
                    </a>
                
                <p class="description">Computers do not solve problems, they execute solutions.</p>
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="current" href="https://aszhc.github.io">首页</a>
                    
                    <a  href="https://aszhc.github.io/collect/" title="搜集">搜集</a>
                    
                    <a  href="https://aszhc.github.io/archives/" title="归档">归档</a>
                    
                    <a  href="https://aszhc.github.io/about/" title="关于">关于</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    <style type="text/css">
    .post-toc {
        position: fixed;
        width: 250px;
        margin-left: -300px;
        padding: 5px 10px;
        font-family: Athelas, STHeiti, Microsoft Yahei, serif;
        font-size: 12px;
        border: 1px solid rgba(0, 0, 0, .07);
        border-radius: 5px;
        background-color: rgba(255, 255, 255, 0.98);
        background-clip: padding-box;
        -webkit-box-shadow: 1px 1px 2px rgba(0, 0, 0, .125);
        box-shadow: 1px 1px 2px rgba(0, 0, 0, .125);
        word-wrap: break-word;
        white-space: nowrap;
        -webkit-box-sizing: border-box;
        box-sizing: border-box;
        z-index: 999;
        cursor: pointer;
        max-height: 70%;
        overflow-y: auto;
        overflow-x: hidden;
    }

    .post-toc .post-toc-title {
        width: 100%;
        margin: 0 auto;
        font-size: 20px;
        font-weight: 400;
        text-transform: uppercase;
        text-align: center;
    }

    .post-toc .post-toc-content {
        font-size: 15px;
    }

    .post-toc .post-toc-content>nav>ul {
        margin: 10px 0;
    }

    .post-toc .post-toc-content ul {
        padding-left: 20px;
        list-style: square;
        margin: 0.5em;
        line-height: 1.8em;
    }

    .post-toc .post-toc-content ul ul {
        padding-left: 15px;
        display: none;
    }

    @media print,
    screen and (max-width:1057px) {
        .post-toc {
            display: none;
        }
    }
</style>
<div class="post-toc" style="position: absolute; top: 188px;">
    <h2 class="post-toc-title">文章目录</h2>
    <div class="post-toc-content">
        <nav id="TableOfContents">
  <ol>
    <li><a href="#nosql-概述">Nosql 概述</a>
      <ol>
        <li><a href="#为什么要用nosql">为什么要用Nosql</a></li>
        <li><a href="#什么是nosql">什么是NoSQL</a></li>
        <li><a href="#nosql特点">NoSQL特点</a></li>
        <li><a href="#阿里巴巴演进分析">阿里巴巴演进分析</a></li>
        <li><a href="#nosql的四大分类">Nosql的四大分类</a></li>
      </ol>
    </li>
    <li><a href="#redis-入门">Redis 入门</a>
      <ol>
        <li><a href="#概述">概述</a></li>
        <li><a href="#测试性能">测试性能</a></li>
        <li><a href="#基础知识">基础知识</a></li>
      </ol>
    </li>
    <li><a href="#五大数据类型">五大数据类型</a>
      <ol>
        <li><a href="#redis-key">Redis-key</a></li>
        <li><a href="#string字符串">String(字符串)</a></li>
        <li><a href="#list列表">List（列表）</a></li>
        <li><a href="#set集合">Set(集合)</a></li>
        <li><a href="#hash哈希">Hash(哈希)</a></li>
        <li><a href="#zset有序集合">Zset(有序集合)</a></li>
      </ol>
    </li>
    <li><a href="#三种特殊数据类型">三种特殊数据类型</a>
      <ol>
        <li><a href="#geospatial地理位置">Geospatial（地理位置）</a></li>
        <li><a href="#hyperloglog基数统计">Hyperloglog（基数统计）</a></li>
        <li><a href="#bitmaps位图">BitMaps（位图）</a></li>
      </ol>
    </li>
    <li><a href="#事务">事务</a>
      <ol>
        <li><a href="#redis事务操作过程">Redis事务操作过程</a></li>
        <li><a href="#事务错误">事务错误</a></li>
        <li><a href="#监控面试常问">监控（面试常问）</a></li>
      </ol>
    </li>
    <li><a href="#go语言操作redis">Go语言操作Redis</a>
      <ol>
        <li><a href="#准备redis环境">准备Redis环境</a></li>
        <li><a href="#go-redis-库">go-redis 库</a></li>
      </ol>
    </li>
    <li><a href="#redisconf">Redis.conf</a>
      <ol>
        <li><a href="#redis-持久化">Redis 持久化</a></li>
        <li><a href="#rdbredis-database">RDB（Redis DataBase）</a></li>
        <li><a href="#aofappend-only-file">AOF（Append Only File）</a></li>
      </ol>
    </li>
  </ol>
</nav>
    </div>
</div>
<script type="text/javascript">
    $(document).ready(function () {
        var postToc = $(".post-toc");
        if (postToc.length) {
            var leftPos = $("#main").offset().left;
            if(leftPos<220){
                postToc.css({"width":leftPos-10,"margin-left":(0-leftPos)})
            }

            var t = postToc.offset().top - 20,
                a = {
                    start: {
                        position: "absolute",
                        top: t
                    },
                    process: {
                        position: "fixed",
                        top: 20
                    },
                };
            $(window).scroll(function () {
                var e = $(window).scrollTop();
                e < t ? postToc.css(a.start) : postToc.css(a.process)
            })
        }
    })
</script>
    <article class="post">
        <header>
            <h1 class="post-title"></h1>
        </header>
        <date class="post-meta meta-date">
            1年1月1日
        </date>
        
        
        <div class="post-meta">
            <span id="busuanzi_container_page_pv">|<span id="busuanzi_value_page_pv"></span><span>
                    阅读</span></span>
        </div>
        
        
        <div class="post-content">
            <h2 id="nosql-概述">Nosql 概述</h2>
<h3 id="为什么要用nosql">为什么要用Nosql</h3>
<blockquote>
<ol>
<li>单机MySQL的年代</li>
<li>Memcached(缓存)+MySQL+垂直拆分（读写分离）</li>
<li>分库分表+水平拆分+MySQL集群</li>
<li>如今最近的年代</li>
</ol>
</blockquote>
<h3 id="什么是nosql">什么是NoSQL</h3>
<blockquote>
<p>NoSQL</p>
</blockquote>
<p>NoSQL= Not Only SQL</p>
<p>关系型数据库：列+行，同一个表下数据的结构是一样的。</p>
<p>非关系型数据库：数据存储没有固定的格式，并且可以进行横向扩展。</p>
<p>NoSQL泛指非关系型数据库，随着web2.0互联网的诞生，传统的关系型数据库很难对付web2.0时代！尤其是超大规模的高并发的社区，暴露出来很多难以克服的问题，NoSQL在当今大数据环境下发展的十分迅速，Redis是发展最快的。</p>
<h3 id="nosql特点">NoSQL特点</h3>
<ol>
<li>
<p>方便扩展（数据之间没有关系，很好扩展）</p>
</li>
<li>
<p>大数据量高性能（Redis一秒可以写8万次，读11万次，NoSQL的缓存记录级，是一种细粒度的缓存，性能会比较高！）</p>
</li>
<li>
<p>数据类型是多样性的（不需要实现数据库，随取随用）</p>
</li>
<li>
<p>传统的RDBMS和NoSQL</p>
<pre><code>传统的 RDBMS(关系型数据库)
- 结构化组织
- SQL
- 数据和关系都存在单独的表中 row col
- 操作，数据定义语言
- 严格的一致性
- 基础的事务
- ...
</code></pre><pre><code>Nosql
- 不仅仅是数据
- 没有固定的查询语言
- 键值对存储，列存储，文档存储，图形数据库（社交关系）
- 最终一致性
- CAP定理和BASE
- 高性能，高可用，高扩展
- ...
</code></pre></li>
</ol>
<blockquote>
<p>了解：3V+3高</p>
</blockquote>
<p>大数据时代的3V：主要是描述问题的：</p>
<ol>
<li>海量</li>
<li>多样</li>
<li>实时</li>
</ol>
<p>大数据时代的3高：主要是对程序的要求</p>
<ol>
<li>高并发</li>
<li>高可扩</li>
<li>高性能</li>
</ol>
<p>真正的公司中的实践：NoSQL+RDBMS一起使用才是最强的</p>
<h3 id="阿里巴巴演进分析">阿里巴巴演进分析</h3>
<p>推荐阅读：阿里云的这群疯子https://yq.aliyun.com/articles/653511</p>
<p><img src="https://img-blog.csdnimg.cn/20200820103829446.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RERERlbmdf,size_16,color_FFFFFF,t_70#pic_center" alt="1"></p>
<p><img src="https://gitee.com/aszh/Gitee-Pages/raw/master/img/20210615090406" alt="在这里插入图片描述"></p>
<pre><code># 商品信息
- 一般存放在关系型数据库：Mysql,阿里巴巴使用的Mysql都是经过内部改动的。

# 商品描述、评论(文字居多)
- 文档型数据库：MongoDB

# 图片
- 分布式文件系统 FastDFS
- 淘宝：TFS
- Google: GFS
- Hadoop: HDFS
- 阿里云: oss

# 商品关键字 用于搜索
- 搜索引擎：solr,elasticsearch
- 阿里：Isearch 多隆

# 商品热门的波段信息
- 内存数据库：Redis，Memcache

# 商品交易，外部支付接口
- 第三方应用
</code></pre><h3 id="nosql的四大分类">Nosql的四大分类</h3>
<blockquote>
<p>KV键值对</p>
</blockquote>
<ul>
<li>新浪：Redis</li>
<li>美团：Redis + Tair</li>
<li>阿里、百度：Redis + Memcache</li>
</ul>
<blockquote>
<p>文档性数据库（bson数据格式）：</p>
</blockquote>
<ul>
<li>MongoDB：
<ul>
<li>基于分布式文件存储的数据库。C++编写，用于处理大量文档。</li>
<li>MongoDB是RDBMS和NoSQL的中间产品。MongoDB是非关系型数据库中功能最丰富的，NoSQL中最像关系型数据库的数据库</li>
</ul>
</li>
<li>ConthDB</li>
</ul>
<blockquote>
<p>列存储数据库</p>
</blockquote>
<ul>
<li>HBase</li>
<li>分布式文件系统</li>
</ul>
<blockquote>
<p>图关系数据库</p>
</blockquote>
<ul>
<li>Neo4j、InfoGrid</li>
</ul>
<table>
<thead>
<tr>
<th>分类</th>
<th>Examples举例</th>
<th>典型应用场景</th>
<th>数据模型</th>
<th>优点</th>
<th>缺点</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>键值对（key-value）</strong></td>
<td>Tokyo Cabinet/Tyrant, Redis, Voldemort, Oracle BDB</td>
<td>内容缓存，主要用于处理大量数据的高访问负载，也用于一些日志系统等等。</td>
<td>Key 指向 Value 的键值对，通常用hash table来实现</td>
<td>查找速度快</td>
<td>数据无结构化，通常只被当作字符串或者二进制数据</td>
</tr>
<tr>
<td><strong>列存储数据库</strong></td>
<td>Cassandra, HBase, Riak</td>
<td>分布式的文件系统</td>
<td>以列簇式存储，将同一列数据存在一起</td>
<td>查找速度快，可扩展性强，更容易进行分布式扩展</td>
<td>功能相对局限</td>
</tr>
<tr>
<td><strong>文档型数据库</strong></td>
<td>CouchDB, MongoDb</td>
<td>Web应用（与Key-Value类似，Value是结构化的，不同的是数据库能够了解Value的内容）</td>
<td>Key-Value对应的键值对，Value为结构化数据</td>
<td>数据结构要求不严格，表结构可变，不需要像关系型数据库一样需要预先定义表结构</td>
<td>查询性能不高，而且缺乏统一的查询语法。</td>
</tr>
<tr>
<td><strong>图形(Graph)数据库</strong></td>
<td>Neo4J, InfoGrid, Infinite Graph</td>
<td>社交网络，推荐系统等。专注于构建关系图谱</td>
<td>图结构</td>
<td>利用图结构相关算法。比如最短路径寻址，N度关系查找等</td>
<td>很多时候需要对整个图做计算才能得出需要的信息，而且这种结构不太好做分布式的集群</td>
</tr>
</tbody>
</table>
<h2 id="redis-入门">Redis 入门</h2>
<h3 id="概述">概述</h3>
<blockquote>
<p>Redis是什么？</p>
</blockquote>
<p>Redis（Remote Dictionary Server )，即远程字典服务。</p>
<p>是一个开源的使用ANSI C语言编写、支持网络、可基于内存亦可持久化的日志型、<strong>Key-Value数据库</strong>，并提供多种语言的API。</p>
<p>与memcached一样，为了保证效率，<strong>数据都是缓存在内存中</strong>。区别的是redis会周期性的把更新的数据写入磁盘或者把修改操作写入追加的记录文件，并且在此基础上实现了master-slave(主从)同步。</p>
<blockquote>
<p>Redis能干什么？</p>
</blockquote>
<ol>
<li>内存存储、持久化，内存是断电即失的，所以需要持久化（RDB、AOF）</li>
<li>高效率、用于高速缓冲</li>
<li>发布订阅系统</li>
<li>地图信息分析</li>
<li>计时器、计数器（浏览量）</li>
<li>&hellip;&hellip;</li>
</ol>
<blockquote>
<p>特性</p>
</blockquote>
<ol>
<li>
<p>多样的数据类型</p>
</li>
<li>
<p>持久化</p>
</li>
<li>
<p>集群</p>
</li>
<li>
<p>事务</p>
<p>&hellip;&hellip;</p>
</li>
</ol>
<h3 id="测试性能">测试性能</h3>
<p>**redis-benchmark：**Redis官方提供的性能测试工具，参数选项如下：</p>
<p><img src="https://gitee.com/aszh/Gitee-Pages/raw/master/img/20210615091522" alt="img"></p>
<h4 id="简单测试">简单测试：</h4>
<pre><code># 测试：100个并发连接 100000请求
redis-benchmark -h localhost -p 6379 -c 100 0n 100000
</code></pre><p><img src="https://gitee.com/aszh/Gitee-Pages/raw/master/img/20210615091831.png" alt="image-20210615091830567"></p>
<h3 id="基础知识">基础知识</h3>
<blockquote>
<p>redis默认有16个数据库</p>
</blockquote>
<p>默认使用的第0个;</p>
<p>16个数据库为：DB 0~DB 15
默认使用DB 0 ，可以使用<code>select n</code>切换到DB n，<code>dbsize</code>可以查看当前数据库的大小，与key数量相关。</p>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">127.0.0.1:6379&gt; config get databases <span style="color:#080;font-style:italic"># 命令行查看数据库数量databases</span>
1<span style="color:#666">)</span> <span style="color:#b44">&#34;databases&#34;</span>
2<span style="color:#666">)</span> <span style="color:#b44">&#34;16&#34;</span>

127.0.0.1:6379&gt; <span style="color:#a2f;font-weight:bold">select</span> <span style="color:#666">8</span> <span style="color:#080;font-style:italic"># 切换数据库 DB 8</span>
OK
127.0.0.1:6379<span style="color:#666">[</span>8<span style="color:#666">]</span>&gt; dbsize <span style="color:#080;font-style:italic"># 查看数据库大小</span>
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">0</span>

<span style="color:#080;font-style:italic"># 不同数据库之间 数据是不能互通的，并且dbsize 是根据库中key的个数。</span>
127.0.0.1:6379&gt; <span style="color:#a2f">set</span> name sakura 
OK
127.0.0.1:6379&gt; SELECT <span style="color:#666">8</span>
OK
127.0.0.1:6379<span style="color:#666">[</span>8<span style="color:#666">]</span>&gt; get name <span style="color:#080;font-style:italic"># db8中并不能获取db0中的键值对。</span>
<span style="color:#666">(</span>nil<span style="color:#666">)</span>
127.0.0.1:6379<span style="color:#666">[</span>8<span style="color:#666">]</span>&gt; DBSIZE
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">0</span>
127.0.0.1:6379<span style="color:#666">[</span>8<span style="color:#666">]</span>&gt; SELECT <span style="color:#666">0</span>
OK
127.0.0.1:6379&gt; keys *
1<span style="color:#666">)</span> <span style="color:#b44">&#34;counter:__rand_int__&#34;</span>
2<span style="color:#666">)</span> <span style="color:#b44">&#34;mylist&#34;</span>
3<span style="color:#666">)</span> <span style="color:#b44">&#34;name&#34;</span>
4<span style="color:#666">)</span> <span style="color:#b44">&#34;key:__rand_int__&#34;</span>
5<span style="color:#666">)</span> <span style="color:#b44">&#34;myset:__rand_int__&#34;</span>
127.0.0.1:6379&gt; DBSIZE <span style="color:#080;font-style:italic"># size和key个数相关</span>
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">5</span>
</code></pre></td></tr></table>
</div>
</div><p><code>keys *</code> ：查看当前数据库中所有的key。</p>
<p><code>flushdb</code>：清空当前数据库中的键值对。</p>
<p><code>flushall</code>：清空所有数据库的键值对。</p>
<blockquote>
<p>Redis是单线程的，基于内存操作的</p>
</blockquote>
<p>所以Redis的性能瓶颈不是CPU,而是机器内存和网络带宽。</p>
<p>那么为什么Redis的速度如此快呢，性能这么高呢？QPS达到10W+</p>
<blockquote>
<p>Redis为什么单线程还这么快？</p>
</blockquote>
<ul>
<li>误区1：高性能的服务器一定是多线程的？</li>
<li>误区2：多线程（CPU上下文会切换！）一定比单线程效率高！</li>
</ul>
<p>核心：Redis是将所有的数据放在内存中的，所以说使用单线程去操作效率就是最高的，多线程（CPU上下文会切换：耗时的操作！），==对于内存系统来说，如果没有上下文切换效率就是最高的，多次读写都是在一个CPU上的==，在内存存储数据情况下，单线程就是最佳的方案。</p>
<h2 id="五大数据类型">五大数据类型</h2>
<p>Redis是一个开源（BSD许可），内存存储的数据结构服务器，可用作<strong>数据库，高速缓存和消息队列代理</strong>。它支持<strong>字符串、哈希表、列表、集合、有序集合，位图，hyperloglogs等</strong>数据类型。内置复制、Lua脚本、LRU收回、事务以及不同级别磁盘持久化功能，同时通过Redis Sentinel提供高可用，通过Redis Cluster提供自动分区。</p>
<h3 id="redis-key">Redis-key</h3>
<blockquote>
<p>在redis中无论什么数据类型，在数据库中都是以key-value形式保存，通过进行对Redis-key的操作，来完成对数据库中数据的操作。</p>
</blockquote>
<p>下面学习的命令：</p>
<ul>
<li><code>exists key</code>：判断键是否存在</li>
<li><code>del key</code>：删除键值对</li>
<li><code>move key db</code>：将键值对移动到指定数据库</li>
<li><code>expire key second</code>：设置键值对的过期时间</li>
<li><code>type key</code>：查看value的数据类型</li>
</ul>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">127.0.0.1:6379&gt; keys *	<span style="color:#080;font-style:italic"># 查看当前数据库所有key</span>
<span style="color:#666">(</span>empty list or <span style="color:#a2f">set</span><span style="color:#666">)</span>
127.0.0.1:6379&gt; <span style="color:#a2f">set</span> name zhou	<span style="color:#080;font-style:italic"># set key</span>
OK
127.0.0.1:6379&gt; <span style="color:#a2f">set</span> age <span style="color:#666">23</span>
OK
127.0.0.1:6379&gt; keys *
1<span style="color:#666">)</span> <span style="color:#b44">&#34;age&#34;</span>
2<span style="color:#666">)</span> <span style="color:#b44">&#34;name&#34;</span>
127.0.0.1:6379&gt; move age <span style="color:#666">1</span> <span style="color:#080;font-style:italic"># 将键值对移动到指定数据库</span>
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">1</span>
127.0.0.1:6379&gt; EXISTS age	<span style="color:#080;font-style:italic"># 判断键是否存在</span>
<span style="color:#666">(</span>integer<span style="color:#666">)</span> 0	<span style="color:#080;font-style:italic"># 不存在</span>	
127.0.0.1:6379&gt; EXISTS name
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">1</span> <span style="color:#080;font-style:italic"># 存在</span>
127.0.0.1:6379&gt; SELECT <span style="color:#666">1</span>
OK
127.0.0.1:6379<span style="color:#666">[</span>1<span style="color:#666">]</span>&gt; keys *
1<span style="color:#666">)</span> <span style="color:#b44">&#34;age&#34;</span>
127.0.0.1:6379<span style="color:#666">[</span>1<span style="color:#666">]</span>&gt; del age <span style="color:#080;font-style:italic"># 删除键值对</span>
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">1</span> <span style="color:#080;font-style:italic"># 删除个数</span>


127.0.0.1:6379&gt; <span style="color:#a2f">set</span> age <span style="color:#666">20</span>
OK
127.0.0.1:6379&gt; EXPIRE age <span style="color:#666">15</span> <span style="color:#080;font-style:italic"># 设置键值对的过期时间</span>
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">1</span> <span style="color:#080;font-style:italic"># 设置成功，开始计数</span>
127.0.0.1:6379&gt; ttl age	<span style="color:#080;font-style:italic"># 查看key的过期剩余时间</span>
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">11</span>
127.0.0.1:6379&gt; ttl age
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">6</span>
127.0.0.1:6379&gt; ttl age
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">3</span>
127.0.0.1:6379&gt; ttl age
<span style="color:#666">(</span>integer<span style="color:#666">)</span> -2	<span style="color:#080;font-style:italic"># -2 表示key过期， -1表示key未设置过期时间</span>
127.0.0.1:6379&gt; get age <span style="color:#080;font-style:italic"># 过期的key 会被自动delete</span>
<span style="color:#666">(</span>nil<span style="color:#666">)</span>
127.0.0.1:6379&gt; keys *
1<span style="color:#666">)</span> <span style="color:#b44">&#34;name&#34;</span>
127.0.0.1:6379&gt; <span style="color:#a2f">type</span> name <span style="color:#080;font-style:italic"># 查看value的数据类型</span>
string
</code></pre></td></tr></table>
</div>
</div><p>关于<code>TTL</code>命令</p>
<p>Redis的key，通过TTL命令返回key的过期时间，一般来说有3种:</p>
<ol>
<li>当前key==没有设置过期时间，所以会返回-1==</li>
<li>当前key有设置过期时间，而且==key已经过期，所以会返回-2==</li>
<li>当前key有==设置过期时间，而且key还没有过期，故会返回key的正常剩余时间==</li>
</ol>
<p>关于重命名<code>RENAME</code>和<code>RENAMENX</code></p>
<ul>
<li><code>RENAME key newkey</code>修改key的名称</li>
<li><code>RENAMENX key newkey</code>仅当newkey不存在时，将key改名为newkey</li>
</ul>
<p>更多命令学习：https://www.redis.net.cn/order/</p>
<p><img src="https://gitee.com/aszh/Gitee-Pages/raw/master/img/20210615101154.png" alt="image-20210615101153556"></p>
<h3 id="string字符串">String(字符串)</h3>
<p>普通的set、get直接略过</p>
<table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
<th>示例</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>APPEND key value</code></td>
<td>向指定的key的value后追加字符串</td>
<td>127.0.0.1:6379&gt; set msg hello 127.0.0.1:6379&gt; append msg &ldquo;world&rdquo;  127.0.0.1:6379&gt; get msg</td>
</tr>
<tr>
<td><code>DECR/INCR key</code></td>
<td>将指定key的value数值进行+1/-1(仅对于数字)</td>
<td>127.0.0.1:6379&gt; set age 20<!-- raw HTML omitted -->OK<!-- raw HTML omitted -->127.0.0.1:6379&gt; incr age<!-- raw HTML omitted -->(integer) 21<!-- raw HTML omitted -->127.0.0.1:6379&gt; decr age<!-- raw HTML omitted -->(integer) 20</td>
</tr>
<tr>
<td><code>INCRBY/DECRBY key n</code></td>
<td>按指定的步长对数值进行加减</td>
<td>127.0.0.1:6379&gt; INCRBY age 5<!-- raw HTML omitted -->(integer) 25<!-- raw HTML omitted -->127.0.0.1:6379&gt; DECRBY age 10<!-- raw HTML omitted -->(integer) 15</td>
</tr>
<tr>
<td><code>INCRBYFLOAT key n</code></td>
<td>为数值加上浮点型数值</td>
<td>127.0.0.1:6379&gt; INCRBYFLOAT age 5.2<!-- raw HTML omitted -->&quot;20.2&rdquo;</td>
</tr>
<tr>
<td><code>STRLEN key</code></td>
<td>获取key保存值的字符串长度</td>
<td>127.0.0.1:6379&gt; get msg<!-- raw HTML omitted -->&quot;helloworld&quot;<!-- raw HTML omitted -->127.0.0.1:6379&gt; STRLEN msg<!-- raw HTML omitted -->(integer) 10</td>
</tr>
<tr>
<td><code>GETRANGE key start end</code></td>
<td>按起止位置获取字符串（闭区间，起止位置都取）</td>
<td>127.0.0.1:6379&gt; get msg<!-- raw HTML omitted -->&quot;helloworld&quot;<!-- raw HTML omitted -->127.0.0.1:6379&gt; GETRANGE msg 3 9<!-- raw HTML omitted -->&quot;loworld&rdquo;</td>
</tr>
<tr>
<td><code>SETRANGE key offset value</code></td>
<td>用指定的value 替换key中 offset开始的值</td>
<td>127.0.0.1:6379&gt; get msg<!-- raw HTML omitted -->&quot;helloworld&quot;<!-- raw HTML omitted -->127.0.0.1:6379&gt; SETRANGE msg 2 hello<!-- raw HTML omitted -->(integer) 10<!-- raw HTML omitted -->127.0.0.1:6379&gt; get msg<!-- raw HTML omitted -->&quot;hehellorld&rdquo;</td>
</tr>
<tr>
<td><code>GETSET key value</code></td>
<td>将给定 key 的值设为 value ，并返回 key 的旧值(old value)。</td>
<td>127.0.0.1:6379&gt; GETSET msg test<!-- raw HTML omitted -->&quot;hehellorld&rdquo;</td>
</tr>
<tr>
<td><code>SETNX key value</code></td>
<td>仅当key不存在时进行set</td>
<td>127.0.0.1:6379&gt; SETNX msg test<!-- raw HTML omitted -->(integer) 0<!-- raw HTML omitted -->127.0.0.1:6379&gt; SETNX names sakura<!-- raw HTML omitted -->(integer) 1</td>
</tr>
<tr>
<td><code>SETEX key seconds value</code></td>
<td>set 键值对并设置过期时间</td>
<td>127.0.0.1:6379&gt; SETEX name 10 root<!-- raw HTML omitted -->OK<!-- raw HTML omitted -->127.0.0.1:6379&gt; get name<!-- raw HTML omitted -->(nil)</td>
</tr>
<tr>
<td><code>MSET key1 value1 [key2 value2..]</code></td>
<td>批量set键值对</td>
<td>127.0.0.1:6379&gt; MSET k1 v1 k2 v2 k3 v3 <!-- raw HTML omitted -->OK</td>
</tr>
<tr>
<td><code>MSETNX key1 value1 [key2 value2..]</code></td>
<td>批量设置键值对，仅当参数中所有的key都不存在时执行</td>
<td>127.0.0.1:6379&gt; MSETNX k1 v1 k4 v4<!-- raw HTML omitted -->(integer) 0</td>
</tr>
<tr>
<td><code>MGET key1 [key2..]</code></td>
<td>批量获取多个key保存的值</td>
<td>127.0.0.1:6379&gt; MGET k1 k2 k3<!-- raw HTML omitted -->1) &ldquo;v1&quot;<!-- raw HTML omitted -->2) &ldquo;v2&quot;<!-- raw HTML omitted -->3) &ldquo;v3&rdquo;</td>
</tr>
<tr>
<td><code>PSETEX key milliseconds value</code></td>
<td>和 SETEX 命令相似，但它以毫秒为单位设置 key 的生存时间，</td>
<td></td>
</tr>
<tr>
<td><code>getset key value</code></td>
<td>如果不存在值，则返回nil，如果存在值，获取原来的值，并设置新的值</td>
<td></td>
</tr>
</tbody>
</table>
<p>String类似的使用场景：value除了是字符串还可以是数字，用途举例：</p>
<ul>
<li>计数器</li>
<li>统计多单位的数量：uid:123666：follow 0</li>
<li>粉丝数</li>
<li>对象存储缓存</li>
</ul>
<h3 id="list列表">List（列表）</h3>
<blockquote>
<p>Redis列表是简单的字符串列表，按照插入顺序排序。你可以添加一个元素到列表的头部（左边）或者尾部（右边）</p>
<p>一个列表最多可以包含 232 - 1 个元素 (4294967295, 每个列表超过40亿个元素)。</p>
</blockquote>
<p>首先我们列表，可以经过规则定义将其变为队列、栈、双端队列等</p>
<p><img src="https://gitee.com/aszh/Gitee-Pages/raw/master/img/20210615105311" alt=" Redis.assets/image-20200813114255459.png)"></p>
<p>正如图==Redis中List是可以进行双端操作的，所以命令也就分为了LXXX和RLLL两类==，有时候L也表示List例如LLEN</p>
<table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>LPUSH/RPUSH key value1[value2..]</td>
<td>从左边/右边向列表中PUSH值(一个或者多个)。</td>
</tr>
<tr>
<td>LRANGE key start end</td>
<td>获取list 起止元素==（索引从左往右 递增）==</td>
</tr>
<tr>
<td>LPUSHX/RPUSHX key value</td>
<td>向已存在的列名中push值（一个或者多个）</td>
</tr>
<tr>
<td>LINSERT key BEFORE|AFTER pivot value</td>
<td>在指定列表元素的前/后 插入value</td>
</tr>
<tr>
<td>LLEN key</td>
<td>查看列表长度</td>
</tr>
<tr>
<td>LINDEX key index</td>
<td>通过索引获取列表元素</td>
</tr>
<tr>
<td>LSET key index value</td>
<td>通过索引为元素设值</td>
</tr>
<tr>
<td>LPOP/RPOP key</td>
<td>从最左边/最右边移除值 并返回</td>
</tr>
<tr>
<td>RPOPLPUSH source destination</td>
<td>将列表的尾部(右)最后一个值弹出，并返回，然后加到另一个列表的头部</td>
</tr>
<tr>
<td>LTRIM key start end</td>
<td>通过下标截取指定范围内的列表</td>
</tr>
<tr>
<td>LREM key count value</td>
<td>List中是允许value重复的 <code>count &gt; 0</code>：从头部开始搜索 然后删除指定的value 至多删除count个 <code>count &lt; 0</code>：从尾部开始搜索… <code>count = 0</code>：删除列表中所有的指定value。</td>
</tr>
<tr>
<td>BLPOP/BRPOP key1[key2] timout</td>
<td>移出并获取列表的第一个/最后一个元素， 如果列表没有元素会阻塞列表直到等待超时或发现可弹出元素为止。</td>
</tr>
<tr>
<td>BRPOPLPUSH source destination timeout</td>
<td>和<code>RPOPLPUSH</code>功能相同，如果列表没有元素会阻塞列表直到等待超时或发现可弹出元素为止。</td>
</tr>
</tbody>
</table>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 71
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 72
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 73
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 74
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 75
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 76
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 77
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 78
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 79
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 80
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 81
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 82
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 83
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 84
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 85
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 86
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 87
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 88
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 89
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 90
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 91
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 92
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 93
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 94
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 95
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 96
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 97
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 98
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 99
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">100
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">101
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">102
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">103
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">104
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">105
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">106
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">107
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">108
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">109
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">110
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">111
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">112
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">113
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">114
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">115
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">116
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">117
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">118
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">119
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">120
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">121
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">122
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">123
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">124
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">125
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">126
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">127
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">128
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">129
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">---------------------------LPUSH---RPUSH---LRANGE--------------------------------

127.0.0.1:6379&gt; LPUSH mylist k1 <span style="color:#080;font-style:italic"># LPUSH mylist=&gt;{1}</span>
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">1</span>
127.0.0.1:6379&gt; LPUSH mylist k2 <span style="color:#080;font-style:italic"># LPUSH mylist=&gt;{2,1}</span>
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">2</span>
127.0.0.1:6379&gt; RPUSH mylist k3 <span style="color:#080;font-style:italic"># RPUSH mylist=&gt;{2,1,3}</span>
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">3</span>
127.0.0.1:6379&gt; get mylist <span style="color:#080;font-style:italic"># 普通的get是无法获取list值的</span>
<span style="color:#666">(</span>error<span style="color:#666">)</span> WRONGTYPE Operation against a key holding the wrong kind of value
127.0.0.1:6379&gt; LRANGE mylist <span style="color:#666">0</span> <span style="color:#666">4</span> <span style="color:#080;font-style:italic"># LRANGE 获取起止位置范围内的元素</span>
1<span style="color:#666">)</span> <span style="color:#b44">&#34;k2&#34;</span>
2<span style="color:#666">)</span> <span style="color:#b44">&#34;k1&#34;</span>
3<span style="color:#666">)</span> <span style="color:#b44">&#34;k3&#34;</span>
127.0.0.1:6379&gt; LRANGE mylist <span style="color:#666">0</span> <span style="color:#666">2</span>
1<span style="color:#666">)</span> <span style="color:#b44">&#34;k2&#34;</span>
2<span style="color:#666">)</span> <span style="color:#b44">&#34;k1&#34;</span>
3<span style="color:#666">)</span> <span style="color:#b44">&#34;k3&#34;</span>
127.0.0.1:6379&gt; LRANGE mylist <span style="color:#666">0</span> <span style="color:#666">1</span>
1<span style="color:#666">)</span> <span style="color:#b44">&#34;k2&#34;</span>
2<span style="color:#666">)</span> <span style="color:#b44">&#34;k1&#34;</span>
127.0.0.1:6379&gt; LRANGE mylist <span style="color:#666">0</span> -1 <span style="color:#080;font-style:italic"># 获取全部元素</span>
1<span style="color:#666">)</span> <span style="color:#b44">&#34;k2&#34;</span>
2<span style="color:#666">)</span> <span style="color:#b44">&#34;k1&#34;</span>
3<span style="color:#666">)</span> <span style="color:#b44">&#34;k3&#34;</span>

---------------------------LPUSHX---RPUSHX-----------------------------------

127.0.0.1:6379&gt; LPUSHX list v1 <span style="color:#080;font-style:italic"># list不存在 LPUSHX失败</span>
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">0</span>
127.0.0.1:6379&gt; LPUSHX list v1 v2  
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">0</span>
127.0.0.1:6379&gt; LPUSHX mylist k4 k5 <span style="color:#080;font-style:italic"># 向mylist中 左边 PUSH k4 k5</span>
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">5</span>
127.0.0.1:6379&gt; LRANGE mylist <span style="color:#666">0</span> -1
1<span style="color:#666">)</span> <span style="color:#b44">&#34;k5&#34;</span>
2<span style="color:#666">)</span> <span style="color:#b44">&#34;k4&#34;</span>
3<span style="color:#666">)</span> <span style="color:#b44">&#34;k2&#34;</span>
4<span style="color:#666">)</span> <span style="color:#b44">&#34;k1&#34;</span>
5<span style="color:#666">)</span> <span style="color:#b44">&#34;k3&#34;</span>

---------------------------LINSERT--LLEN--LINDEX--LSET----------------------------

127.0.0.1:6379&gt; LINSERT mylist after k2 ins_key1 <span style="color:#080;font-style:italic"># 在k2元素后 插入ins_key1</span>
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">6</span>
127.0.0.1:6379&gt; LRANGE mylist <span style="color:#666">0</span> -1
1<span style="color:#666">)</span> <span style="color:#b44">&#34;k5&#34;</span>
2<span style="color:#666">)</span> <span style="color:#b44">&#34;k4&#34;</span>
3<span style="color:#666">)</span> <span style="color:#b44">&#34;k2&#34;</span>
4<span style="color:#666">)</span> <span style="color:#b44">&#34;ins_key1&#34;</span>
5<span style="color:#666">)</span> <span style="color:#b44">&#34;k1&#34;</span>
6<span style="color:#666">)</span> <span style="color:#b44">&#34;k3&#34;</span>
127.0.0.1:6379&gt; LLEN mylist <span style="color:#080;font-style:italic"># 查看mylist的长度</span>
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">6</span>
127.0.0.1:6379&gt; LINDEX mylist <span style="color:#666">3</span> <span style="color:#080;font-style:italic"># 获取下标为3的元素</span>
<span style="color:#b44">&#34;ins_key1&#34;</span>
127.0.0.1:6379&gt; LINDEX mylist <span style="color:#666">0</span>
<span style="color:#b44">&#34;k5&#34;</span>
127.0.0.1:6379&gt; LSET mylist <span style="color:#666">3</span> k6 <span style="color:#080;font-style:italic"># 将下标3的元素 set值为k6</span>
OK
127.0.0.1:6379&gt; LRANGE mylist <span style="color:#666">0</span> -1
1<span style="color:#666">)</span> <span style="color:#b44">&#34;k5&#34;</span>
2<span style="color:#666">)</span> <span style="color:#b44">&#34;k4&#34;</span>
3<span style="color:#666">)</span> <span style="color:#b44">&#34;k2&#34;</span>
4<span style="color:#666">)</span> <span style="color:#b44">&#34;k6&#34;</span>
5<span style="color:#666">)</span> <span style="color:#b44">&#34;k1&#34;</span>
6<span style="color:#666">)</span> <span style="color:#b44">&#34;k3&#34;</span>

---------------------------LPOP--RPOP--------------------------

127.0.0.1:6379&gt; LPOP mylist <span style="color:#080;font-style:italic"># 左侧(头部)弹出</span>
<span style="color:#b44">&#34;k5&#34;</span>
127.0.0.1:6379&gt; RPOP mylist <span style="color:#080;font-style:italic"># 右侧(尾部)弹出</span>
<span style="color:#b44">&#34;k3&#34;</span>

---------------------------RPOPLPUSH--------------------------

127.0.0.1:6379&gt; LRANGE mylist <span style="color:#666">0</span> -1
1<span style="color:#666">)</span> <span style="color:#b44">&#34;k4&#34;</span>
2<span style="color:#666">)</span> <span style="color:#b44">&#34;k2&#34;</span>
3<span style="color:#666">)</span> <span style="color:#b44">&#34;k6&#34;</span>
4<span style="color:#666">)</span> <span style="color:#b44">&#34;k1&#34;</span>
127.0.0.1:6379&gt; RPOPLPUSH mylist newlist <span style="color:#080;font-style:italic"># 将mylist的最后一个值(k1)弹出，加入到newlist的头部</span>
<span style="color:#b44">&#34;k1&#34;</span>
127.0.0.1:6379&gt; LRANGE newlist <span style="color:#666">0</span> -1
1<span style="color:#666">)</span> <span style="color:#b44">&#34;k1&#34;</span>
127.0.0.1:6379&gt; LRANGE mylist <span style="color:#666">0</span> -1
1<span style="color:#666">)</span> <span style="color:#b44">&#34;k4&#34;</span>
2<span style="color:#666">)</span> <span style="color:#b44">&#34;k2&#34;</span>
3<span style="color:#666">)</span> <span style="color:#b44">&#34;k6&#34;</span>

---------------------------LTRIM--------------------------

127.0.0.1:6379&gt; LTRIM mylist <span style="color:#666">0</span> <span style="color:#666">1</span> <span style="color:#080;font-style:italic"># 截取mylist中的 0~1部分</span>
OK
127.0.0.1:6379&gt; LRANGE mylist <span style="color:#666">0</span> -1
1<span style="color:#666">)</span> <span style="color:#b44">&#34;k4&#34;</span>
2<span style="color:#666">)</span> <span style="color:#b44">&#34;k2&#34;</span>

<span style="color:#080;font-style:italic"># 初始 mylist: k2,k2,k2,k2,k2,k2,k4,k2,k2,k2,k2</span>
---------------------------LREM--------------------------

127.0.0.1:6379&gt; LREM mylist <span style="color:#666">3</span> k2 <span style="color:#080;font-style:italic"># 从头部开始搜索 至多删除3个 k2</span>
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">3</span>
<span style="color:#080;font-style:italic"># 删除后：mylist: k2,k2,k2,k4,k2,k2,k2,k2</span>

127.0.0.1:6379&gt; LREM mylist -2 k2 <span style="color:#080;font-style:italic">#从尾部开始搜索 至多删除2个 k2</span>
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">2</span>
<span style="color:#080;font-style:italic"># 删除后：mylist: k2,k2,k2,k4,k2,k2</span>


---------------------------BLPOP--BRPOP--------------------------

mylist: k2,k2,k2,k4,k2,k2
newlist: k1

127.0.0.1:6379&gt; BLPOP newlist mylist <span style="color:#666">30</span> <span style="color:#080;font-style:italic"># 从newlist中弹出第一个值，mylist作为候选</span>
1<span style="color:#666">)</span> <span style="color:#b44">&#34;newlist&#34;</span> <span style="color:#080;font-style:italic"># 弹出</span>
2<span style="color:#666">)</span> <span style="color:#b44">&#34;k1&#34;</span>
127.0.0.1:6379&gt; BLPOP newlist mylist <span style="color:#666">30</span>
1<span style="color:#666">)</span> <span style="color:#b44">&#34;mylist&#34;</span> <span style="color:#080;font-style:italic"># 由于newlist空了 从mylist中弹出</span>
2<span style="color:#666">)</span> <span style="color:#b44">&#34;k2&#34;</span>
127.0.0.1:6379&gt; BLPOP newlist <span style="color:#666">30</span>
<span style="color:#666">(</span>30.10s<span style="color:#666">)</span> <span style="color:#080;font-style:italic"># 超时了</span>

127.0.0.1:6379&gt; BLPOP newlist <span style="color:#666">30</span> <span style="color:#080;font-style:italic"># 我们连接另一个客户端向newlist中push了test, 阻塞被解决。</span>
1<span style="color:#666">)</span> <span style="color:#b44">&#34;newlist&#34;</span>
2<span style="color:#666">)</span> <span style="color:#b44">&#34;test&#34;</span>
<span style="color:#666">(</span>12.54s<span style="color:#666">)</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>小结</p>
</blockquote>
<ul>
<li>list实际上是一个链表，before Node after , left, right 都可以插入值</li>
<li><strong>如果key不存在，则创建新的链表</strong></li>
<li>如果key存在，新增内容</li>
<li>如果移除了所有值，空链表，也代表不存在</li>
<li>在两边插入或者改动值，效率最高！修改中间元素，效率相对较低</li>
</ul>
<p><strong>应用：</strong></p>
<p><strong>消息排队！消息队列（Lpush Rpop）,栈（Lpush Lpop）</strong></p>
<h3 id="set集合">Set(集合)</h3>
<blockquote>
<p>Redis的Set是<strong>string类型</strong>的==无序集合==。集合成员是唯一的，这就意味着集合中不能出现重复的数据。</p>
<p>Redis 中 集合是通过==哈希表==实现的，所以添加，删除，查找的复杂度都是O(1)。</p>
<p>集合中最大的成员数为 232 - 1 (4294967295, 每个集合可存储40多亿个成员)。</p>
</blockquote>
<table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>SADD key member1[member2..]</code></td>
<td>向集合中无序增加一个/多个成员</td>
</tr>
<tr>
<td><code>SCARD key</code></td>
<td>获取集合的成员数</td>
</tr>
<tr>
<td><code>SMEMBERS key</code></td>
<td>返回集合中所有的成员</td>
</tr>
<tr>
<td><code>SISMEMBER key member</code></td>
<td>查询member元素是否是集合的成员,结果是无序的</td>
</tr>
<tr>
<td><code>SRANDMEMBER key [count]</code></td>
<td>随机返回集合中count个成员，count缺省值为1</td>
</tr>
<tr>
<td><code>SPOP key [count]</code></td>
<td>随机移除并返回集合中count个成员，count缺省值为1</td>
</tr>
<tr>
<td><code>SMOVE source destination member</code></td>
<td>将source集合的成员member移动到destination集合</td>
</tr>
<tr>
<td><code>SREM key member1[member2..]</code></td>
<td>移除集合中一个/多个成员</td>
</tr>
<tr>
<td><code>SDIFF key1[key2..]</code></td>
<td>返回所有集合的差集 key1- key2 - …</td>
</tr>
<tr>
<td><code>SDIFFSTORE destination key1[key2..]</code></td>
<td>在SDIFF的基础上，将结果保存到集合中==(覆盖)==。不能保存到其他类型key噢！</td>
</tr>
<tr>
<td><code>SINTER key1 [key2..]</code></td>
<td>返回所有集合的交集</td>
</tr>
<tr>
<td><code>SINTERSTORE destination key1[key2..]</code></td>
<td>在SINTER的基础上，存储结果到集合中。覆盖</td>
</tr>
<tr>
<td><code>SUNION key1 [key2..]</code></td>
<td>返回所有集合的并集</td>
</tr>
<tr>
<td><code>SUNIONSTORE destination key1 [key2..]</code></td>
<td>在SUNION的基础上，存储结果到及和张。覆盖</td>
</tr>
<tr>
<td><code>SSCAN KEY [MATCH pattern] [COUNT count]</code></td>
<td>在大量数据环境下，使用此命令遍历集合中元素，每次遍历部分</td>
</tr>
</tbody>
</table>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">71
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">72
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">73
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">74
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">75
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">76
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">77
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">78
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">79
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">80
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">81
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">82
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">83
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">84
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">85
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">---------------SADD--SCARD--SMEMBERS--SISMEMBER--------------------

127.0.0.1:6379&gt; SADD myset m1 m2 m3 m4 <span style="color:#080;font-style:italic"># 向myset中增加成员 m1~m4</span>
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">4</span>
127.0.0.1:6379&gt; SCARD myset <span style="color:#080;font-style:italic"># 获取集合的成员数目</span>
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">4</span>
127.0.0.1:6379&gt; smembers myset <span style="color:#080;font-style:italic"># 获取集合中所有成员</span>
1<span style="color:#666">)</span> <span style="color:#b44">&#34;m4&#34;</span>
2<span style="color:#666">)</span> <span style="color:#b44">&#34;m3&#34;</span>
3<span style="color:#666">)</span> <span style="color:#b44">&#34;m2&#34;</span>
4<span style="color:#666">)</span> <span style="color:#b44">&#34;m1&#34;</span>
127.0.0.1:6379&gt; SISMEMBER myset m5 <span style="color:#080;font-style:italic"># 查询m5是否是myset的成员</span>
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">0</span> <span style="color:#080;font-style:italic"># 不是，返回0</span>
127.0.0.1:6379&gt; SISMEMBER myset m2
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">1</span> <span style="color:#080;font-style:italic"># 是，返回1</span>
127.0.0.1:6379&gt; SISMEMBER myset m3
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">1</span>

---------------------SRANDMEMBER--SPOP----------------------------------

127.0.0.1:6379&gt; SRANDMEMBER myset <span style="color:#666">3</span> <span style="color:#080;font-style:italic"># 随机返回3个成员</span>
1<span style="color:#666">)</span> <span style="color:#b44">&#34;m2&#34;</span>
2<span style="color:#666">)</span> <span style="color:#b44">&#34;m3&#34;</span>
3<span style="color:#666">)</span> <span style="color:#b44">&#34;m4&#34;</span>
127.0.0.1:6379&gt; SRANDMEMBER myset <span style="color:#080;font-style:italic"># 随机返回1个成员</span>
<span style="color:#b44">&#34;m3&#34;</span>
127.0.0.1:6379&gt; SPOP myset <span style="color:#666">2</span> <span style="color:#080;font-style:italic"># 随机移除并返回2个成员</span>
1<span style="color:#666">)</span> <span style="color:#b44">&#34;m1&#34;</span>
2<span style="color:#666">)</span> <span style="color:#b44">&#34;m4&#34;</span>
<span style="color:#080;font-style:italic"># 将set还原到{m1,m2,m3,m4}</span>

---------------------SMOVE--SREM----------------------------------------

127.0.0.1:6379&gt; SMOVE myset newset m3 <span style="color:#080;font-style:italic"># 将myset中m3成员移动到newset集合</span>
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">1</span>
127.0.0.1:6379&gt; SMEMBERS myset
1<span style="color:#666">)</span> <span style="color:#b44">&#34;m4&#34;</span>
2<span style="color:#666">)</span> <span style="color:#b44">&#34;m2&#34;</span>
3<span style="color:#666">)</span> <span style="color:#b44">&#34;m1&#34;</span>
127.0.0.1:6379&gt; SMEMBERS newset
1<span style="color:#666">)</span> <span style="color:#b44">&#34;m3&#34;</span>
127.0.0.1:6379&gt; SREM newset m3 <span style="color:#080;font-style:italic"># 从newset中移除m3元素</span>
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">1</span>
127.0.0.1:6379&gt; SMEMBERS newset
<span style="color:#666">(</span>empty list or <span style="color:#a2f">set</span><span style="color:#666">)</span>

<span style="color:#080;font-style:italic"># 下面开始是多集合操作,多集合操作中若只有一个参数默认和自身进行运算</span>
<span style="color:#080;font-style:italic"># setx=&gt;{m1,m2,m4,m6}, sety=&gt;{m2,m5,m6}, setz=&gt;{m1,m3,m6}</span>

-----------------------------SDIFF------------------------------------

127.0.0.1:6379&gt; SDIFF setx sety setz <span style="color:#080;font-style:italic"># 等价于setx-sety-setz</span>
1<span style="color:#666">)</span> <span style="color:#b44">&#34;m4&#34;</span>
127.0.0.1:6379&gt; SDIFF setx sety <span style="color:#080;font-style:italic"># setx - sety</span>
1<span style="color:#666">)</span> <span style="color:#b44">&#34;m4&#34;</span>
2<span style="color:#666">)</span> <span style="color:#b44">&#34;m1&#34;</span>
127.0.0.1:6379&gt; SDIFF sety setx <span style="color:#080;font-style:italic"># sety - setx</span>
1<span style="color:#666">)</span> <span style="color:#b44">&#34;m5&#34;</span>


-------------------------SINTER---------------------------------------
<span style="color:#080;font-style:italic"># 共同关注（交集）</span>

127.0.0.1:6379&gt; SINTER setx sety setz <span style="color:#080;font-style:italic"># 求 setx、sety、setx的交集</span>
1<span style="color:#666">)</span> <span style="color:#b44">&#34;m6&#34;</span>
127.0.0.1:6379&gt; SINTER setx sety <span style="color:#080;font-style:italic"># 求setx sety的交集</span>
1<span style="color:#666">)</span> <span style="color:#b44">&#34;m2&#34;</span>
2<span style="color:#666">)</span> <span style="color:#b44">&#34;m6&#34;</span>

-------------------------SUNION---------------------------------------

127.0.0.1:6379&gt; SUNION setx sety setz <span style="color:#080;font-style:italic"># setx sety setz的并集</span>
1<span style="color:#666">)</span> <span style="color:#b44">&#34;m4&#34;</span>
2<span style="color:#666">)</span> <span style="color:#b44">&#34;m6&#34;</span>
3<span style="color:#666">)</span> <span style="color:#b44">&#34;m3&#34;</span>
4<span style="color:#666">)</span> <span style="color:#b44">&#34;m2&#34;</span>
5<span style="color:#666">)</span> <span style="color:#b44">&#34;m1&#34;</span>
6<span style="color:#666">)</span> <span style="color:#b44">&#34;m5&#34;</span>
127.0.0.1:6379&gt; SUNION setx sety <span style="color:#080;font-style:italic"># setx sety 并集</span>
1<span style="color:#666">)</span> <span style="color:#b44">&#34;m4&#34;</span>
2<span style="color:#666">)</span> <span style="color:#b44">&#34;m6&#34;</span>
3<span style="color:#666">)</span> <span style="color:#b44">&#34;m2&#34;</span>
4<span style="color:#666">)</span> <span style="color:#b44">&#34;m1&#34;</span>
5<span style="color:#666">)</span> <span style="color:#b44">&#34;m5&#34;</span>

</code></pre></td></tr></table>
</div>
</div><h3 id="hash哈希">Hash(哈希)</h3>
<blockquote>
<p>Redis hash 是一个string类型的field和value的映射表，==hash特别适合用于存储对象==。</p>
<p>Set就是一种简化的Hash,只变动key,而value使用默认值填充。可以将一个Hash表作为一个对象进行存储，表中存放对象的信息。</p>
</blockquote>
<table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>HSET key field value</code></td>
<td>将哈希表 key 中的字段 field 的值设为 value 。重复设置同一个field会覆盖,返回0</td>
</tr>
<tr>
<td><code>HMSET key field1 value1 [field2 value2..]</code></td>
<td>同时将多个 field-value (域-值)对设置到哈希表 key 中。</td>
</tr>
<tr>
<td><code>HSETNX key field value</code></td>
<td>只有在字段 field 不存在时，设置哈希表字段的值。</td>
</tr>
<tr>
<td><code>HEXISTS key field</code></td>
<td>查看哈希表 key 中，指定的字段是否存在。</td>
</tr>
<tr>
<td><code>HGET key field value</code></td>
<td>获取存储在哈希表中指定字段的值</td>
</tr>
<tr>
<td><code>HMGET key field1 [field2..]</code></td>
<td>获取所有给定字段的值</td>
</tr>
<tr>
<td><code>HGETALL key</code></td>
<td>获取在哈希表key 的所有字段和值</td>
</tr>
<tr>
<td><code>HKEYS key</code></td>
<td>获取哈希表key中所有的字段</td>
</tr>
<tr>
<td><code>HLEN key</code></td>
<td>获取哈希表中字段的数量</td>
</tr>
<tr>
<td><code>HVALS key</code></td>
<td>获取哈希表中所有值</td>
</tr>
<tr>
<td><code>HDEL key field1 [field2..]</code></td>
<td>删除哈希表key中一个/多个field字段</td>
</tr>
<tr>
<td><code>HINCRBY key field n</code></td>
<td>为哈希表 key 中的指定字段的整数值加上增量n，并返回增量后结果 一样只适用于整数型字段</td>
</tr>
<tr>
<td><code>HINCRBYFLOAT key field n</code></td>
<td>为哈希表 key 中的指定字段的浮点数值加上增量 n。</td>
</tr>
<tr>
<td><code>HSCAN key cursor [MATCH pattern] [COUNT count]</code></td>
<td>迭代哈希表中的键值对。</td>
</tr>
</tbody>
</table>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">71
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">------------------------HSET--HMSET--HSETNX----------------
127.0.0.1:6379&gt; HSET studentx name sakura <span style="color:#080;font-style:italic"># 将studentx哈希表作为一个对象，设置name为sakura</span>
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">1</span>
127.0.0.1:6379&gt; HSET studentx name gyc <span style="color:#080;font-style:italic"># 重复设置field进行覆盖，并返回0</span>
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">0</span>
127.0.0.1:6379&gt; HSET studentx age <span style="color:#666">20</span> <span style="color:#080;font-style:italic"># 设置studentx的age为20</span>
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">1</span>
127.0.0.1:6379&gt; HMSET studentx sex <span style="color:#666">1</span> tel <span style="color:#666">15623667886</span> <span style="color:#080;font-style:italic"># 设置sex为1，tel为15623667886</span>
OK
127.0.0.1:6379&gt; HSETNX studentx name gyc <span style="color:#080;font-style:italic"># HSETNX 设置已存在的field</span>
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">0</span> <span style="color:#080;font-style:italic"># 失败</span>
127.0.0.1:6379&gt; HSETNX studentx email 12345@qq.com
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">1</span> <span style="color:#080;font-style:italic"># 成功</span>

----------------------HEXISTS--------------------------------
127.0.0.1:6379&gt; HEXISTS studentx name <span style="color:#080;font-style:italic"># name字段在studentx中是否存在</span>
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">1</span> <span style="color:#080;font-style:italic"># 存在</span>
127.0.0.1:6379&gt; HEXISTS studentx addr
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">0</span> <span style="color:#080;font-style:italic"># 不存在</span>

-------------------HGET--HMGET--HGETALL-----------
127.0.0.1:6379&gt; HGET studentx name <span style="color:#080;font-style:italic"># 获取studentx中name字段的value</span>
<span style="color:#b44">&#34;gyc&#34;</span>
127.0.0.1:6379&gt; HMGET studentx name age tel <span style="color:#080;font-style:italic"># 获取studentx中name、age、tel字段的value</span>
1<span style="color:#666">)</span> <span style="color:#b44">&#34;gyc&#34;</span>
2<span style="color:#666">)</span> <span style="color:#b44">&#34;20&#34;</span>
3<span style="color:#666">)</span> <span style="color:#b44">&#34;15623667886&#34;</span>
127.0.0.1:6379&gt; HGETALL studentx <span style="color:#080;font-style:italic"># 获取studentx中所有的field及其value</span>
 1<span style="color:#666">)</span> <span style="color:#b44">&#34;name&#34;</span>
 2<span style="color:#666">)</span> <span style="color:#b44">&#34;gyc&#34;</span>
 3<span style="color:#666">)</span> <span style="color:#b44">&#34;age&#34;</span>
 4<span style="color:#666">)</span> <span style="color:#b44">&#34;20&#34;</span>
 5<span style="color:#666">)</span> <span style="color:#b44">&#34;sex&#34;</span>
 6<span style="color:#666">)</span> <span style="color:#b44">&#34;1&#34;</span>
 7<span style="color:#666">)</span> <span style="color:#b44">&#34;tel&#34;</span>
 8<span style="color:#666">)</span> <span style="color:#b44">&#34;15623667886&#34;</span>
 9<span style="color:#666">)</span> <span style="color:#b44">&#34;email&#34;</span>
10<span style="color:#666">)</span> <span style="color:#b44">&#34;12345@qq.com&#34;</span>


--------------------HKEYS--HLEN--HVALS--------------
127.0.0.1:6379&gt; HKEYS studentx <span style="color:#080;font-style:italic"># 查看studentx中所有的field</span>
1<span style="color:#666">)</span> <span style="color:#b44">&#34;name&#34;</span>
2<span style="color:#666">)</span> <span style="color:#b44">&#34;age&#34;</span>
3<span style="color:#666">)</span> <span style="color:#b44">&#34;sex&#34;</span>
4<span style="color:#666">)</span> <span style="color:#b44">&#34;tel&#34;</span>
5<span style="color:#666">)</span> <span style="color:#b44">&#34;email&#34;</span>
127.0.0.1:6379&gt; HLEN studentx <span style="color:#080;font-style:italic"># 查看studentx中的字段数量</span>
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">5</span>
127.0.0.1:6379&gt; HVALS studentx <span style="color:#080;font-style:italic"># 查看studentx中所有的value</span>
1<span style="color:#666">)</span> <span style="color:#b44">&#34;gyc&#34;</span>
2<span style="color:#666">)</span> <span style="color:#b44">&#34;20&#34;</span>
3<span style="color:#666">)</span> <span style="color:#b44">&#34;1&#34;</span>
4<span style="color:#666">)</span> <span style="color:#b44">&#34;15623667886&#34;</span>
5<span style="color:#666">)</span> <span style="color:#b44">&#34;12345@qq.com&#34;</span>

-------------------------HDEL--------------------------
127.0.0.1:6379&gt; HDEL studentx sex tel <span style="color:#080;font-style:italic"># 删除studentx 中的sex、tel字段</span>
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">2</span>
127.0.0.1:6379&gt; HKEYS studentx
1<span style="color:#666">)</span> <span style="color:#b44">&#34;name&#34;</span>
2<span style="color:#666">)</span> <span style="color:#b44">&#34;age&#34;</span>
3<span style="color:#666">)</span> <span style="color:#b44">&#34;email&#34;</span>

-------------HINCRBY--HINCRBYFLOAT------------------------
127.0.0.1:6379&gt; HINCRBY studentx age <span style="color:#666">1</span> <span style="color:#080;font-style:italic"># studentx的age字段数值+1</span>
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">21</span>
127.0.0.1:6379&gt; HINCRBY studentx name <span style="color:#666">1</span> <span style="color:#080;font-style:italic"># 非整数字型字段不可用</span>
<span style="color:#666">(</span>error<span style="color:#666">)</span> ERR <span style="color:#a2f">hash</span> value is not an integer
127.0.0.1:6379&gt; HINCRBYFLOAT studentx weight 0.6 <span style="color:#080;font-style:italic"># weight字段增加0.6</span>
<span style="color:#b44">&#34;90.8&#34;</span>
</code></pre></td></tr></table>
</div>
</div><p>Hash变更的数据user name age，尤其是用户信息之类的，经常变动的信息！<strong>Hash更适合于对象的存储，Sring更加适合字符串存储！</strong></p>
<h3 id="zset有序集合">Zset(有序集合)</h3>
<blockquote>
<p>不同的是每个元素都会关联一个double类型的分数（score）。redis正是==通过分数来集合中的成员进行从小到大的排序==。</p>
<p>score相同：按字典顺序排序</p>
<p>有序集合的成员是唯一的，但分数（score）却是可以重复。</p>
</blockquote>
<table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ZADD key score member1 [score2 member2]</code></td>
<td>向有序集合添加一个或多个成员，或者更新已存在成员的分数</td>
</tr>
<tr>
<td><code>ZCARD key</code></td>
<td>获取有序集合的成员数</td>
</tr>
<tr>
<td><code>ZCOUNT key min max</code></td>
<td>计算在有序集合中指定区间score的成员数</td>
</tr>
<tr>
<td><code>ZINCRBY key n member</code></td>
<td>有序集合中对指定成员的分数加上增量 n</td>
</tr>
<tr>
<td><code>ZSCORE key member</code></td>
<td>返回有序集中，成员的分数值</td>
</tr>
<tr>
<td><code>ZRANK key member</code></td>
<td>返回有序集合中指定成员的索引</td>
</tr>
<tr>
<td><code>ZRANGE key start end</code></td>
<td>通过索引区间返回有序集合成指定区间内的成员</td>
</tr>
<tr>
<td><code>ZRANGEBYLEX key min max</code></td>
<td>通过字典区间返回有序集合的成员</td>
</tr>
<tr>
<td><code>ZRANGEBYSCORE key min max</code></td>
<td>通过分数返回有序集合指定区间内的成员==-inf 和 +inf分别表示最小最大值，只支持开区间()==</td>
</tr>
<tr>
<td><code>ZLEXCOUNT key min max</code></td>
<td>在有序集合中计算指定字典区间内成员数量</td>
</tr>
<tr>
<td><code>ZREM key member1 [member2..]</code></td>
<td>移除有序集合中一个/多个成员</td>
</tr>
<tr>
<td><code>ZREMRANGEBYLEX key min max</code></td>
<td>移除有序集合中给定的字典区间的所有成员</td>
</tr>
<tr>
<td><code>ZREMRANGEBYRANK key start stop</code></td>
<td>移除有序集合中给定的排名区间的所有成员</td>
</tr>
<tr>
<td><code>ZREMRANGEBYSCORE key min max</code></td>
<td>移除有序集合中给定的分数区间的所有成员</td>
</tr>
<tr>
<td><code>ZREVRANGE key start end</code></td>
<td>返回有序集中指定区间内的成员，通过索引，分数从高到底</td>
</tr>
<tr>
<td><code>ZREVRANGEBYSCORRE key max min</code></td>
<td>返回有序集中指定分数区间内的成员，分数从高到低排序</td>
</tr>
<tr>
<td><code>ZREVRANGEBYLEX key max min</code></td>
<td>返回有序集中指定字典区间内的成员，按字典顺序倒序</td>
</tr>
<tr>
<td><code>ZREVRANK key member</code></td>
<td>返回有序集合中指定成员的排名，有序集成员按分数值递减(从大到小)排序</td>
</tr>
<tr>
<td><code>ZINTERSTORE destination numkeys key1 [key2 ..]</code></td>
<td>计算给定的一个或多个有序集的交集并将结果集存储在新的有序集合 key 中，numkeys：表示参与运算的集合数，将score相加作为结果的score</td>
</tr>
<tr>
<td><code>ZUNIONSTORE destination numkeys key1 [key2..]</code></td>
<td>计算给定的一个或多个有序集的交集并将结果集存储在新的有序集合 key 中</td>
</tr>
<tr>
<td><code>ZSCAN key cursor [MATCH pattern\] [COUNT count]</code></td>
<td>迭代有序集合中的元素（包括元素成员和元素分值）</td>
</tr>
</tbody>
</table>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 71
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 72
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 73
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 74
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 75
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 76
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 77
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 78
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 79
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 80
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 81
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 82
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 83
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 84
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 85
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 86
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 87
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 88
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 89
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 90
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 91
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 92
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 93
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 94
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 95
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 96
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 97
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 98
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 99
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">100
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">101
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">102
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">103
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">104
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">105
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">106
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">107
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">108
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">109
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">110
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">111
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">112
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">113
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">114
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">115
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">116
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">117
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">118
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">119
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">120
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">121
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">122
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">123
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">124
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">125
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">126
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">127
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">128
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">129
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">130
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">131
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">132
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">133
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">134
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">135
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">136
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">-------------------ZADD--ZCARD--ZCOUNT--------------
127.0.0.1:6379&gt; ZADD myzset <span style="color:#666">1</span> m1 <span style="color:#666">2</span> m2 <span style="color:#666">3</span> m3 <span style="color:#080;font-style:italic"># 向有序集合myzset中添加成员m1 score=1 以及成员m2 score=2..</span>
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">2</span>
127.0.0.1:6379&gt; ZCARD myzset <span style="color:#080;font-style:italic"># 获取有序集合的成员数</span>
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">2</span>
127.0.0.1:6379&gt; ZCOUNT myzset <span style="color:#666">0</span> <span style="color:#666">1</span> <span style="color:#080;font-style:italic"># 获取score在 [0,1]区间的成员数量</span>
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">1</span>
127.0.0.1:6379&gt; ZCOUNT myzset <span style="color:#666">0</span> <span style="color:#666">2</span>
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">2</span>

----------------ZINCRBY--ZSCORE--------------------------
127.0.0.1:6379&gt; ZINCRBY myzset <span style="color:#666">5</span> m2 <span style="color:#080;font-style:italic"># 将成员m2的score +5</span>
<span style="color:#b44">&#34;7&#34;</span>
127.0.0.1:6379&gt; ZSCORE myzset m1 <span style="color:#080;font-style:italic"># 获取成员m1的score</span>
<span style="color:#b44">&#34;1&#34;</span>
127.0.0.1:6379&gt; ZSCORE myzset m2
<span style="color:#b44">&#34;7&#34;</span>

--------------ZRANK--ZRANGE-----------------------------------
127.0.0.1:6379&gt; ZRANK myzset m1 <span style="color:#080;font-style:italic"># 获取成员m1的索引，索引按照score排序，score相同索引值按字典顺序顺序增加</span>
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">0</span>
127.0.0.1:6379&gt; ZRANK myzset m2
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">2</span>
127.0.0.1:6379&gt; ZRANGE myzset <span style="color:#666">0</span> <span style="color:#666">1</span> <span style="color:#080;font-style:italic"># 获取索引在 0~1的成员</span>
1<span style="color:#666">)</span> <span style="color:#b44">&#34;m1&#34;</span>
2<span style="color:#666">)</span> <span style="color:#b44">&#34;m3&#34;</span>
127.0.0.1:6379&gt; ZRANGE myzset <span style="color:#666">0</span> -1 <span style="color:#080;font-style:italic"># 获取全部成员</span>
1<span style="color:#666">)</span> <span style="color:#b44">&#34;m1&#34;</span>
2<span style="color:#666">)</span> <span style="color:#b44">&#34;m3&#34;</span>
3<span style="color:#666">)</span> <span style="color:#b44">&#34;m2&#34;</span>

<span style="color:#080;font-style:italic">#testset=&gt;{abc,add,amaze,apple,back,java,redis} score均为0</span>
------------------ZRANGEBYLEX---------------------------------
127.0.0.1:6379&gt; ZRANGEBYLEX testset - +  <span style="color:#080;font-style:italic"># 返回所有成员</span>
1<span style="color:#666">)</span> <span style="color:#b44">&#34;abc&#34;</span>
2<span style="color:#666">)</span> <span style="color:#b44">&#34;add&#34;</span>
3<span style="color:#666">)</span> <span style="color:#b44">&#34;amaze&#34;</span>
4<span style="color:#666">)</span> <span style="color:#b44">&#34;apple&#34;</span>
5<span style="color:#666">)</span> <span style="color:#b44">&#34;back&#34;</span>
6<span style="color:#666">)</span> <span style="color:#b44">&#34;java&#34;</span>
7<span style="color:#666">)</span> <span style="color:#b44">&#34;redis&#34;</span>
127.0.0.1:6379&gt; ZRANGEBYLEX testset - + LIMIT <span style="color:#666">0</span> <span style="color:#666">3</span> <span style="color:#080;font-style:italic"># 分页 按索引显示查询结果的 0,1,2条记录</span>
1<span style="color:#666">)</span> <span style="color:#b44">&#34;abc&#34;</span>
2<span style="color:#666">)</span> <span style="color:#b44">&#34;add&#34;</span>
3<span style="color:#666">)</span> <span style="color:#b44">&#34;amaze&#34;</span>
127.0.0.1:6379&gt; ZRANGEBYLEX testset - + LIMIT <span style="color:#666">3</span> <span style="color:#666">3</span> <span style="color:#080;font-style:italic"># 显示 3,4,5条记录</span>
1<span style="color:#666">)</span> <span style="color:#b44">&#34;apple&#34;</span>
2<span style="color:#666">)</span> <span style="color:#b44">&#34;back&#34;</span>
3<span style="color:#666">)</span> <span style="color:#b44">&#34;java&#34;</span>
127.0.0.1:6379&gt; ZRANGEBYLEX testset <span style="color:#666">(</span>- <span style="color:#666">[</span>apple <span style="color:#080;font-style:italic"># 显示 (-,apple] 区间内的成员</span>
1<span style="color:#666">)</span> <span style="color:#b44">&#34;abc&#34;</span>
2<span style="color:#666">)</span> <span style="color:#b44">&#34;add&#34;</span>
3<span style="color:#666">)</span> <span style="color:#b44">&#34;amaze&#34;</span>
4<span style="color:#666">)</span> <span style="color:#b44">&#34;apple&#34;</span>
127.0.0.1:6379&gt; ZRANGEBYLEX testset <span style="color:#666">[</span>apple <span style="color:#666">[</span>java <span style="color:#080;font-style:italic"># 显示 [apple,java]字典区间的成员</span>
1<span style="color:#666">)</span> <span style="color:#b44">&#34;apple&#34;</span>
2<span style="color:#666">)</span> <span style="color:#b44">&#34;back&#34;</span>
3<span style="color:#666">)</span> <span style="color:#b44">&#34;java&#34;</span>

-----------------------ZRANGEBYSCORE---------------------
127.0.0.1:6379&gt; ZRANGEBYSCORE myzset <span style="color:#666">1</span> <span style="color:#666">10</span> <span style="color:#080;font-style:italic"># 返回score在 [1,10]之间的的成员</span>
1<span style="color:#666">)</span> <span style="color:#b44">&#34;m1&#34;</span>
2<span style="color:#666">)</span> <span style="color:#b44">&#34;m3&#34;</span>
3<span style="color:#666">)</span> <span style="color:#b44">&#34;m2&#34;</span>
127.0.0.1:6379&gt; ZRANGEBYSCORE myzset <span style="color:#666">1</span> <span style="color:#666">5</span>
1<span style="color:#666">)</span> <span style="color:#b44">&#34;m1&#34;</span>
2<span style="color:#666">)</span> <span style="color:#b44">&#34;m3&#34;</span>

--------------------ZLEXCOUNT-----------------------------
127.0.0.1:6379&gt; ZLEXCOUNT testset - +
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">7</span>
127.0.0.1:6379&gt; ZLEXCOUNT testset <span style="color:#666">[</span>apple <span style="color:#666">[</span>java
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">3</span>

------------------ZREM--ZREMRANGEBYLEX--ZREMRANGBYRANK--ZREMRANGEBYSCORE--------------------------------
127.0.0.1:6379&gt; ZREM testset abc <span style="color:#080;font-style:italic"># 移除成员abc</span>
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">1</span>
127.0.0.1:6379&gt; ZREMRANGEBYLEX testset <span style="color:#666">[</span>apple <span style="color:#666">[</span>java <span style="color:#080;font-style:italic"># 移除字典区间[apple,java]中的所有成员</span>
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">3</span>
127.0.0.1:6379&gt; ZREMRANGEBYRANK testset <span style="color:#666">0</span> <span style="color:#666">1</span> <span style="color:#080;font-style:italic"># 移除排名0~1的所有成员</span>
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">2</span>
127.0.0.1:6379&gt; ZREMRANGEBYSCORE myzset <span style="color:#666">0</span> <span style="color:#666">3</span> <span style="color:#080;font-style:italic"># 移除score在 [0,3]的成员</span>
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">2</span>


<span style="color:#080;font-style:italic"># testset=&gt; {abc,add,apple,amaze,back,java,redis} score均为0</span>
<span style="color:#080;font-style:italic"># myzset=&gt; {(m1,1),(m2,2),(m3,3),(m4,4),(m7,7),(m9,9)}</span>
----------------ZREVRANGE--ZREVRANGEBYSCORE--ZREVRANGEBYLEX-----------
127.0.0.1:6379&gt; ZREVRANGE myzset <span style="color:#666">0</span> <span style="color:#666">3</span> <span style="color:#080;font-style:italic"># 按score递减排序，然后按索引，返回结果的 0~3</span>
1<span style="color:#666">)</span> <span style="color:#b44">&#34;m9&#34;</span>
2<span style="color:#666">)</span> <span style="color:#b44">&#34;m7&#34;</span>
3<span style="color:#666">)</span> <span style="color:#b44">&#34;m4&#34;</span>
4<span style="color:#666">)</span> <span style="color:#b44">&#34;m3&#34;</span>
127.0.0.1:6379&gt; ZREVRANGE myzset <span style="color:#666">2</span> <span style="color:#666">4</span> <span style="color:#080;font-style:italic"># 返回排序结果的 索引的2~4</span>
1<span style="color:#666">)</span> <span style="color:#b44">&#34;m4&#34;</span>
2<span style="color:#666">)</span> <span style="color:#b44">&#34;m3&#34;</span>
3<span style="color:#666">)</span> <span style="color:#b44">&#34;m2&#34;</span>
127.0.0.1:6379&gt; ZREVRANGEBYSCORE myzset <span style="color:#666">6</span> <span style="color:#666">2</span> <span style="color:#080;font-style:italic"># 按score递减顺序 返回集合中分数在[2,6]之间的成员</span>
1<span style="color:#666">)</span> <span style="color:#b44">&#34;m4&#34;</span>
2<span style="color:#666">)</span> <span style="color:#b44">&#34;m3&#34;</span>
3<span style="color:#666">)</span> <span style="color:#b44">&#34;m2&#34;</span>
127.0.0.1:6379&gt; ZREVRANGEBYLEX testset <span style="color:#666">[</span>java <span style="color:#666">(</span>add <span style="color:#080;font-style:italic"># 按字典倒序 返回集合中(add,java]字典区间的成员</span>
1<span style="color:#666">)</span> <span style="color:#b44">&#34;java&#34;</span>
2<span style="color:#666">)</span> <span style="color:#b44">&#34;back&#34;</span>
3<span style="color:#666">)</span> <span style="color:#b44">&#34;apple&#34;</span>
4<span style="color:#666">)</span> <span style="color:#b44">&#34;amaze&#34;</span>

-------------------------ZREVRANK------------------------------
127.0.0.1:6379&gt; ZREVRANK myzset m7 <span style="color:#080;font-style:italic"># 按score递减顺序，返回成员m7索引</span>
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">1</span>
127.0.0.1:6379&gt; ZREVRANK myzset m2
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">4</span>


<span style="color:#080;font-style:italic"># mathscore=&gt;{(xm,90),(xh,95),(xg,87)} 小明、小红、小刚的数学成绩</span>
<span style="color:#080;font-style:italic"># enscore=&gt;{(xm,70),(xh,93),(xg,90)} 小明、小红、小刚的英语成绩</span>
-------------------ZINTERSTORE--ZUNIONSTORE-----------------------------------
127.0.0.1:6379&gt; ZINTERSTORE sumscore <span style="color:#666">2</span> mathscore enscore <span style="color:#080;font-style:italic"># 将mathscore enscore进行合并 结果存放到sumscore</span>
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">3</span>
127.0.0.1:6379&gt; ZRANGE sumscore <span style="color:#666">0</span> -1 withscores <span style="color:#080;font-style:italic"># 合并后的score是之前集合中所有score的和</span>
1<span style="color:#666">)</span> <span style="color:#b44">&#34;xm&#34;</span>
2<span style="color:#666">)</span> <span style="color:#b44">&#34;160&#34;</span>
3<span style="color:#666">)</span> <span style="color:#b44">&#34;xg&#34;</span>
4<span style="color:#666">)</span> <span style="color:#b44">&#34;177&#34;</span>
5<span style="color:#666">)</span> <span style="color:#b44">&#34;xh&#34;</span>
6<span style="color:#666">)</span> <span style="color:#b44">&#34;188&#34;</span>

127.0.0.1:6379&gt; ZUNIONSTORE lowestscore <span style="color:#666">2</span> mathscore enscore AGGREGATE MIN <span style="color:#080;font-style:italic"># 取两个集合的成员score最小值作为结果的</span>
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">3</span>
127.0.0.1:6379&gt; ZRANGE lowestscore <span style="color:#666">0</span> -1 withscores
1<span style="color:#666">)</span> <span style="color:#b44">&#34;xm&#34;</span>
2<span style="color:#666">)</span> <span style="color:#b44">&#34;70&#34;</span>
3<span style="color:#666">)</span> <span style="color:#b44">&#34;xg&#34;</span>
4<span style="color:#666">)</span> <span style="color:#b44">&#34;87&#34;</span>
5<span style="color:#666">)</span> <span style="color:#b44">&#34;xh&#34;</span>
6<span style="color:#666">)</span> <span style="color:#b44">&#34;93&#34;</span>
</code></pre></td></tr></table>
</div>
</div><p>应用案例：</p>
<ul>
<li>set排序 存储班级成绩表 工资表排序</li>
<li>普通消息。1. 重要消息 2. 带权重进行判断</li>
<li>排行榜应用实现，取Top N测试</li>
</ul>
<h2 id="三种特殊数据类型">三种特殊数据类型</h2>
<h3 id="geospatial地理位置">Geospatial（地理位置）</h3>
<blockquote>
<p>使用经纬度定位地理坐标并用一个<strong>有序集合zset保存</strong>，所以zset命令也可以使用</p>
</blockquote>
<table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>geoadd key longitud(经度) latitude(纬度) member [..]</code></td>
<td>将具体经纬度的坐标存入一个有序集合</td>
</tr>
<tr>
<td><code>geopos key member [member..]</code></td>
<td>获取集合中的一个/多个成员坐标</td>
</tr>
<tr>
<td><code>geodist key member1 member2 [unit]</code></td>
<td>返回两个给定位置之间的距离。默认以米作为单位。</td>
</tr>
<tr>
<td><code>georadius key longitude latitude radius m|km|mi|ft [WITHCOORD][WITHDIST] [WITHHASH] [COUNT count]</code></td>
<td>以给定的经纬度为中心， 返回集合包含的位置元素当中， 与中心的距离不超过给定最大距离的所有位置元素。</td>
</tr>
<tr>
<td><code>GEORADIUSBYMEMBER key member radius...</code></td>
<td>功能与GEORADIUS相同，只是中心位置不是具体的经纬度，而是使用结合中已有的成员作为中心点。</td>
</tr>
<tr>
<td><code>geohash key member1 [member2..]</code></td>
<td>返回一个或多个位置元素的Geohash表示。使用Geohash位置52点整数编码。</td>
</tr>
</tbody>
</table>
<h4 id="有效经纬度">有效经纬度</h4>
<blockquote>
<ul>
<li>有效的经度从-180度到180度。</li>
<li>有效的纬度从-85.05112878度到85.05112878度。</li>
</ul>
</blockquote>
<p>指定单位的参数unit必须是以下单位的其中一个：</p>
<ul>
<li><strong>m</strong> 表示单位为米。</li>
<li><strong>km</strong> 表示单位为千米。</li>
<li><strong>mi</strong> 表示单位为英里。</li>
<li><strong>ft</strong> 表示单位为英尺。</li>
</ul>
<p><strong>关于GEORADIUS的参数</strong></p>
<blockquote>
<p>通过<code>georadius</code>就可以完成 <strong>附近的人</strong>功能</p>
<p>withcoord:带上坐标</p>
<p>withdist:带上距离，单位与半径单位相同</p>
<p>COUNT n : 只显示前n个(按距离递增排序)</p>
</blockquote>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">127.0.0.1:6379&gt;geoadd china:city 116.40 39.90 beijing
127.0.0.1:6379&gt;geoadd china:city 121.47 31.23 shanghai

----------------georadius---------------------
127.0.0.1:6379&gt; GEORADIUS china:city <span style="color:#666">120</span> <span style="color:#666">30</span> <span style="color:#666">500</span> km withcoord withdist <span style="color:#080;font-style:italic"># 查询经纬度(120,30)坐标500km半径内的成员</span>
1<span style="color:#666">)</span> 1<span style="color:#666">)</span> <span style="color:#b44">&#34;hangzhou&#34;</span>
   2<span style="color:#666">)</span> <span style="color:#b44">&#34;29.4151&#34;</span>
   3<span style="color:#666">)</span> 1<span style="color:#666">)</span> <span style="color:#b44">&#34;120.20000249147415&#34;</span>
      2<span style="color:#666">)</span> <span style="color:#b44">&#34;30.199999888333501&#34;</span>
2<span style="color:#666">)</span> 1<span style="color:#666">)</span> <span style="color:#b44">&#34;shanghai&#34;</span>
   2<span style="color:#666">)</span> <span style="color:#b44">&#34;205.3611&#34;</span>
   3<span style="color:#666">)</span> 1<span style="color:#666">)</span> <span style="color:#b44">&#34;121.40000134706497&#34;</span>
      2<span style="color:#666">)</span> <span style="color:#b44">&#34;31.400000253193539&#34;</span>
     
------------geohash---------------------------
127.0.0.1:6379&gt; geohash china:city yichang shanghai <span style="color:#080;font-style:italic"># 获取成员经纬坐标的geohash表示</span>
1<span style="color:#666">)</span> <span style="color:#b44">&#34;wmrjwbr5250&#34;</span>
2<span style="color:#666">)</span> <span style="color:#b44">&#34;wtw6ds0y300&#34;</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="hyperloglog基数统计">Hyperloglog（基数统计）</h3>
<blockquote>
<p>Redis HyperLogLog 是用来做基数统计的算法，HyperLogLog 的优点是，在输入元素的数量或者体积非常非常大时，计算基数所需的空间总是固定的、并且是很小的。</p>
<p>花费 12 KB 内存，就可以计算接近 2^64 个不同元素的基数。</p>
<p>因为 HyperLogLog 只会根据输入元素来计算基数，而不会储存输入元素本身，所以 HyperLogLog 不能像集合那样，返回输入的各个元素。</p>
<p>其底层使用string数据类型</p>
</blockquote>
<p>什么是基数？</p>
<blockquote>
<p>数据集中不重复的元素的个数</p>
</blockquote>
<p>应用场景：</p>
<p>网页的访问量（UV）：一个用户多次访问，也只能算作一个人</p>
<blockquote>
<p>传统实现，存储用户的id,然后每次进行比较。当用户变多之后这种方式及其浪费空间，而我们的目的只是<strong>计数</strong>，Hyperloglog就能帮助我们利用最小的空间完成。</p>
</blockquote>
<table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>PFADD key element1 [elememt2..]</code></td>
<td>添加指定元素到 HyperLogLog 中</td>
</tr>
<tr>
<td><code>PFCOUNT key [key]</code></td>
<td>返回给定 HyperLogLog 的基数估算值。</td>
</tr>
<tr>
<td><code>PFMERGE destkey sourcekey [sourcekey..]</code></td>
<td>将多个 HyperLogLog 合并为一个 HyperLogLog</td>
</tr>
</tbody>
</table>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">----------PFADD--PFCOUNT---------------------
127.0.0.1:6379&gt; PFADD myelemx a b c d e f g h i j k <span style="color:#080;font-style:italic"># 添加元素</span>
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">1</span>
127.0.0.1:6379&gt; <span style="color:#a2f">type</span> myelemx <span style="color:#080;font-style:italic"># hyperloglog底层使用String</span>
string
127.0.0.1:6379&gt; PFCOUNT myelemx <span style="color:#080;font-style:italic"># 估算myelemx的基数</span>
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">11</span>
127.0.0.1:6379&gt; PFADD myelemy i j k z m c b v p q s
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">1</span>
127.0.0.1:6379&gt; PFCOUNT myelemy
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">11</span>

----------------PFMERGE-----------------------
127.0.0.1:6379&gt; PFMERGE myelemz myelemx myelemy <span style="color:#080;font-style:italic"># 合并myelemx和myelemy 成为myelemz</span>
OK
127.0.0.1:6379&gt; PFCOUNT myelemz <span style="color:#080;font-style:italic"># 估算基数</span>
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">17</span>
</code></pre></td></tr></table>
</div>
</div><p>如果允许容错，那么一定可以使用Hyperloglog !</p>
<p>如果不允许容错，就使用set或者自己的数据类型即可 ！</p>
<h3 id="bitmaps位图">BitMaps（位图）</h3>
<blockquote>
<p>==使用位存储==，信息状态只有 0 和 1</p>
<p>Bitmap是一串连续的2进制数字（0或1），每一位所在的位置为偏移(offset)，在bitmap上可执行AND,OR,XOR,NOT以及其它位操作。</p>
</blockquote>
<h4 id="应用场景">应用场景</h4>
<p>签到统计、状态统计</p>
<p>统计用户信息，活跃，不活跃	登录	不登录</p>
<table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>setbit key offset value</td>
<td>为指定key的offset位设置值</td>
</tr>
<tr>
<td>getbit key offset</td>
<td>获取offset位的值</td>
</tr>
<tr>
<td>bitcount key [start end]</td>
<td>统计字符串被设置为1的bit数，也可以指定统计范围按字节</td>
</tr>
<tr>
<td>bitop operration destkey key[key..]</td>
<td>对一个或多个保存二进制位的字符串 key 进行位元操作，并将结果保存到 destkey 上。</td>
</tr>
<tr>
<td>BITPOS key bit [start] [end]</td>
<td>返回字符串里面第一个被设置为1或者0的bit位。start和end只能按字节,不能按位</td>
</tr>
</tbody>
</table>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">------------setbit--getbit--------------
127.0.0.1:6379&gt; setbit sign <span style="color:#666">0</span> <span style="color:#666">1</span> <span style="color:#080;font-style:italic"># 设置sign的第0位为 1</span> 
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">0</span>
127.0.0.1:6379&gt; setbit sign <span style="color:#666">2</span> <span style="color:#666">1</span> <span style="color:#080;font-style:italic"># 设置sign的第2位为 1  不设置默认 是0</span>
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">0</span>
127.0.0.1:6379&gt; setbit sign <span style="color:#666">3</span> <span style="color:#666">1</span>
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">0</span>
127.0.0.1:6379&gt; setbit sign <span style="color:#666">5</span> <span style="color:#666">1</span>
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">0</span>
127.0.0.1:6379&gt; <span style="color:#a2f">type</span> sign
string

127.0.0.1:6379&gt; getbit sign <span style="color:#666">2</span> <span style="color:#080;font-style:italic"># 获取第2位的数值</span>
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">1</span>
127.0.0.1:6379&gt; getbit sign <span style="color:#666">3</span>
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">1</span>
127.0.0.1:6379&gt; getbit sign <span style="color:#666">4</span> <span style="color:#080;font-style:italic"># 未设置默认是0</span>
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">0</span>

-----------bitcount----------------------------
127.0.0.1:6379&gt; BITCOUNT sign <span style="color:#080;font-style:italic"># 统计sign中为1的位数</span>
<span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">4</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="事务">事务</h2>
<p>Redis事务本质：一组命令的集合！一个事务中的所有命令都会被序列化，在事务执行过程中会顺序执行！</p>
<p>一次性、顺序性、排他性！执行一系列的命令！</p>
<p>==Redis事务没有隔离级别的概念==</p>
<p>所有的命令在事务中，并没有直接被执行！只有发起执行命令的时候才会执行！Exec</p>
<p>==Redis单条命令保证原子性，但是事务不保证原子性！==</p>
<p>redis的事务：</p>
<ul>
<li>开启事务（multi）</li>
<li>命令入队（&hellip;）</li>
<li>执行事务（exec）</li>
</ul>
<h3 id="redis事务操作过程">Redis事务操作过程</h3>
<blockquote>
<p>正常执行事务！</p>
</blockquote>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">127.0.0.1:6379&gt; MULTI	<span style="color:#080;font-style:italic"># 开启事务</span>
OK
127.0.0.1:6379&gt; <span style="color:#a2f">set</span> k1 v1
QUEUED
127.0.0.1:6379&gt; <span style="color:#a2f">set</span> k2 v2
QUEUED
127.0.0.1:6379&gt; get k2
QUEUED
127.0.0.1:6379&gt; <span style="color:#a2f">set</span> k3 v3
QUEUED
127.0.0.1:6379&gt; <span style="color:#a2f">exec</span> <span style="color:#080;font-style:italic"># 执行事务</span>
1<span style="color:#666">)</span> OK
2<span style="color:#666">)</span> OK
3<span style="color:#666">)</span> <span style="color:#b44">&#34;v2&#34;</span>
4<span style="color:#666">)</span> OK
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>放弃事务！</p>
</blockquote>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">127.0.0.1:6379&gt; MULTI
OK
127.0.0.1:6379&gt; <span style="color:#a2f">set</span> k1 v1
QUEUED
127.0.0.1:6379&gt; <span style="color:#a2f">set</span> k2 v2
QUEUED
127.0.0.1:6379&gt; <span style="color:#a2f">set</span> k4 v4
QUEUED
127.0.0.1:6379&gt; DISCARD <span style="color:#080;font-style:italic"># 取消事务</span>
OK
127.0.0.1:6379&gt; get k4
<span style="color:#666">(</span>nil<span style="color:#666">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="事务错误">事务错误</h3>
<blockquote>
<p>编译型异常（代码有问题！命令有错！），事务中所有的命令都不会被执行！</p>
</blockquote>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">127.0.0.1:6379&gt; multi
OK
127.0.0.1:6379&gt; <span style="color:#a2f">set</span> k1 v1
QUEUED
127.0.0.1:6379&gt; <span style="color:#a2f">set</span> k2 v2
QUEUED
127.0.0.1:6379&gt; <span style="color:#a2f">set</span> k3 v3
QUEUED
127.0.0.1:6379&gt; getset k3  <span style="color:#080;font-style:italic"># 错误的命令</span>
<span style="color:#666">(</span>error<span style="color:#666">)</span> ERR wrong number of arguments <span style="color:#a2f;font-weight:bold">for</span> <span style="color:#b44">&#39;getset&#39;</span> <span style="color:#a2f">command</span>
127.0.0.1:6379&gt; <span style="color:#a2f">set</span> k3 v4
QUEUED
127.0.0.1:6379&gt; <span style="color:#a2f">set</span> k5 v5
QUEUED
127.0.0.1:6379&gt; EXEC <span style="color:#080;font-style:italic"># 执行事务报错</span>
<span style="color:#666">(</span>error<span style="color:#666">)</span> EXECABORT Transaction discarded because of previous errors.
127.0.0.1:6379&gt; get k5 <span style="color:#080;font-style:italic"># 所有的命令都不会被执行</span>
<span style="color:#666">(</span>nil<span style="color:#666">)</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>运行时异常（1/0）如果事务队列中存在语法性错误，那么执行命令的时候，其他命令是可以执行的，错误命令抛出异常</p>
</blockquote>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">127.0.0.1:6379&gt; <span style="color:#a2f">set</span> k1 <span style="color:#b44">&#34;v1&#34;</span>
OK
127.0.0.1:6379&gt; MULTI
OK
127.0.0.1:6379&gt; INCR k1
QUEUED
127.0.0.1:6379&gt; <span style="color:#a2f">set</span> k2 v2
QUEUED
127.0.0.1:6379&gt; <span style="color:#a2f">set</span> k3 v3
QUEUED
127.0.0.1:6379&gt; get k3
QUEUED
127.0.0.1:6379&gt; EXEC
1<span style="color:#666">)</span> <span style="color:#666">(</span>error<span style="color:#666">)</span> ERR value is not an integer or out of range	<span style="color:#080;font-style:italic"># 虽然第一条命令报错了，但是依旧正常执行</span>
2<span style="color:#666">)</span> OK
3<span style="color:#666">)</span> OK
4<span style="color:#666">)</span> <span style="color:#b44">&#34;v3&#34;</span>
127.0.0.1:6379&gt; get k2
<span style="color:#b44">&#34;v2&#34;</span>
127.0.0.1:6379&gt; get k3
<span style="color:#b44">&#34;v3&#34;</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="监控面试常问">监控（面试常问）</h3>
<p><strong>悲观锁：</strong></p>
<ul>
<li>很悲观，什么时候都会出问题，无论做什么都会加锁！</li>
</ul>
<p><strong>乐观锁：很乐观，认为什么时候都不会出现问题，所以不会上锁！更新数据的时候区判断以下，在此期间是否有人修改数据</strong></p>
<ul>
<li>很乐观，认为什么时候都不会出现问题，所以不会上锁！更新数据的时候区判断以下，在此期间是否有人修改数据</li>
<li>获取version</li>
<li>更新的时候比较version</li>
</ul>
<blockquote>
<p>Redis监视测试</p>
</blockquote>
<p>正常执行成功</p>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">127.0.0.1:6379&gt; <span style="color:#a2f">set</span> money <span style="color:#666">100</span>
OK
127.0.0.1:6379&gt; <span style="color:#a2f">set</span> out <span style="color:#666">0</span>
OK
127.0.0.1:6379&gt; watch money <span style="color:#080;font-style:italic"># 监视 money 对象</span>
OK
127.0.0.1:6379&gt; MULTI	<span style="color:#080;font-style:italic"># 事务正常结束，数据期间没有发生变动，这个时候就正常执行成功！</span>
OK
127.0.0.1:6379&gt; DECRBY money <span style="color:#666">20</span>
QUEUED
127.0.0.1:6379&gt; INCRBY out <span style="color:#666">20</span>
QUEUED
127.0.0.1:6379&gt; <span style="color:#a2f">exec</span>
1<span style="color:#666">)</span> <span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">80</span>
2<span style="color:#666">)</span> <span style="color:#666">(</span>integer<span style="color:#666">)</span> <span style="color:#666">20</span>
</code></pre></td></tr></table>
</div>
</div><p>测试多线程修改值，使用watch可以当做redis的乐观锁操作！</p>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">127.0.0.1:6379&gt; watch  money 	<span style="color:#080;font-style:italic"># 监视 money</span>
OK
127.0.0.1:6379&gt; MULTI
OK
127.0.0.1:6379&gt; DECRBY money <span style="color:#666">10</span>
QUEUED
127.0.0.1:6379&gt; INCRBY out <span style="color:#666">10</span>
QUEUED
127.0.0.1:6379&gt; <span style="color:#a2f">exec</span>	<span style="color:#080;font-style:italic"># 执行之前，另外一个线程修改了我们的值，这个时候就会导致事务执行失败</span>
<span style="color:#666">(</span>nil<span style="color:#666">)</span>
</code></pre></td></tr></table>
</div>
</div><p>如果修改失败，获取最新的值就好</p>
<p><img src="https://gitee.com/aszh/Gitee-Pages/raw/master/img/20210616171531.png" alt="image-20210616171529844"></p>
<h2 id="go语言操作redis">Go语言操作Redis</h2>
<p>在项目开发的时候redis的使用比较频繁</p>
<h3 id="准备redis环境">准备Redis环境</h3>
<p>没有redis可以使用docker启动一个环境</p>
<p>docker启动一个名为redis507的5.0.7版本的redis server示例：</p>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">docker run --name redis507 -p 6379:6379 -d redis:5.0.7
</code></pre></td></tr></table>
</div>
</div><p>**注意：**此处的版本、容器名和端口号请根据自己需要设置。</p>
<p>启动一个redis-cli连接上面的redis server:</p>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">docker run -it --network host --rm redis:5.0.7 redis-cli
</code></pre></td></tr></table>
</div>
</div><h3 id="go-redis-库">go-redis 库</h3>
<p><code>go-redis</code>支持连接哨兵以及集群模式的Redis</p>
<p>使用以下命令安装：</p>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">go get -u github.com/go-redis/redis
</code></pre></td></tr></table>
</div>
</div><h4 id="连接">连接</h4>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a2f;font-weight:bold">package</span> main

<span style="color:#a2f;font-weight:bold">import</span> (
	<span style="color:#b44">&#34;context&#34;</span>
	<span style="color:#b44">&#34;fmt&#34;</span>
	<span style="color:#b44">&#34;time&#34;</span>

	<span style="color:#b44">&#34;github.com/go-redis/redis/v8&#34;</span> <span style="color:#080;font-style:italic">// 注意导入的是新版本
</span><span style="color:#080;font-style:italic"></span>)

<span style="color:#a2f;font-weight:bold">var</span> (
	rdb <span style="color:#666">*</span>redis.Client
)

<span style="color:#080;font-style:italic">// 初始化连接
</span><span style="color:#080;font-style:italic"></span><span style="color:#a2f;font-weight:bold">func</span> <span style="color:#00a000">initClient</span>() (err <span style="color:#0b0;font-weight:bold">error</span>) {
	rdb = redis.<span style="color:#00a000">NewClient</span>(<span style="color:#666">&amp;</span>redis.Options{
		Addr:     <span style="color:#b44">&#34;localhost:16379&#34;</span>,
		Password: <span style="color:#b44">&#34;&#34;</span>,  <span style="color:#080;font-style:italic">// no password set
</span><span style="color:#080;font-style:italic"></span>		DB:       <span style="color:#666">0</span>,   <span style="color:#080;font-style:italic">// use default DB
</span><span style="color:#080;font-style:italic"></span>		PoolSize: <span style="color:#666">100</span>, <span style="color:#080;font-style:italic">// 连接池大小
</span><span style="color:#080;font-style:italic"></span>	})

	ctx, cancel <span style="color:#666">:=</span> context.<span style="color:#00a000">WithTimeout</span>(context.<span style="color:#00a000">Background</span>(), <span style="color:#666">5</span><span style="color:#666">*</span>time.Second)
	<span style="color:#a2f;font-weight:bold">defer</span> <span style="color:#00a000">cancel</span>()

	_, err = rdb.<span style="color:#00a000">Ping</span>(ctx).<span style="color:#00a000">Result</span>()
	<span style="color:#a2f;font-weight:bold">return</span> err
}

<span style="color:#a2f;font-weight:bold">func</span> <span style="color:#00a000">V8Example</span>() {
	ctx <span style="color:#666">:=</span> context.<span style="color:#00a000">Background</span>()
	<span style="color:#a2f;font-weight:bold">if</span> err <span style="color:#666">:=</span> <span style="color:#00a000">initClient</span>(); err <span style="color:#666">!=</span> <span style="color:#a2f;font-weight:bold">nil</span> {
		<span style="color:#a2f;font-weight:bold">return</span>
	}

	err <span style="color:#666">:=</span> rdb.<span style="color:#00a000">Set</span>(ctx, <span style="color:#b44">&#34;key&#34;</span>, <span style="color:#b44">&#34;value&#34;</span>, <span style="color:#666">0</span>).<span style="color:#00a000">Err</span>()
	<span style="color:#a2f;font-weight:bold">if</span> err <span style="color:#666">!=</span> <span style="color:#a2f;font-weight:bold">nil</span> {
		<span style="color:#a2f">panic</span>(err)
	}

	val, err <span style="color:#666">:=</span> rdb.<span style="color:#00a000">Get</span>(ctx, <span style="color:#b44">&#34;key&#34;</span>).<span style="color:#00a000">Result</span>()
	<span style="color:#a2f;font-weight:bold">if</span> err <span style="color:#666">!=</span> <span style="color:#a2f;font-weight:bold">nil</span> {
		<span style="color:#a2f">panic</span>(err)
	}
	fmt.<span style="color:#00a000">Println</span>(<span style="color:#b44">&#34;key&#34;</span>, val)

	val2, err <span style="color:#666">:=</span> rdb.<span style="color:#00a000">Get</span>(ctx, <span style="color:#b44">&#34;key2&#34;</span>).<span style="color:#00a000">Result</span>()
	<span style="color:#a2f;font-weight:bold">if</span> err <span style="color:#666">==</span> redis.Nil {
		fmt.<span style="color:#00a000">Println</span>(<span style="color:#b44">&#34;key2 does not exist&#34;</span>)
	} <span style="color:#a2f;font-weight:bold">else</span> <span style="color:#a2f;font-weight:bold">if</span> err <span style="color:#666">!=</span> <span style="color:#a2f;font-weight:bold">nil</span> {
		<span style="color:#a2f">panic</span>(err)
	} <span style="color:#a2f;font-weight:bold">else</span> {
		fmt.<span style="color:#00a000">Println</span>(<span style="color:#b44">&#34;key2&#34;</span>, val2)
	}
	<span style="color:#080;font-style:italic">// Output: key value
</span><span style="color:#080;font-style:italic"></span>	<span style="color:#080;font-style:italic">// key2 does not exist
</span><span style="color:#080;font-style:italic"></span>}
</code></pre></td></tr></table>
</div>
</div><h4 id="连接redis哨兵模式">连接Redis哨兵模式</h4>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">func initClient<span style="color:#666">()(</span>err error<span style="color:#666">){</span>
	rdb :<span style="color:#666">=</span> redis.NewFailoverClient<span style="color:#666">(</span>&amp;redis.FailoverOptions<span style="color:#666">{</span>
		MasterName:    <span style="color:#b44">&#34;master&#34;</span>,
		SentinelAddrs: <span style="color:#666">[]</span>string<span style="color:#666">{</span><span style="color:#b44">&#34;x.x.x.x:26379&#34;</span>, <span style="color:#b44">&#34;xx.xx.xx.xx:26379&#34;</span>, <span style="color:#b44">&#34;xxx.xxx.xxx.xxx:26379&#34;</span><span style="color:#666">}</span>,
	<span style="color:#666">})</span>
	_, <span style="color:#b8860b">err</span> <span style="color:#666">=</span> rdb.Ping<span style="color:#666">()</span>.Result<span style="color:#666">()</span>
	<span style="color:#a2f;font-weight:bold">if</span> err !<span style="color:#666">=</span> nil <span style="color:#666">{</span>
		<span style="color:#a2f;font-weight:bold">return</span> err
	<span style="color:#666">}</span>
	<span style="color:#a2f;font-weight:bold">return</span> nil
<span style="color:#666">}</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="连接redis集群">连接Redis集群</h4>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">func initClient<span style="color:#666">()(</span>err error<span style="color:#666">){</span>
	rdb :<span style="color:#666">=</span> redis.NewClusterClient<span style="color:#666">(</span>&amp;redis.ClusterOptions<span style="color:#666">{</span>
		Addrs: <span style="color:#666">[]</span>string<span style="color:#666">{</span><span style="color:#b44">&#34;:7000&#34;</span>, <span style="color:#b44">&#34;:7001&#34;</span>, <span style="color:#b44">&#34;:7002&#34;</span>, <span style="color:#b44">&#34;:7003&#34;</span>, <span style="color:#b44">&#34;:7004&#34;</span>, <span style="color:#b44">&#34;:7005&#34;</span><span style="color:#666">}</span>,
	<span style="color:#666">})</span>
	_, <span style="color:#b8860b">err</span> <span style="color:#666">=</span> rdb.Ping<span style="color:#666">()</span>.Result<span style="color:#666">()</span>
	<span style="color:#a2f;font-weight:bold">if</span> err !<span style="color:#666">=</span> nil <span style="color:#666">{</span>
		<span style="color:#a2f;font-weight:bold">return</span> err
	<span style="color:#666">}</span>
	<span style="color:#a2f;font-weight:bold">return</span> nil
<span style="color:#666">}</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="基本使用">基本使用</h4>
<blockquote>
<p>set/get 示例</p>
</blockquote>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a2f;font-weight:bold">func</span> <span style="color:#00a000">redisExample</span>() {
   ctx <span style="color:#666">:=</span> context.<span style="color:#00a000">Background</span>()
   <span style="color:#a2f;font-weight:bold">if</span> err <span style="color:#666">:=</span> <span style="color:#00a000">initClient</span>(); err <span style="color:#666">!=</span> <span style="color:#a2f;font-weight:bold">nil</span> {
      <span style="color:#a2f;font-weight:bold">return</span>
   }

   err <span style="color:#666">:=</span> rdb.<span style="color:#00a000">Set</span>(ctx, <span style="color:#b44">&#34;score&#34;</span>, <span style="color:#666">100</span>, <span style="color:#666">0</span>).<span style="color:#00a000">Err</span>()
   <span style="color:#a2f;font-weight:bold">if</span> err <span style="color:#666">!=</span> <span style="color:#a2f;font-weight:bold">nil</span> {
      fmt.<span style="color:#00a000">Printf</span>(<span style="color:#b44">&#34;set score failed, err:%v\n&#34;</span>, err)
      <span style="color:#a2f;font-weight:bold">return</span>
   }
   val, err <span style="color:#666">:=</span> rdb.<span style="color:#00a000">Get</span>(ctx, <span style="color:#b44">&#34;score&#34;</span>).<span style="color:#00a000">Result</span>()
   <span style="color:#a2f;font-weight:bold">if</span> err <span style="color:#666">!=</span> <span style="color:#a2f;font-weight:bold">nil</span> {
      fmt.<span style="color:#00a000">Printf</span>(<span style="color:#b44">&#34;get score failed，err:%v\n&#34;</span>, err)
      <span style="color:#a2f;font-weight:bold">return</span>
   }
   fmt.<span style="color:#00a000">Println</span>(<span style="color:#b44">&#34;score&#34;</span>, val)

   val2, err <span style="color:#666">:=</span> rdb.<span style="color:#00a000">Get</span>(ctx, <span style="color:#b44">&#34;name&#34;</span>).<span style="color:#00a000">Result</span>()
   <span style="color:#a2f;font-weight:bold">if</span> err <span style="color:#666">==</span> redis.Nil {
      fmt.<span style="color:#00a000">Println</span>(<span style="color:#b44">&#34;name does not exist&#34;</span>)
   } <span style="color:#a2f;font-weight:bold">else</span> <span style="color:#a2f;font-weight:bold">if</span> err <span style="color:#666">!=</span> <span style="color:#a2f;font-weight:bold">nil</span> {
      fmt.<span style="color:#00a000">Printf</span>(<span style="color:#b44">&#34;get name failed, err:%v\n&#34;</span>, err)
      <span style="color:#a2f;font-weight:bold">return</span>
   } <span style="color:#a2f;font-weight:bold">else</span> {
      fmt.<span style="color:#00a000">Println</span>(<span style="color:#b44">&#34;name&#34;</span>, val2)
   }
}
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>zset 示例</p>
</blockquote>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a2f;font-weight:bold">func</span> <span style="color:#00a000">redisExample2</span>() {
   ctx <span style="color:#666">:=</span> context.<span style="color:#00a000">Background</span>()
   <span style="color:#a2f;font-weight:bold">if</span> err <span style="color:#666">:=</span> <span style="color:#00a000">initClient</span>(); err <span style="color:#666">!=</span> <span style="color:#a2f;font-weight:bold">nil</span> {
      <span style="color:#a2f;font-weight:bold">return</span>
   }
   zsetKey <span style="color:#666">:=</span> <span style="color:#b44">&#34;language_rank&#34;</span>
   languages <span style="color:#666">:=</span> []<span style="color:#666">*</span>redis.Z{
      {Score: <span style="color:#666">90.0</span>, Member: <span style="color:#b44">&#34;Golang&#34;</span>},
      {Score: <span style="color:#666">98.0</span>, Member: <span style="color:#b44">&#34;Java&#34;</span>},
      {Score: <span style="color:#666">95.0</span>, Member: <span style="color:#b44">&#34;Python&#34;</span>},
      {Score: <span style="color:#666">97.0</span>, Member: <span style="color:#b44">&#34;JavaScript&#34;</span>},
      {Score: <span style="color:#666">99.0</span>, Member: <span style="color:#b44">&#34;C/C++&#34;</span>},
   }
   <span style="color:#080;font-style:italic">// ZADD
</span><span style="color:#080;font-style:italic"></span>   num, err <span style="color:#666">:=</span> rdb.<span style="color:#00a000">ZAdd</span>(ctx, zsetKey, languages<span style="color:#666">...</span>).<span style="color:#00a000">Result</span>()
   <span style="color:#a2f;font-weight:bold">if</span> err <span style="color:#666">!=</span> <span style="color:#a2f;font-weight:bold">nil</span> {
      fmt.<span style="color:#00a000">Printf</span>(<span style="color:#b44">&#34;zadd failed, err:%v\n&#34;</span>, num)
   }
   fmt.<span style="color:#00a000">Printf</span>(<span style="color:#b44">&#34;zadd %d succ.\n&#34;</span>, num)

   <span style="color:#080;font-style:italic">// 把Golang的分数加10
</span><span style="color:#080;font-style:italic"></span>   newScore, err <span style="color:#666">:=</span> rdb.<span style="color:#00a000">ZIncrBy</span>(ctx, zsetKey, <span style="color:#666">10.0</span>, <span style="color:#b44">&#34;Golang&#34;</span>).<span style="color:#00a000">Result</span>()
   <span style="color:#a2f;font-weight:bold">if</span> err <span style="color:#666">!=</span> <span style="color:#a2f;font-weight:bold">nil</span> {
      fmt.<span style="color:#00a000">Printf</span>(<span style="color:#b44">&#34;zincrby failed, err:%v\n&#34;</span>, err)
      <span style="color:#a2f;font-weight:bold">return</span>
   }
   fmt.<span style="color:#00a000">Printf</span>(<span style="color:#b44">&#34;Golang&#39;s score is %f now.\n&#34;</span>, newScore)

   <span style="color:#080;font-style:italic">// 取分数最高的3个
</span><span style="color:#080;font-style:italic"></span>   ret, err <span style="color:#666">:=</span> rdb.<span style="color:#00a000">ZRevRangeWithScores</span>(ctx, zsetKey, <span style="color:#666">0</span>, <span style="color:#666">2</span>).<span style="color:#00a000">Result</span>()
   <span style="color:#a2f;font-weight:bold">if</span> err <span style="color:#666">!=</span> <span style="color:#a2f;font-weight:bold">nil</span> {
      fmt.<span style="color:#00a000">Printf</span>(<span style="color:#b44">&#34;zrevrange failed, err:%v\n&#34;</span>, err)
      <span style="color:#a2f;font-weight:bold">return</span>
   }
   <span style="color:#a2f;font-weight:bold">for</span> _, z <span style="color:#666">:=</span> <span style="color:#a2f;font-weight:bold">range</span> ret {
      fmt.<span style="color:#00a000">Println</span>(z.Member, z.Score)
   }

   <span style="color:#080;font-style:italic">// 取95分到100分的
</span><span style="color:#080;font-style:italic"></span>   op <span style="color:#666">:=</span> <span style="color:#666">&amp;</span>redis.ZRangeBy{
      Min: <span style="color:#b44">&#34;95&#34;</span>,
      Max: <span style="color:#b44">&#34;100&#34;</span>,
   }
   ret, err = rdb.<span style="color:#00a000">ZRangeByScoreWithScores</span>(ctx, zsetKey, op).<span style="color:#00a000">Result</span>()
   <span style="color:#a2f;font-weight:bold">if</span> err <span style="color:#666">!=</span> <span style="color:#a2f;font-weight:bold">nil</span> {
      fmt.<span style="color:#00a000">Printf</span>(<span style="color:#b44">&#34;zrangebyscore failed, err:%v\n&#34;</span>, err)
      <span style="color:#a2f;font-weight:bold">return</span>
   }
   <span style="color:#a2f;font-weight:bold">for</span> _, z <span style="color:#666">:=</span> <span style="color:#a2f;font-weight:bold">range</span> ret {
      fmt.<span style="color:#00a000">Println</span>(z.Member, z.Score)
   }
}
</code></pre></td></tr></table>
</div>
</div><p>结果：</p>
<pre><code>➜  redis go run main.go
zadd 0 succ.
Golang's score is 100.000000 now.
Golang 100
C/C++ 99
Java 98
Python 95
JavaScript 97
Java 98
C/C++ 99
Golang 100
</code></pre><blockquote>
<p>根据前缀获取Key</p>
</blockquote>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">vals, err <span style="color:#666">:=</span> rdb.<span style="color:#00a000">Keys</span>(ctx, <span style="color:#b44">&#34;prefix*&#34;</span>).<span style="color:#00a000">Result</span>()
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>执行自定义命令</p>
</blockquote>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">res, err <span style="color:#666">:=</span> rdb.<span style="color:#00a000">Do</span>(ctx, <span style="color:#b44">&#34;set&#34;</span>, <span style="color:#b44">&#34;key&#34;</span>, <span style="color:#b44">&#34;value&#34;</span>).<span style="color:#00a000">Result</span>()
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>按通配符删除key</p>
</blockquote>
<p>当通配符匹配的key的数量不多时，可以使用<code>Keys()</code>得到所有的key在使用<code>Del</code>命令删除。 如果key的数量非常多的时候，我们可以搭配使用<code>Scan</code>命令和<code>Del</code>命令完成删除。</p>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">ctx <span style="color:#666">:=</span> context.<span style="color:#00a000">Background</span>()
iter <span style="color:#666">:=</span> rdb.<span style="color:#00a000">Scan</span>(ctx, <span style="color:#666">0</span>, <span style="color:#b44">&#34;prefix*&#34;</span>, <span style="color:#666">0</span>).<span style="color:#00a000">Iterator</span>()
<span style="color:#a2f;font-weight:bold">for</span> iter.<span style="color:#00a000">Next</span>(ctx) {
	err <span style="color:#666">:=</span> rdb.<span style="color:#00a000">Del</span>(ctx, iter.<span style="color:#00a000">Val</span>()).<span style="color:#00a000">Err</span>()
	<span style="color:#a2f;font-weight:bold">if</span> err <span style="color:#666">!=</span> <span style="color:#a2f;font-weight:bold">nil</span> {
		<span style="color:#a2f">panic</span>(err)
	}
}
<span style="color:#a2f;font-weight:bold">if</span> err <span style="color:#666">:=</span> iter.<span style="color:#00a000">Err</span>(); err <span style="color:#666">!=</span> <span style="color:#a2f;font-weight:bold">nil</span> {
	<span style="color:#a2f">panic</span>(err)
}
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>事务</p>
</blockquote>
<p>Redis是单线程的，因此单个命令始终是原子的，但是来自不同客户端的两个给定命令可以依次执行，例如在它们之间交替执行。但是，<code>Multi/exec</code>能够确保在<code>multi/exec</code>两个语句之间的命令之间没有其他客户端正在执行命令。</p>
<p>在这种场景我们需要使用<code>TxPipeline</code>。<code>TxPipeline</code>总体上类似于上面的<code>Pipeline</code>，但是它内部会使用<code>MULTI/EXEC</code>包裹排队的命令。例如：</p>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">pipe <span style="color:#666">:=</span> rdb.<span style="color:#00a000">TxPipeline</span>()

incr <span style="color:#666">:=</span> pipe.<span style="color:#00a000">Incr</span>(<span style="color:#b44">&#34;tx_pipeline_counter&#34;</span>)
pipe.<span style="color:#00a000">Expire</span>(<span style="color:#b44">&#34;tx_pipeline_counter&#34;</span>, time.Hour)

_, err <span style="color:#666">:=</span> pipe.<span style="color:#00a000">Exec</span>()
fmt.<span style="color:#00a000">Println</span>(incr.<span style="color:#00a000">Val</span>(), err)
</code></pre></td></tr></table>
</div>
</div><p>上面代码相当于在一个RTT下执行了下面的redis命令：</p>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">MULTI
INCR pipeline_counter
EXPIRE pipeline_counts <span style="color:#666">3600</span>
EXEC
</code></pre></td></tr></table>
</div>
</div><p>还有一个与上文类似的<code>TxPipelined</code>方法，使用方法如下：</p>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a2f;font-weight:bold">var</span> incr <span style="color:#666">*</span>redis.IntCmd
_, err <span style="color:#666">:=</span> rdb.<span style="color:#00a000">TxPipelined</span>(<span style="color:#a2f;font-weight:bold">func</span>(pipe redis.Pipeliner) <span style="color:#0b0;font-weight:bold">error</span> {
	incr = pipe.<span style="color:#00a000">Incr</span>(<span style="color:#b44">&#34;tx_pipelined_counter&#34;</span>)
	pipe.<span style="color:#00a000">Expire</span>(<span style="color:#b44">&#34;tx_pipelined_counter&#34;</span>, time.Hour)
	<span style="color:#a2f;font-weight:bold">return</span> <span style="color:#a2f;font-weight:bold">nil</span>
})
fmt.<span style="color:#00a000">Println</span>(incr.<span style="color:#00a000">Val</span>(), err)
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>watch</p>
</blockquote>
<p>在某些场景下，我们除了要使用<code>MULTI/EXEC</code>命令外，还需要配合使用<code>WATCH</code>命令。在用户使用<code>WATCH</code>命令监视某个键之后，直到该用户执行<code>EXEC</code>命令的这段时间里，如果有其他用户抢先对被监视的键进行了替换、更新、删除等操作，那么当用户尝试执行<code>EXEC</code>的时候，事务将失败并返回一个错误，用户可以根据这个错误选择重试事务或者放弃事务。</p>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#00a000">Watch</span>(fn <span style="color:#a2f;font-weight:bold">func</span>(<span style="color:#666">*</span>Tx) <span style="color:#0b0;font-weight:bold">error</span>, keys <span style="color:#666">...</span><span style="color:#0b0;font-weight:bold">string</span>) <span style="color:#0b0;font-weight:bold">error</span>
</code></pre></td></tr></table>
</div>
</div><p>Watch方法接收一个函数和一个或多个key作为参数。基本使用示例如下：</p>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#080;font-style:italic">// 监视watch_count的值，并在值不变的前提下将其值+1
</span><span style="color:#080;font-style:italic"></span>key <span style="color:#666">:=</span> <span style="color:#b44">&#34;watch_count&#34;</span>
err = client.<span style="color:#00a000">Watch</span>(<span style="color:#a2f;font-weight:bold">func</span>(tx <span style="color:#666">*</span>redis.Tx) <span style="color:#0b0;font-weight:bold">error</span> {
	n, err <span style="color:#666">:=</span> tx.<span style="color:#00a000">Get</span>(key).<span style="color:#00a000">Int</span>()
	<span style="color:#a2f;font-weight:bold">if</span> err <span style="color:#666">!=</span> <span style="color:#a2f;font-weight:bold">nil</span> <span style="color:#666">&amp;&amp;</span> err <span style="color:#666">!=</span> redis.Nil {
		<span style="color:#a2f;font-weight:bold">return</span> err
	}
	_, err = tx.<span style="color:#00a000">Pipelined</span>(<span style="color:#a2f;font-weight:bold">func</span>(pipe redis.Pipeliner) <span style="color:#0b0;font-weight:bold">error</span> {
		pipe.<span style="color:#00a000">Set</span>(key, n<span style="color:#666">+</span><span style="color:#666">1</span>, <span style="color:#666">0</span>)
		<span style="color:#a2f;font-weight:bold">return</span> <span style="color:#a2f;font-weight:bold">nil</span>
	})
	<span style="color:#a2f;font-weight:bold">return</span> err
}, key)
</code></pre></td></tr></table>
</div>
</div><p>最后看一个V8版本官方文档中使用GET和SET命令以事务方式递增Key的值的示例，仅当Key的值不发生变化时提交一个事务。</p>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a2f;font-weight:bold">func</span> <span style="color:#00a000">transactionDemo</span>() {
	<span style="color:#a2f;font-weight:bold">var</span> (
		maxRetries   = <span style="color:#666">1000</span>
		routineCount = <span style="color:#666">10</span>
	)
	ctx, cancel <span style="color:#666">:=</span> context.<span style="color:#00a000">WithTimeout</span>(context.<span style="color:#00a000">Background</span>(), <span style="color:#666">5</span><span style="color:#666">*</span>time.Second)
	<span style="color:#a2f;font-weight:bold">defer</span> <span style="color:#00a000">cancel</span>()

	<span style="color:#080;font-style:italic">// Increment 使用GET和SET命令以事务方式递增Key的值
</span><span style="color:#080;font-style:italic"></span>	increment <span style="color:#666">:=</span> <span style="color:#a2f;font-weight:bold">func</span>(key <span style="color:#0b0;font-weight:bold">string</span>) <span style="color:#0b0;font-weight:bold">error</span> {
		<span style="color:#080;font-style:italic">// 事务函数
</span><span style="color:#080;font-style:italic"></span>		txf <span style="color:#666">:=</span> <span style="color:#a2f;font-weight:bold">func</span>(tx <span style="color:#666">*</span>redis.Tx) <span style="color:#0b0;font-weight:bold">error</span> {
			<span style="color:#080;font-style:italic">// 获得key的当前值或零值
</span><span style="color:#080;font-style:italic"></span>			n, err <span style="color:#666">:=</span> tx.<span style="color:#00a000">Get</span>(ctx, key).<span style="color:#00a000">Int</span>()
			<span style="color:#a2f;font-weight:bold">if</span> err <span style="color:#666">!=</span> <span style="color:#a2f;font-weight:bold">nil</span> <span style="color:#666">&amp;&amp;</span> err <span style="color:#666">!=</span> redis.Nil {
				<span style="color:#a2f;font-weight:bold">return</span> err
			}

			<span style="color:#080;font-style:italic">// 实际的操作代码（乐观锁定中的本地操作）
</span><span style="color:#080;font-style:italic"></span>			n<span style="color:#666">++</span>

			<span style="color:#080;font-style:italic">// 操作仅在 Watch 的 Key 没发生变化的情况下提交
</span><span style="color:#080;font-style:italic"></span>			_, err = tx.<span style="color:#00a000">TxPipelined</span>(ctx, <span style="color:#a2f;font-weight:bold">func</span>(pipe redis.Pipeliner) <span style="color:#0b0;font-weight:bold">error</span> {
				pipe.<span style="color:#00a000">Set</span>(ctx, key, n, <span style="color:#666">0</span>)
				<span style="color:#a2f;font-weight:bold">return</span> <span style="color:#a2f;font-weight:bold">nil</span>
			})
			<span style="color:#a2f;font-weight:bold">return</span> err
		}

		<span style="color:#080;font-style:italic">// 最多重试 maxRetries 次
</span><span style="color:#080;font-style:italic"></span>		<span style="color:#a2f;font-weight:bold">for</span> i <span style="color:#666">:=</span> <span style="color:#666">0</span>; i &lt; maxRetries; i<span style="color:#666">++</span> {
			err <span style="color:#666">:=</span> rdb.<span style="color:#00a000">Watch</span>(ctx, txf, key)
			<span style="color:#a2f;font-weight:bold">if</span> err <span style="color:#666">==</span> <span style="color:#a2f;font-weight:bold">nil</span> {
				<span style="color:#080;font-style:italic">// 成功
</span><span style="color:#080;font-style:italic"></span>				<span style="color:#a2f;font-weight:bold">return</span> <span style="color:#a2f;font-weight:bold">nil</span>
			}
			<span style="color:#a2f;font-weight:bold">if</span> err <span style="color:#666">==</span> redis.TxFailedErr {
				<span style="color:#080;font-style:italic">// 乐观锁丢失 重试
</span><span style="color:#080;font-style:italic"></span>				<span style="color:#a2f;font-weight:bold">continue</span>
			}
			<span style="color:#080;font-style:italic">// 返回其他的错误
</span><span style="color:#080;font-style:italic"></span>			<span style="color:#a2f;font-weight:bold">return</span> err
		}

		<span style="color:#a2f;font-weight:bold">return</span> errors.<span style="color:#00a000">New</span>(<span style="color:#b44">&#34;increment reached maximum number of retries&#34;</span>)
	}

	<span style="color:#080;font-style:italic">// 模拟 routineCount 个并发同时去修改 counter3 的值
</span><span style="color:#080;font-style:italic"></span>	<span style="color:#a2f;font-weight:bold">var</span> wg sync.WaitGroup
	wg.<span style="color:#00a000">Add</span>(routineCount)
	<span style="color:#a2f;font-weight:bold">for</span> i <span style="color:#666">:=</span> <span style="color:#666">0</span>; i &lt; routineCount; i<span style="color:#666">++</span> {
		<span style="color:#a2f;font-weight:bold">go</span> <span style="color:#a2f;font-weight:bold">func</span>() {
			<span style="color:#a2f;font-weight:bold">defer</span> wg.<span style="color:#00a000">Done</span>()
			<span style="color:#a2f;font-weight:bold">if</span> err <span style="color:#666">:=</span> <span style="color:#00a000">increment</span>(<span style="color:#b44">&#34;counter3&#34;</span>); err <span style="color:#666">!=</span> <span style="color:#a2f;font-weight:bold">nil</span> {
				fmt.<span style="color:#00a000">Println</span>(<span style="color:#b44">&#34;increment error:&#34;</span>, err)
			}
		}()
	}
	wg.<span style="color:#00a000">Wait</span>()

	n, err <span style="color:#666">:=</span> rdb.<span style="color:#00a000">Get</span>(context.<span style="color:#00a000">TODO</span>(), <span style="color:#b44">&#34;counter3&#34;</span>).<span style="color:#00a000">Int</span>()
	fmt.<span style="color:#00a000">Println</span>(<span style="color:#b44">&#34;ended with&#34;</span>, n, err)
}
</code></pre></td></tr></table>
</div>
</div><h2 id="redisconf">Redis.conf</h2>
<p>启动的时候，就通过配置文件来启动！</p>
<p>该文件路径默认安装地址为：<strong>/etc/redis/redis.conf</strong></p>
<blockquote>
<p>容量单位不区分大小写，G和GB有区别</p>
</blockquote>
<p><img src="https://gitee.com/aszh/Gitee-Pages/raw/master/img/20210618141104.png" alt="image-20210618141103579"></p>
<blockquote>
<p>可以使用 include 组合多个配置问题</p>
</blockquote>
<p><img src="https://gitee.com/aszh/Gitee-Pages/raw/master/img/20210618141132.png" alt="image-20210618141131528"></p>
<blockquote>
<p>网络配置</p>
</blockquote>
<p><img src="https://gitee.com/aszh/Gitee-Pages/raw/master/img/20210618141327.png" alt="image-20210618141326867"></p>
<blockquote>
<p>日志输出级别</p>
</blockquote>
<p><img src="https://gitee.com/aszh/Gitee-Pages/raw/master/img/20210618141536.png" alt="image-20210618141535732"></p>
<blockquote>
<p>日志输出文件</p>
</blockquote>
<p><img src="https://gitee.com/aszh/Gitee-Pages/raw/master/img/20210618141631.png" alt="image-20210618141630633"></p>
<blockquote>
<p>快照</p>
</blockquote>
<p>持久化，在规定的时间内，执行了多少次操作，则会持久化到文件 .rdb .aof</p>
<p>redis 是内存数据库，如果没有持久哈，那么</p>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#080;font-style:italic"># 如果900s内，如果至少有1个key进行了修改，我们就进行持久化操作</span>
save <span style="color:#666">900</span> <span style="color:#666">1</span>
<span style="color:#080;font-style:italic"># 如果300s内，如果至少有10个key进行了修改，我们就进行持久化操作</span>
save <span style="color:#666">300</span> <span style="color:#666">10</span>
<span style="color:#080;font-style:italic"># 如果60s内，如果至少有10000个key进行了修改，我们就进行持久化操作</span>
save <span style="color:#666">60</span> <span style="color:#666">10000</span>

<span style="color:#080;font-style:italic"># 可以自己定义</span>

stop-writes-on-bgsave-error yes		<span style="color:#080;font-style:italic"># 持久化如果错误，是否还需要继续工作</span>

rdbcompression yes		<span style="color:#080;font-style:italic"># 是否压缩rdb文件，需要消耗CPU资源</span>

rdbchecksum yes  <span style="color:#080;font-style:italic"># 报错rdb文件的时候，运行错误的检查校验</span>

dir /var/lib/redis 	<span style="color:#080;font-style:italic"># rdb 文件保存的目录</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>REPLICATION	复制</p>
</blockquote>
<blockquote>
<p>SECURITY 安全</p>
</blockquote>
<pre><code># 设置密码
config set requirepass &quot;123456&quot;

# 登录
auth 123456

# 获取redis密码
config get requirepass
</code></pre><blockquote>
<p>限制 CLIENTS</p>
</blockquote>
<pre><code>maxclients 10000	# 设置能连接上redis的最大客户端数量

maxmemory &lt;bytes&gt;	# 最大内存容量

maxmemory-policy noeviction	 # 内存到达上限后的处理策略
	maxmemory-policy 六种方式
    1、volatile-lru：只对设置了过期时间的key进行LRU（默认值） 
    2、allkeys-lru ： 删除lru算法的key   
    3、volatile-random：随机删除即将过期key   
    4、allkeys-random：随机删除   
    5、volatile-ttl ： 删除即将过期的   
    6、noeviction ： 永不过期，返回错误
</code></pre><blockquote>
<p>APPEND ONLY 模式 	aof 配置</p>
</blockquote>
<pre><code>appendonly no	# 默认不开启aof模式的，默认是使用rdb方式持久化的，在大部分所有的情况下，rdb完全够用了
appendfilename &quot;appendonly.aof&quot; # 持久化的文件名

# appendfsync always	# 每次修改都会sync
appendfsync everysec 	# 每秒执行一次synx，可能会丢失这1s的数据
# appendfsync no		# 不执行sync，这个时候操作系统自己同步数据，速度最快！
</code></pre><h3 id="redis-持久化">Redis 持久化</h3>
<p>==重点==</p>
<p>Redis是内存数据哭，如果不将内存中的数据库状态保存到磁盘，那么一旦服务器进程退出，服务器中的数据状态也会消失，所以Redis提供了持久化功能！</p>
<h3 id="rdbredis-database">RDB（Redis DataBase）</h3>
<blockquote>
<p>什么是RDB</p>
</blockquote>
<p><img src="https://gitee.com/aszh/Gitee-Pages/raw/master/img/20210618154558.png" alt="image-20210618154543887"></p>
<p>在指定时间间隔后，将内存中的数据集快照写入数据库 ；在恢复时候，直接读取快照文件，进行数据的恢复 ；</p>
<p>Redis会单独创建（fork）一个子进程来进行持久化，会先将数据写入到一个临时文件中，待持久化过程都结束了，再用这个临时文件替换上次持久化好的文件。整个过程中，主进程是不进行任何IO操作的。这就确保了极高的性能。如果需要进行大规模数据的恢复，且对于数据恢复的完整性不是非常敏感，那RDB方式要比AOF方式更加高效。RDB的缺点是最后一次持久化后的数据可能丢失。我们默认的就是RDB，一般情况下不需要修改这个配置！</p>
<p><em>有时候生产环境我们会将这个文件进行备份！</em></p>
<p>==rdb保存的文件是dump.rdb== 都是在我们的配置文件快照中进行配置的！</p>
<p><img src="https://gitee.com/aszh/Gitee-Pages/raw/master/img/20210618154952.png" alt="image-20210618154951788"></p>
<blockquote>
<p>触发机制</p>
</blockquote>
<ol>
<li>save的规则满足的情况下，会自动触发rdb规则</li>
<li>执行flushall 命令，也会触发rdb规则</li>
<li>退出redis，也会产生rdb文件</li>
</ol>
<p>备份就会自动生成一个dump.rdb</p>
<blockquote>
<p>如何恢复rdb文件</p>
</blockquote>
<ol>
<li>
<p>只需要将rdb文件放在我们的rdis启动目录就可以，redis启动的时候会自动检查dump.rdb 恢复其中的数据！</p>
</li>
<li>
<p>查看需要存在的位置</p>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">127.0.0.1:6379&gt; config get dir
1<span style="color:#666">)</span> <span style="color:#b44">&#34;dir&#34;</span>
2<span style="color:#666">)</span> <span style="color:#b44">&#34;/var/lib/redis&#34;</span>	<span style="color:#080;font-style:italic"># 如果在这个目录下存在dump.rdb文件，启动就会自动恢复其中的数据</span>
</code></pre></td></tr></table>
</div>
</div></li>
</ol>
<p><strong>优点：</strong></p>
<ol>
<li>适合大规模的数据恢复</li>
<li>对数据的完整性要求不高</li>
</ol>
<p><strong>缺点：</strong></p>
<ol>
<li>需要一定的时间间隔进行操作，如果redis意外宕机了，这个最后一次修改的数据就没有了。</li>
<li>fork进程的时候，会占用一定的内容空间。</li>
</ol>
<h3 id="aofappend-only-file">AOF（Append Only File）</h3>
<p>将我们的所有命令都记录下来，history，恢复的时候就把这个文件全部再执行一遍</p>
<blockquote>
<p>是什么？</p>
</blockquote>
<p>在主从复制中，rdb就是备用的</p>
<p><img src="https://gitee.com/aszh/Gitee-Pages/raw/master/img/20210618164143.png" alt="image-20210618164142880"></p>
<p>以日志的形式来记录每个写操作，将Redis执行的所有指令记录下来（读操作不记录），只许追加文件但不可以改写文件，Redis启动之初会读取该文件重新构建数据，换言之，redis重启的话就根据日志文件的内容将写指令从前到后执行一次以完成数据恢复工作</p>
<p>==aof保存的文件是appendonly.aof文件==</p>
<p><img src="https://gitee.com/aszh/Gitee-Pages/raw/master/img/20210618165749.png" alt="image-20210618165748328"></p>
<p>默认是不开启的，我们需要手动进行配置！我们只需要将appendonly 改为 yes 就开始了aof</p>
<p>重启，redis就可以生效了！</p>
<p>如果这个aof文件有错位，这时候redis是启动不起来的，我们需要修复这个aof文件</p>
<p>redis 给我们提供了一个工具 <code>redis-check-aof --fix</code></p>
<p>如果文件正常，重启就可以直接恢复了</p>
<blockquote>
<p>重写规则</p>
</blockquote>
<p>aof默认就是文件的无限追加，文件会越来越大！</p>
<p><img src="https://gitee.com/aszh/Gitee-Pages/raw/master/img/20210618171350.png" alt="image-20210618171350032"></p>
<p>如果aof文件大于64m, 太大了！fork一个新的进程来将我们的文件进行重写！</p>
<blockquote>
<p>优点和缺点</p>
</blockquote>
<pre><code>appendonly no	# 默认不开启aof模式的，默认是使用rdb方式持久化的，在大部分所有的情况下，rdb完全够用了
appendfilename &quot;appendonly.aof&quot; # 持久化的文件名

# appendfsync always	# 每次修改都会sync
appendfsync everysec 	# 每秒执行一次synx，可能会丢失这1s的数据
# appendfsync no		# 不执行sync，这个时候操作系统自己同步数据，速度最快！

# rewrite 		# 重写
</code></pre><p>优点：</p>
<ol>
<li>每一次修改都同步，文件的完整性会更好！</li>
<li>每秒同步一次，可能会丢失一秒的数据</li>
<li>从不同步，效率最高</li>
</ol>
<p>缺点：</p>
<ol>
<li>相对于数据文件来说，aof远远大于rdb，修复的速度也比rdb慢</li>
<li>Aof运行效率也要比rdb慢，所以我们redis默认的配置就是rdb持久化</li>
</ol>
<p><strong>扩展：</strong></p>
<p>1、RDB 持久化方式能够在指定的时间间隔内对你的数据进行快照存储</p>
<p>2、AOF 持久化方式记录每次对服务器写的操作，当服务器重启的时候会重新执行这些命令来恢复原始的数据。AOF命令以Redis 协议追加保存每次写的操作到文件末尾，Redis还能对AOF文件进行后台重写，使得AOF文件的体积不至于过大。</p>
<p>3、只做缓存，如果你只希望你的数据在服务器运行的时候存在，你也可以不使用任何持久化</p>
<p>4、同时开启两种持久化方式</p>
<ul>
<li>在这种情况下，当redis重启的时候会优先载入AOF文件来恢复原始的数据，因为在通常情况下AOF文件保存的数据集要比RDB文件保存的数据集要完整。</li>
<li>RDB 的数据不实时，同时使用两者时服务器重启也只会找AOF文件，那要不要只使用AOF呢？作者建议不要，因为RDB更适合用于备份数据库（AOF在不断变化不好备份），快速重启，而且不会有AOF可能潜在的Bug，留着作为一个万一的手段。</li>
</ul>
<p>5、性能建议</p>
<ul>
<li>因为RDB文件只用作后备用途，建议只在Slave上持久化RDB文件，而且只要15分钟备份一次就够了，只保留 save 900 1 这条规则。</li>
<li>如果启用 AOF ，好处是在最恶劣情况下也只会丢失不超过两秒数据，启动脚本较简单只load自己的AOF文件就可以了，代价一是带来了持续的IO，二是AOF rewrite 的最后将 rewrite 过程中产生的新数据写到新文件造成的阻塞几乎是不可避免的。只要硬盘许可，应该尽量减少AOF rewrite的频率，AOF重写的基础大小默认值64M太小了，可以设到5G以上，默认超过原大小100%大小重写可以改到适当的数值。</li>
<li>如果不启用 AOF ，仅靠 Master-Slave Repllcation 实现高可用性也可以，能省掉一大笔IO，也减少了rewrite时带来的系统波动。代价是如果Master/Slave 同时倒掉，会丢失十几分钟的数据，启动脚本也要比较两个 Master/Slave 中的 RDB文件，载入较新的那个，微博就是这种架构。</li>
</ul>

        </div>

        


        

<div class="post-archive">
    <h2>See Also</h2>
    <ul class="listing">
        
        <li><a href="/post/Docker/Docker-02/">Docker 底层实现原理及关键技术</a></li>
        
        <li><a href="/post/CircleCI/">使用CircleCI&#43;GitHub 进行CI/CD</a></li>
        
        <li><a href="/post/Golang/Golang-%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/">Golang 单元测试</a></li>
        
        <li><a href="/post/%E9%85%8D%E7%BD%AE%E5%9B%BE%E5%BA%8A/">linux 下安装配置 Typora &#43; gitee &#43; PicGo-Core 图床</a></li>
        
        <li><a href="/post/Docker/Docker-01/">容器的基础概念与操作</a></li>
        
    </ul>
</div>


        <div class="post-meta meta-tags">
            
            没有标签
            
        </div>
    </article>
    
    

    
    
    <div class="post bg-white">
      <script src="https://utteranc.es/client.js"
            repo= "aszhc/aszhc.github.io"
            issue-term="pathname"
            theme="github-light"
            crossorigin="anonymous"
            async>
      </script>
    </div>
    
</div>

                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://aszhc.github.io/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://aszhc.github.io">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://aszhc.github.io/post/Docker/Docker-02/" title="Docker 底层实现原理及关键技术">Docker 底层实现原理及关键技术</a>
    </li>
    
    <li>
        <a href="https://aszhc.github.io/post/CircleCI/" title="使用CircleCI&#43;GitHub 进行CI/CD">使用CircleCI&#43;GitHub 进行CI/CD</a>
    </li>
    
    <li>
        <a href="https://aszhc.github.io/post/Golang/Golang-%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/" title="Golang 单元测试">Golang 单元测试</a>
    </li>
    
    <li>
        <a href="https://aszhc.github.io/post/%E9%85%8D%E7%BD%AE%E5%9B%BE%E5%BA%8A/" title="linux 下安装配置 Typora &#43; gitee &#43; PicGo-Core 图床">linux 下安装配置 Typora &#43; gitee &#43; PicGo-Core 图床</a>
    </li>
    
    <li>
        <a href="https://aszhc.github.io/post/Docker/Docker-01/" title="容器的基础概念与操作">容器的基础概念与操作</a>
    </li>
    
    <li>
        <a href="https://aszhc.github.io/post/markdown%E4%B8%AD%E7%9A%84emoji%E5%9B%BE%E6%A0%87%E6%A0%87%E7%AD%BE%E8%A1%A8/" title="Markdown中的emoji图标标签表">Markdown中的emoji图标标签表</a>
    </li>
    
    <li>
        <a href="https://aszhc.github.io/post/Golang/Golang-struct-%E5%86%85%E5%AD%98%E5%AF%B9%E9%BD%90/" title="Golang Struct 内存对齐">Golang Struct 内存对齐</a>
    </li>
    
    <li>
        <a href="https://aszhc.github.io/post/Golang/Golang-Slice%E5%8E%9F%E7%90%86/" title="Golang Slice原理">Golang Slice原理</a>
    </li>
    
    <li>
        <a href="https://aszhc.github.io/post/Golang/Golang-Map%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/" title="Golang Map的实现原理">Golang Map的实现原理</a>
    </li>
    
    <li>
        <a href="https://aszhc.github.io/post/Golang/Golang%E4%B8%ADmake%E4%B8%8Enew%E6%9C%89%E4%BD%95%E5%8C%BA%E5%88%AB/" title="Golang中make与new有何区别？">Golang中make与new有何区别？</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">分类</h3>
<ul class="widget-list">
    
    <li><a href="https://aszhc.github.io/categories/CI/CD/">CI/CD (1)</a></li>
    
    <li><a href="https://aszhc.github.io/categories/Docker/">Docker (3)</a></li>
    
    <li><a href="https://aszhc.github.io/categories/%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/">安装与配置 (1)</a></li>
    
    <li><a href="https://aszhc.github.io/categories/%E5%B7%A5%E5%85%B7/">工具 (1)</a></li>
    
    <li><a href="https://aszhc.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库 (1)</a></li>
    
    <li><a href="https://aszhc.github.io/categories/%E7%AE%97%E6%B3%95/">算法 (5)</a></li>
    
    <li><a href="https://aszhc.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络 (1)</a></li>
    
    <li><a href="https://aszhc.github.io/categories/%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80/">语言基础 (5)</a></li>
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title">标签</h3>
<div class="tagcloud">
    
    <a href="https://aszhc.github.io/tags/Golang/">Golang</a>
    
    <a href="https://aszhc.github.io/tags/markdown/">markdown</a>
    
    <a href="https://aszhc.github.io/tags/markdown/">markdown</a>
    
    <a href="https://aszhc.github.io/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/">动态规划</a>
    
    <a href="https://aszhc.github.io/tags/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/">单元测试</a>
    
    <a href="https://aszhc.github.io/tags/%E5%93%88%E5%B8%8C/">哈希</a>
    
    <a href="https://aszhc.github.io/tags/%E5%9B%BE%E5%BA%8A/">图床</a>
    
    <a href="https://aszhc.github.io/tags/%E5%AE%B9%E5%99%A8%E5%8C%96/">容器化</a>
    
    <a href="https://aszhc.github.io/tags/%E6%95%B0%E7%BB%84/">数组</a>
    
    <a href="https://aszhc.github.io/tags/%E6%A0%88/">栈</a>
    
    <a href="https://aszhc.github.io/tags/%E7%AC%94%E8%AE%B0/">笔记</a>
    
    <a href="https://aszhc.github.io/tags/%E8%BF%90%E7%BB%B4/">运维</a>
    
    <a href="https://aszhc.github.io/tags/%E9%80%92%E5%BD%92/">递归</a>
    
    <a href="https://aszhc.github.io/tags/%E9%83%A8%E7%BD%B2/">部署</a>
    
    <a href="https://aszhc.github.io/tags/%E9%93%BE%E6%8E%A5/">链接</a>
    
    <a href="https://aszhc.github.io/tags/%E9%93%BE%E8%A1%A8/">链表</a>
    
    <a href="https://aszhc.github.io/tags/%E9%98%9F%E5%88%97/">队列</a>
    
    <a href="https://aszhc.github.io/tags/%E9%9B%86%E5%90%88/">集合</a>
    
</div>
    </section>

    
<section class="widget">
    <h3 class="widget-title">友情链接</h3>
    <ul class="widget-list">
        
        <li>
            <a target="_blank" href="https://blog.csdn.net/Andrew_ZhouC" title="我的CSDN博客">我的CSDN博客</a>
        </li>
        
        <li>
            <a target="_blank" href="https://github.com/aszhc" title="我的github">我的github</a>
        </li>
        
    </ul>
</section>

	
	<section class="widget">
        <h3 class="widget-title">公众号</h3>
		<ul class="widget-list">
        <li>
            
                <img src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJ%0AChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/%0A2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgo%0AKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCABkAGQDASIAAhEBAxEB/8QA%0AHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUF%0ABAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkK%0AFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1%0Adnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXG%0Ax8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEB%0AAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAEC%0AAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRom%0AJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOE%0AhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU%0A1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD6jvLqCytJ%0Arq8mjgtoEaSWWVgqRqBksxPAAHJJrmf+FkeB/wDocfDn/gzh/wDiqX4tf8kr%0A8Y/9ga8/9EPXzJ4h1rwv4C8B+AZJfAOgaxdarpKXE89zGFcsAuSTtOSc0AfT%0A9r8QfBt1cxW9r4s8PzTyuI4449RhZnYnAUANkknjFaE/ibQrddRafWtNiXTS%0Aq3pe6RRaljhRJk/JntnGa+Wmm0DxB4O8A+J9J8K6VoF7J4ytbN/sUYBKLk4L%0AYBwTg49hR8Vvhb8T9V8deLpvDlhM2g6xcI8iJfwxpcqgG3chcHg5xkUAfWwu%0AoDaC6E0ZtinmiXcNmzGd2emMc5rP0LxLoXiAzDQdZ03UzBt837HdJN5ec43b%0AScZwcZ9DXzl4E12bS7o2mg+LNS8aX9vamHUtC1APDBZW67RNIrP8rmMgIFXJ%0AIY4zWu0sOn6XqnjzwJptvovhXSkW6tWsMQpr6j5WSdOHQRuGA3LzuJFAHuVn%0A4s8O32qS6bZa9pVxqMJcSWsV3G8qbfvZQHIx3yOKdoXinQPEEssWha3pepyR%0AKGkWzu45igPQkKTgV87/ALLuu+F9d1TxC17BbQ+MtU1C7vIcQM0kdtIqEqJd%0AuMBi3BIPtzWbo/jbSPgX49PgoaRZS29vJFHe6+ylbiSKQCUlkQEnYJMAc8KK%0AAPrKsCTxn4Xi0qLU5fEejJps0hijumvYhE7jqofdgng8ZrhPFHxD8KeLPhvq%0A2oaN4yvdIsLWeGKbVLS1mEkLFlIULtDHd04HevKr7R/DS/D34X6ZoOpHX9Cn%0A8YRRvNcWzRCUM5DoUYA45I96APoP/hZPgf8A6HHw5/4M4f8A4qtHQ/FvhzXr%0At7XQ9f0nUrlEMrRWl5HM6oCAWIUk4yQM+4r5M+IHj/wn4V8a6zocXwu8MXEd%0AhcNAsrIFLgdyNvFepfD/AErTNJ/aSuI9E021021m8IpcGC2jCIGaeIk4H4fl%0AQB75RRRQBzHxRgmuvhp4st7WKSaeXSbuOOONSzOxhYAADkkntXzVcN4e8Q+E%0AfCmm+L/APxHlvdEsFsw9lp+xCcDcRk5IyOOBX1N4u1g+H/Cms6yIPtB06ymu%0AxCW2+Z5aFtucHGcYzg188+JvG/jrxppmmXGgS3PhbW72DztI0eCZLj+14jhn%0Ak80hVi2ICcNyelAGQ72kuneC/DHhDwX43sbSy8T22pyzarYEKq5KsdwJx1B5%0AGMA810/i3xF4l8UeIvHmi38X2zwXoc8EV5ZabCx1KZX5TySOCQ6gtkj5Qa5a%0A1+J/i7w1CPD3xF1O50XWtOP9ri5d1nbUkH3bIiMERh+f3mTjb0rM8ZN430/Q%0A5Pil4N1C5sdO8SD7ZqcEJjxZ7WEcSlmOZMlm5CjHegDufFF3puo+Jmi+G00M%0AfiiHw1tuZrx1e2SwUkPCwTLC5DFM5GMZya8b+Hfw7TxD4bija4mv9R1lTHp6%0A2EzPFpjqzBmvlA/dq/BXAOcGqfhHWNX+FvjW4uvFOmkz69pjIWedQViuHB8/%0A5Q2fuMdvB+lepeBCnwdTS5/BL/8ACdDxqxiteP7P2G3JHG/dnJkI5242980A%0Ad7oPiLXvDdjYTnQLtvD+iQJol5bxaeTe3N1GoU3EPQNbEY+YkHg8VB8YbbQ/%0AidoXiG2stM1S8udCs3vLHULRA1reymPhI5Fz5pB+UqOhBFN8N+OvF+jadrGm%0A+JNGk1DxleXst9ZaFLeIpTTmAGRMAUwpVxg4Y46VwFv458S6vpHgTSvB2jv4%0AE8O6pqLWtteWt2t0JN0hDjyyAww2484zQB1ng3WPGekeGfD3giRNIh8Tapp8%0ANxpJmtmEFvbxRjcl0CN3m4UjhSM964Twsl5H8Ffh1qNlpmoamumeK/ts8Nhb%0AtNJ5cbFjgD6YGcDJFeieHfFXgXwj4lupPHHj4eIPE+mzSWsV1cadNE9oBlJI%0AhtDKRnPNebeHrLxBoGntbeDviFeL4YuN0WiXEVkEXUdRb/l1CMd0ZLcb2+Wg%0ADS8TWHgTxJ4gv9Y1L4e/FI3l7KZpfLsQq7j6DdxXffDC+uPEHx6u9bh8Pa/p%0AGlx+GhYRtqtmYSXSeI4zyCce+eDV7xXdfFSH4W6JpeiaPc3Pia5tE+3aiL2F%0AJLSVXUkbTw+4BhkHAzWr8NLTVtG8cy6V4j+IV1r2qHS/tL6RNY+UIVLoPN8w%0AEqcHK4/2s0Aes0UUUAZviYTnw7qgs/sX2r7LL5X27/j337Djzf8AYz972zXz%0A9440JT4dTxN8W9RtrNtJjWPTI/Btx5bNDIyq2BIOeSv3SBtzX0Tqun2uraXd%0A6dqEQms7uF4J4ySN6MCrDI5GQT0rwvxp8JdE1Zf+EW1XxHbx6lcfL4Zia3bd%0Ap1rGQzxKA4835Vxuc5HWgDgfBvxL8a/EHVJY7fR/A0aQwkre61ZyKrqrBQnm%0Abjl/mzj2Ndf8Vdf/ALG8M+F7mS3i1PxVZxTeVY6LH5+kFiyBhPGDuxtOU/2g%0AT2rkvBuivqX7NZ06DwtN4nuf7ZuUhjhnMRtpPKZVuOPvbSfung7q0bHwv4i+%0AH/hPwhLol1L4NS+glbxPqckC3CwuhAgMiuSBksyjbj73OcUAcR+0ZdT6v8SP%0ADd5pltHeXUeiWkslvbRmRUcSSEoVXJABIGPeulsvDvi6K6XxzrOh3beIGIn0%0AXSdNjItrKVBscXELkGNWAVgEbJO4nFJ8NvsWifEqx0zwZdp4k1W6mN9qfiK1%0AHlgWbHElu0Jyo+cRvvBB+YDpXrkVi88m8JvB5Py5rzcwzD6ny+7e524TCLEc%0AzcrWOXh+FOk6x4gsb/V7jxjB4gv7IX1xcxXUa2ltK+We3yQXUBicJzwRzRZW%0AlnZ+IJNG8aaTrS69r6rZfaNFtx/ZNqTgLJas3zRsFK72xnduOOlV9a8U3Oie%0ANtPsAmnvotz+5kZ2AeObJ4Bz/u8Y711ut6zr9j4Q1mTwbptze6zMqwwrAVzC%0AzBsSgMCDt44PWjD491ZRi425vMdfBeyi5J7HkNl4JtviH8Qb6w8Q32maf4d8%0AL3M+jmSOdYL66EZYJK5YFZHJA3Nxnniq3ivxDqfxF+GEVo+n2/h3WNAml1iV%0AvIayt5I0RsLAcktMcg446daX4d+FYPiN8T7V9d8GTxQWQnt/Ec73LkXF/tYt%0AIwXb5ZL87V4GawfHWteIvEniQWE+uH4heGtC2atdm3t0tUMS/wCtBKDco2kq%0ATk9c4r0jhPQNJ+K/ivwT8KdHhvre11HWNTtI5dB8mKSfdEjDzftOWDbtpONu%0Aeete4eHL291Pxmt4snhyXTJNKXc0BzfrPuUsrdhEBnjrnFeAeFvHFj4a0WTx%0Af4k0MxNYBT4O0uW6KMtrJ+7mWOQL84CsCS4J44xXsvgH4X6X4d8ey+MdCK2d%0ApqGl+Q2nBWfEjukjSeYzHP3QMYFAHqNFFFAGJ441afQfBevavaJG9xp9hPdx%0ALKCUZo42YBsEHGRzgivAtU8Q+KfjL4RsZPA+n6ZDqsECLqGoSK9tcWkzEMVt%0AZd2QjBWU9cg4717z8QJrK38CeIptWtmu9Oj064e5t0coZYhGxdAw5BIyM+9f%0ALfgv4qeONG8X6JaWmiatL4OuI5G0nRI7VDLLarG3lhJSm9wnyktk5C8mgDZu%0AvG2peGPEVp4c+ItnF4a0/TjHqsbeE4nT7RKDgJNyQ0bLuLDAJIXmuK1r466l%0AF4w8Vf2Na2uvaBq88bw2msxSTJGqDgJHvAXJOSMfwg9q7a68feL/AIpapc2+%0AlaoPB/hK/gOnq2p20UkdzcMdjQLIVzvYMSADn5TitvSvhf4X+FviPwLrOpeI%0ANJ0u+sluTevczsn9oMU2gxh2wu3fzgDqKANXwT8PToeo2M9gttaaRNANae6R%0A1S8a6cc2nAGbXHOzGdwHPFYVt8RNRudGXTrPyYpbmHzPtsLr2+9lc/KBggZ5%0A5HFZHivxZoWp6/H8XL/TpbzStPn/AOEft7SObEn2hC0ouQwO0ptYjac9c1ye%0AheD9M1Cyg1a01HXbfRZNzJqF5om2CJNxB3yiXYMEEE9M1yYnD+1akt0dOHqx%0AinGezOT8SO1z4qhtIpWb7ECXlDlhv5YkHvzxmvqnwF4t0y0k/wBId99xdW9i%0AoRCf3khYLn06HmvAdW8AaJ4e8RWtrqHjxLWe/sxqMVxJYKIJImJ2ncZsHO04%0AHeu40uTR9J+Dl74nk8QJPd3Ba70WW5hFqRdW28JtjLtvYPk4OQeOKn6tJVIS%0AW0b/AImk68JQkur/AEOl+JGgLq3xu8O6FpOo6jodjqNpc3F/Jok32ZpZl3Nu%0AkKjBYkclgTXjPxR8YeJ/CviC10vUfDHhfRbi1ljuZl0i2aOO9jIz5E5DYkiY%0AfeQ9a9CsX8TQa94LsPA2sRaJqPjHSf7c1a5lt0nWe7Me95Nrg7M8/KmFGelc%0A3DF4m+JfgfRvEHj3xTZX2kR6iTBoptkgnv5Y8gwRPGFJeQblUDu1dpxEXwp+%0AJ3hdDrt58StIininmjfT7ddP8+2s48HckKvkRrnbwPSvbPgZ4M1fRJLrV/Ee%0Au6nc3t0siwWEl+ZraO2ZkaNwh5VxjHXABIqj4ih8PeJ/gHqHh2xvrTwzBaxW%0A0NxBfz7jphEyMsc2TkMduOecmuE/ZguvE3iP4pal4h17zb2yi0iTTIdRW3VI%0AX2TQlUBUAE4yfXFAH1PRRRQBynxa/wCSV+Mf+wNef+iHr5ej8A6hpfhzwR4y%0Av/F2vWnh2LTRJc38VwTLpnmKFSOBQd21mZVO0dDzX1b8QHsYvAfiN9Xilm01%0AdNuGuooW2u8QibeFPYlc4r5w1a88KeMNB8PxS/C/4iXem6baCCwltrZyrQnG%0ADuU4boOaAOX+Bdsdcsm0rRry41bU3ndpdPuyRDpsBZV/tGAt8ouVJGMfN8xr%0ArviHdrqXw1+Img6zBFql74MNpb2esXg827k86UF2LtkqSFA4PI60xrjwWfDu%0AieC9X+HvjnStGutXjNvLfRtAouZMoMuxGeCxwPQ+lV/Enw81T4da5faVZaNq%0AeveAfEb5vLLSreS4uo0hGYw0mPlJd89eQpoA4bxJ4v1TWPg3pbweEdE07wxZ%0A6xCry2uFNxdJCch4++5Ty2O2K9h8I+LIvGfgO28M+JNJsfC2keKI3tdDXSk3%0ACQq7ed8g4jw23qBncaq+OPgx4H0HwbFqlh4T8Uald3IVEs7J5JZoWdGYM6Do%0AFIAPuRXP+Etf+JHws8GeErnVdPuJfCamdrqyi01hc2cayEnzmZRs3FsqSelA%0AHYat4f8AG7xw6bJ8MfCet22m2406yv8AUJYXme3jyqMdxypI+bHYk1lTWmpe%0AAfhV8PvC+seEND13W7q/uLVLTUgkscbvK7KVblQSGGTmsT4teKPEOrePtE8Z%0A/DGxutUiOgpbzy2dqbxLZ3aRnhkKBlWRVdcqTkZHrXnnwX8HaLqdpqmpeN9O%0A1GSyNvu0pInaFtQnDENFbk4Er8Y2rk5oA9N+Nfiy/wDh546+Hmtpo9jDfWmi%0ANE+nIcQQMwKNGu3+FckDHHAr0nwn8NbnUtPu7vxFaQaDPPC8VppNhsa20yb+%0AG8twOEn77hgg968q8JeBpPCfjOxg0BH0/wAW63HJqGiPfBimn2hUloLlCMmU%0AJleAcN3rO+E3w48K638P9B1XWtB13Vr7U9Uawkk0532Wy7sCWQD7qDu1AHYa%0Az4H+Idn4jtk03w1p2saJal0uvtt5GBruR8k14hb946n5gWBIIBrS/ZHufEA0%0AfUrOfSbSDw8t1cut1HKN4ud0YMQTP3Quecdq5z4Z6Bo//CY/ED4aS6JrNz4f%0AvtQjjN3BuMVqsIaRRLL/AAlmUAep4ra/ZJ8WWEf9reBoLa4F1azXN+Jjgx+W%0AHjjC9c7uR2oA+j6KKKAOU+LX/JK/GP8A2Brz/wBEPXy58T/GfiPwr8PfhdF4%0Ad1m806OfRFaVYH2hyAmCfzr6z8caTPr3gvX9Is3iS51DT7i1iaUkIryRsoLE%0AAnGTzgGvHtF8GfGHSdC03SYrj4fT2unwLbwG5jnkYIowMkx+1AHA6br+q+JP%0AhP8ADy/12/nv7z/hOraPzpm3NtAbAz+NdPqnxp/4Qfxh8TINXvZL66t7m2XR%0A9NmLhGGD5oVgpCYDA84zjitfUvAHxR8Q3nh6LxBd+C49L0vVrfUzHp4njcmM%0A84zHgnaT6c45rvfiR8JvDPxCnsptdjuY5bXfta0dYy+/bncdpz90Y/GgDg/H%0A+oeIH8Y+HdbvfEt/4Y8G3lhagSW375Jb53LeQY1+f5k/jI2/L1rvtc8deBtQ%0A8Rz+A9YvY7jVLllt5NPktZWVyyhwpbZs5BB61kfG/wCHGo+NPh3pnhzw3c2l%0AvLY3UMqSXsjKPLjjdOqqx3fMO3rXnni74EeK9X8B+CtLs9R0ePWtH+1G8u3n%0AlHmmSQMm1xGWbAGOQMdqAOS8OeE/F2kfFzVvBcOtX3hLRr5rvVbZLN0lVoN7%0AKjbVbjKoBg4IC9K0/Ctl4Vtvh/4mPhnxrc+JJfD+nS32nRTWEluNNm+ZhNEX%0AA+Yt6V73c6H4jsPA2i2nh59GPiSztre1lub4O8bKigSYYLuOcHGQOvNZ978H%0AvDF145/4So/bYb8yRSNBDKEt38tVABj28g7RkZ55oA8+8K6JFquj+HYdY8b3%0A58e69p8Wo6Zftas89nCYw8saOPl2kbgckE56Vwf/AAgPxW8CfCtb/TNW1Kwk%0AtZJ57zS4rmER20CqztMGDkMTj7oyeelem/H74ReI/HuvaLfeFr7TLCOwtWty%0AJ5pImGWz8uxG4xx2p2ofCfxTBrHhzTdD1SwbwXpWpwai8d9cSteS4YGVGITa%0AykZAUkD1oA8b0PxPrfgv4U+KdS1jU7mx8S+Kmtb3SLkPvkulSQea+5chPlY8%0APtJzxmvpHwDZeBtH8Tpp+i2Vna+LZdKW8ufKt3V3gdk3MXxtOX28Zz7Vx3jn%0A4e/EfWPiDYa7pVx4OWy0gzJplvdLNxFIu0iRRGQTj0PWtr4d+CfG1n8Urvxd%0A43u/D8xl0k6aiaWZRj96jqdroBjCt39OKAPXqKKKACiiigAooooAKKKKACii%0AigAooooAKKKKACiiigD/2Q==">
           
        </li>
    </ul>
    </section>
	
    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://aszhc.github.io/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
    <footer id="footer">
    <div class="container">
        &copy; 2021 <a href="https://aszhc.github.io">PHOENIX By 周闖</a>.
        Powered by <a rel="nofollow noreferer noopener" href="https://gohugo.io" target="_blank">Hugo</a>.
        <a href="https://www.flysnow.org/" target="_blank"></a>         	</a>.
        
    </div>
</footer>


    
    <script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>


<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




    <script src='/js/douban.js'></script>

</body>

</html>