<!doctype html>
<html lang="zh-CN">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Mysql必知必会 | 周闖的博客</title>
    <meta property="og:title" content="Mysql必知必会 - 周闖的博客">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content='2021-01-29T13:41:13&#43;08:00'>
        
        
    <meta property="article:modified_time" content='2021-01-29T13:41:13&#43;08:00'>
        
    <meta name="Keywords" content="golang,go语言,go语言笔记,博客,项目管理,python,公众号">
    <meta name="description" content="Mysql必知必会">
        
    <meta name="author" content="周闖">
    <meta property="og:url" content="https://aszhc.github.io/tools/mysql%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A/">
    <link rel="shortcut icon" href="logo.ico" type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-4031353640611810",
        enable_page_level_ads: true
    });
    </script>
    


    
    
        <link rel="stylesheet" href='/css/douban.css'>
    
        <link rel="stylesheet" href='/css/other.css'>
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://aszhc.github.io">
                        周闖的博客
                    </a>
                
                <p class="description">Golang</p>
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="" href="https://aszhc.github.io">首页</a>
                    
                    <a  href="https://aszhc.github.io/tools/" title="搜集">搜集</a>
                    
                    <a  href="https://aszhc.github.io/archives/" title="归档">归档</a>
                    
                    <a  href="https://aszhc.github.io/about/" title="关于">关于</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    <style type="text/css">
    .post-toc {
        position: fixed;
        width: 200px;
        margin-left: -210px;
        padding: 5px 10px;
        font-family: Athelas, STHeiti, Microsoft Yahei, serif;
        font-size: 12px;
        border: 1px solid rgba(0, 0, 0, .07);
        border-radius: 5px;
        background-color: rgba(255, 255, 255, 0.98);
        background-clip: padding-box;
        -webkit-box-shadow: 1px 1px 2px rgba(0, 0, 0, .125);
        box-shadow: 1px 1px 2px rgba(0, 0, 0, .125);
        word-wrap: break-word;
        white-space: nowrap;
        -webkit-box-sizing: border-box;
        box-sizing: border-box;
        z-index: 999;
        cursor: pointer;
        max-height: 70%;
        overflow-y: auto;
        overflow-x: hidden;
    }

    .post-toc .post-toc-title {
        width: 100%;
        margin: 0 auto;
        font-size: 20px;
        font-weight: 400;
        text-transform: uppercase;
        text-align: center;
    }

    .post-toc .post-toc-content {
        font-size: 15px;
    }

    .post-toc .post-toc-content>nav>ul {
        margin: 10px 0;
    }

    .post-toc .post-toc-content ul {
        padding-left: 20px;
        list-style: square;
        margin: 0.5em;
        line-height: 1.8em;
    }

    .post-toc .post-toc-content ul ul {
        padding-left: 15px;
        display: none;
    }

    @media print,
    screen and (max-width:1057px) {
        .post-toc {
            display: none;
        }
    }
</style>
<div class="post-toc" style="position: absolute; top: 188px;">
    <h2 class="post-toc-title">文章目录</h2>
    <div class="post-toc-content">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#第一章了解sql">第一章：了解SQL</a></li>
    <li><a href="#第二章mysql简介">第二章：MySQL简介</a></li>
    <li><a href="#第三章使用mysql">第三章：使用MySQL</a></li>
    <li><a href="#第四章检索数据">第四章：检索数据</a>
      <ul>
        <li><a href="#检索单个列">检索单个列</a></li>
        <li><a href="#检索多个列">检索多个列</a></li>
        <li><a href="#检索所有列">检索所有列</a></li>
        <li><a href="#使用distinct去重">使用DISTINCT去重</a></li>
        <li><a href="#限制结果">限制结果</a></li>
        <li><a href="#使用完全限定的表名">使用完全限定的表名</a></li>
      </ul>
    </li>
    <li><a href="#第五章排序检索数据">第五章：排序检索数据</a>
      <ul>
        <li><a href="#排序数据">排序数据</a></li>
        <li><a href="#按多个列排序">按多个列排序</a></li>
        <li><a href="#指定排序方向">指定排序方向</a></li>
      </ul>
    </li>
    <li><a href="#第六章过滤数据">第六章：过滤数据</a>
      <ul>
        <li><a href="#使用where子句">使用WHERE子句</a></li>
        <li><a href="#where子句操作符">WHERE子句操作符</a></li>
      </ul>
    </li>
    <li><a href="#第七章数据过滤">第七章：数据过滤</a>
      <ul>
        <li><a href="#组合where子句">组合WHERE子句</a></li>
        <li><a href="#in操作符">IN操作符</a></li>
        <li><a href="#not操作符">NOT操作符</a></li>
      </ul>
    </li>
    <li><a href="#第八章用通配符进行过滤">第八章：用通配符进行过滤</a>
      <ul>
        <li><a href="#like操作符">LIKE操作符</a></li>
        <li><a href="#使用通配符的技巧">使用通配符的技巧</a></li>
      </ul>
    </li>
    <li><a href="#第九章用正则表达式进行搜索">第九章：用正则表达式进行搜索</a></li>
    <li><a href="#第十章创建计算字段">第十章：创建计算字段</a>
      <ul>
        <li><a href="#拼接字段">拼接字段</a></li>
        <li><a href="#执行算术计算">执行算术计算</a></li>
      </ul>
    </li>
    <li><a href="#第十一章使用数据处理函数">第十一章：使用数据处理函数</a>
      <ul>
        <li><a href="#文本处理函数">文本处理函数</a></li>
        <li><a href="#日期和时间处理函数">日期和时间处理函数</a></li>
        <li><a href="#数值处理函数">数值处理函数</a></li>
      </ul>
    </li>
    <li><a href="#第十二章汇总数据">第十二章：汇总数据</a>
      <ul>
        <li><a href="#聚集函数">聚集函数</a></li>
        <li><a href="#聚集不同值">聚集不同值</a></li>
        <li><a href="#组合聚集函数">组合聚集函数</a></li>
      </ul>
    </li>
    <li><a href="#第十三章分组数据">第十三章：分组数据</a>
      <ul>
        <li><a href="#创建分组">创建分组</a></li>
        <li><a href="#过滤分组">过滤分组</a></li>
        <li><a href="#分组和排序">分组和排序</a></li>
        <li><a href="#select-子句顺序">SELECT 子句顺序</a></li>
      </ul>
    </li>
    <li><a href="#第十四章使用子查询">第十四章：使用子查询</a>
      <ul>
        <li><a href="#子查询作为where子句的条件">子查询作为WHERE子句的条件</a></li>
        <li><a href="#子查询结果作为计算字段">子查询结果作为计算字段</a></li>
      </ul>
    </li>
    <li><a href="#第十五章联结表">第十五章：联结表</a>
      <ul>
        <li><a href="#创建联结">创建联结</a></li>
        <li><a href="#内部联结">内部联结</a></li>
        <li><a href="#联结多个表">联结多个表</a></li>
        <li><a href="#使用联结来替代子查询">使用联结来替代子查询</a></li>
      </ul>
    </li>
    <li><a href="#第十六章创建高级联结">第十六章：创建高级联结</a>
      <ul>
        <li><a href="#使用表别名">使用表别名</a></li>
      </ul>
    </li>
    <li><a href="#第十七章组合查询">第十七章：组合查询</a>
      <ul>
        <li><a href="#使用union">使用UNION</a></li>
      </ul>
    </li>
    <li><a href="#第十八章全文本搜索">第十八章：全文本搜索</a>
      <ul>
        <li><a href="#启用全文本支持">启用全文本支持</a></li>
        <li><a href="#进行全文本搜索">进行全文本搜索</a></li>
        <li><a href="#使用查询扩展">使用查询扩展</a></li>
        <li><a href="#布尔文本搜索">布尔文本搜索</a></li>
      </ul>
    </li>
    <li><a href="#第十九章插入数据">第十九章：插入数据</a>
      <ul>
        <li><a href="#插入检索出的数据">插入检索出的数据</a></li>
      </ul>
    </li>
    <li><a href="#第二十章更新和删除数据">第二十章：更新和删除数据</a>
      <ul>
        <li><a href="#更新数据">更新数据</a></li>
        <li><a href="#删除数据">删除数据</a></li>
      </ul>
    </li>
    <li><a href="#第二十一章创建和操纵表">第二十一章：创建和操纵表</a>
      <ul>
        <li><a href="#创建表">创建表</a></li>
        <li><a href="#更新表">更新表</a></li>
        <li><a href="#删除表">删除表</a></li>
        <li><a href="#重命名表">重命名表</a></li>
      </ul>
    </li>
    <li><a href="#第二十二章使用视图">第二十二章：使用视图</a>
      <ul>
        <li><a href="#视图主要用途">视图主要用途：</a></li>
        <li><a href="#视图的规则和限制">视图的规则和限制</a></li>
        <li><a href="#常见的视图操作语句">常见的视图操作语句</a></li>
        <li><a href="#使用视图简化复杂的联结">使用视图简化复杂的联结</a></li>
        <li><a href="#用视图重新格式化检索出的数据">用视图重新格式化检索出的数据：</a></li>
        <li><a href="#用视图过滤不想要的数据">用视图过滤不想要的数据</a></li>
        <li><a href="#更新视图">更新视图</a></li>
      </ul>
    </li>
    <li><a href="#第二十三章使用存储过程">第二十三章：使用存储过程</a>
      <ul>
        <li><a href="#创建存储过程">创建存储过程</a></li>
        <li><a href="#删除存储过程">删除存储过程</a></li>
        <li><a href="#使用参数">使用参数</a></li>
        <li><a href="#建立智能存储过程">建立智能存储过程</a></li>
        <li><a href="#检查存储过程">检查存储过程</a></li>
      </ul>
    </li>
    <li><a href="#第二十四章使用游标">第二十四章：使用游标</a>
      <ul>
        <li><a href="#创建游标">创建游标</a></li>
        <li><a href="#打开和关闭游标">打开和关闭游标</a></li>
        <li><a href="#使用游标数据">使用游标数据</a></li>
      </ul>
    </li>
    <li><a href="#第二十五章使用触发器">第二十五章：使用触发器</a>
      <ul>
        <li><a href="#创建触发器">创建触发器</a></li>
        <li><a href="#删除触发器">删除触发器</a></li>
        <li><a href="#insert触发器">INSERT触发器</a></li>
        <li><a href="#delete触发器">DELETE触发器</a></li>
        <li><a href="#update触发器">UPDATE触发器</a></li>
        <li><a href="#注意事项-3">注意事项：</a></li>
      </ul>
    </li>
    <li><a href="#第二十六章管理事务处理">第二十六章：管理事务处理</a>
      <ul>
        <li><a href="#控制事务处理">控制事务处理</a></li>
        <li><a href="#使用rollback">使用ROLLBACK</a></li>
        <li><a href="#使用commit">使用COMMIT</a></li>
        <li><a href="#使用保留点">使用保留点</a></li>
        <li><a href="#创建占位符">创建占位符</a></li>
        <li><a href="#更改默认的提交行为">更改默认的提交行为</a></li>
      </ul>
    </li>
    <li><a href="#第二十七章全球化和本地化">第二十七章：全球化和本地化</a>
      <ul>
        <li><a href="#使用字符集和校对顺序">使用字符集和校对顺序</a></li>
        <li><a href="#给表指定字符集和校对">给表指定字符集和校对</a></li>
        <li><a href="#对列指定字符集和校对">对列指定字符集和校对</a></li>
        <li><a href="#查询时指定校对顺序">查询时指定校对顺序</a></li>
      </ul>
    </li>
    <li><a href="#第二十八章安全管理">第二十八章：安全管理</a>
      <ul>
        <li><a href="#创建用户账号">创建用户账号</a></li>
        <li><a href="#重新命名一个用户账号">重新命名一个用户账号</a></li>
        <li><a href="#删除用户账号">删除用户账号</a></li>
        <li><a href="#设置访问权限">设置访问权限</a></li>
        <li><a href="#grant语句">GRANT语句</a></li>
        <li><a href="#revoke">REVOKE</a></li>
        <li><a href="#注意事项-4">注意事项</a></li>
      </ul>
    </li>
    <li><a href="#第二十九章数据库维护">第二十九章：数据库维护</a>
      <ul>
        <li><a href="#数据库维护">数据库维护</a></li>
        <li><a href="#诊断启动问题">诊断启动问题</a></li>
      </ul>
    </li>
    <li><a href="#第三十章改善性能">第三十章：改善性能</a>
      <ul>
        <li><a href="#改善性能的一些方法">改善性能的一些方法：</a></li>
      </ul>
    </li>
    <li><a href="#数据库样例表">数据库样例表</a></li>
  </ul>
</nav>
    </div>
</div>
<script type="text/javascript">
    $(document).ready(function () {
        var postToc = $(".post-toc");
        if (postToc.length) {
            var leftPos = $("#main").offset().left;
            if(leftPos<220){
                postToc.css({"width":leftPos-10,"margin-left":(0-leftPos)})
            }

            var t = postToc.offset().top - 20,
                a = {
                    start: {
                        position: "absolute",
                        top: t
                    },
                    process: {
                        position: "fixed",
                        top: 20
                    },
                };
            $(window).scroll(function () {
                var e = $(window).scrollTop();
                e < t ? postToc.css(a.start) : postToc.css(a.process)
            })
        }
    })
</script>
    <article class="post">
        <header>
            <h1 class="post-title">Mysql必知必会</h1>
        </header>
        <date class="post-meta meta-date">
            2021年1月29日
        </date>
        
        <div class="post-meta">
            <span>|</span>
            
            <span class="meta-category"><a href='https://aszhc.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93'>数据库</a></span>
            
        </div>
        
        
        <div class="post-meta">
            <span id="busuanzi_container_page_pv">|<span id="busuanzi_value_page_pv"></span><span>
                    阅读</span></span>
        </div>
        
        
        <div class="post-content">
            <h2 id="第一章了解sql">第一章：了解SQL</h2>
<p>本章介绍数据库和SQL</p>
<p>数据库（database）：保存有组织的数据和容器（通常是一个文件或一组数据）</p>
<p>表（table）：某种特定类型数据的结构化清单</p>
<p>模式（schema）：关于数据库和表的布局及特性的信息</p>
<p>列（column）：表中的一个字段。所有表都是由一个或多个列组成的</p>
<p>数据类型（datatype）：所容许的数据类型。每个表列都有相应的数据类型，它限制（或容许）该列中存储的数据。</p>
<p>行（row)：表中的一个记录。</p>
<p>主键（primary key）一列（或一组列），其值能够唯一区分表中每一行</p>
<h2 id="第二章mysql简介">第二章：MySQL简介</h2>
<p>DBMS(数据库管理软件)通常分为两类：</p>
<p>1.基于共享文件系统的DBMS。通常用于桌面(例如Microsoft Access和FileMaker)</p>
<p>2.Client-Sever的DBMS。日常见到的MySQL，Oracle，SQL Server数据库都是这种类型的。Client主要负责与用户进行交互，接受用户的指令，然后发出请求给Server，Server负责数据访问和处理，然后将结果返回给Client。</p>
<h2 id="第三章使用mysql">第三章：使用MySQL</h2>
<p>主要介绍了一些MySQL的一些命令</p>
<p>use crashcourse;选择一个名叫crashcourse数据库(在通过命令行连接到数据库时，我们需要选择一个数据库，然后才能继续操作)</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">show</span> <span style="color:#66d9ef">databases</span>;<span style="color:#f92672">//</span><span style="color:#960050;background-color:#1e0010">展示当前可用的数据库列表</span>

<span style="color:#66d9ef">show</span> <span style="color:#66d9ef">tables</span>;<span style="color:#f92672">//</span><span style="color:#960050;background-color:#1e0010">展示当前是选择的是数据库的所有表</span>

<span style="color:#66d9ef">show</span> columns <span style="color:#66d9ef">from</span> customers;<span style="color:#f92672">//</span><span style="color:#960050;background-color:#1e0010">展示</span><span style="color:#a6e22e">customers表所有的列信息</span>(<span style="color:#960050;background-color:#1e0010">会包含字段名，类型，是否允许为</span><span style="color:#66d9ef">NULL</span><span style="color:#960050;background-color:#1e0010">，键信息，默认值，其他信息</span>)<span style="color:#960050;background-color:#1e0010">，</span>

</code></pre></td></tr></table>
</div>
</div><p>HELP SHOW；当你不了解某个命令时，可以使用HELP+这个命令，来获得一些说明信息，了解这个命令的用途，这里HELP SHOW会打印出SHOW命令的用法</p>
<h2 id="第四章检索数据">第四章：检索数据</h2>
<blockquote>
<p>本章将介绍如何使用SELECT语句从表中检索一个或多个数据列。</p>
</blockquote>
<h3 id="检索单个列">检索单个列</h3>
<p>查询时默认数据顺序</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> prod_name <span style="color:#66d9ef">FROM</span> products;
</code></pre></td></tr></table>
</div>
</div><p>如果是不设置任何排序条件，以这种方式来进行查询，返回的数据的顺序是根据它们在底层表中出现的顺序(可以是数据最初添加到表中的顺序，但是如果数据进行过更新或删除，顺序会受到MySQL重用回收存储空间的影响)</p>
<h3 id="检索多个列">检索多个列</h3>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> prod_id,prod_name,prod_price <span style="color:#66d9ef">FROM</span> products;
</code></pre></td></tr></table>
</div>
</div><h3 id="检索所有列">检索所有列</h3>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> products;
</code></pre></td></tr></table>
</div>
</div><h3 id="使用distinct去重">使用DISTINCT去重</h3>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">DISTINCT</span> vend_id <span style="color:#66d9ef">FROM</span> products;
</code></pre></td></tr></table>
</div>
</div><p>如果想要对让返回的数据不包含重复值，可以使用DISTINCT来对列进行修饰</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">DISTINCT</span> vend_id<span style="color:#960050;background-color:#1e0010">，</span>prod_price <span style="color:#66d9ef">FROM</span> products;
</code></pre></td></tr></table>
</div>
</div><p>DISTINCT关键字是对所有字段进行修饰的，只有当所有列都相同时，才会进行排除，在上面这个例子中，只有vend_id和prod_price都相同的数据，才会进行排除，也就是可以允许一些vend_id相同，prod_price不同的数据出现。</p>
<h3 id="限制结果">限制结果</h3>
<p>SELECT语句返回所有匹配的行，它们可能是指定表中的每个行。为了返回第一行或前几行，可使用LIMIT子句。</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> prod_name <span style="color:#66d9ef">FROM</span> products <span style="color:#66d9ef">LIMIT</span> <span style="color:#ae81ff">5</span>;
</code></pre></td></tr></table>
</div>
</div><p>可以限制返回的数据为5条</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> prod_name <span style="color:#66d9ef">FROM</span> products <span style="color:#66d9ef">LIMIT</span> <span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">5</span>;
</code></pre></td></tr></table>
</div>
</div><p>可以限制返回的数据是从第4行开始后面的5条</p>
<p>上面这条查询语句，MySQL 5以后还支持另外一种更加容易理解的写法</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> prod_name <span style="color:#66d9ef">FROM</span> products <span style="color:#66d9ef">LIMIT</span> <span style="color:#ae81ff">4</span> offset <span style="color:#ae81ff">5</span>;

</code></pre></td></tr></table>
</div>
</div><h3 id="使用完全限定的表名">使用完全限定的表名</h3>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> products.prod_name <span style="color:#66d9ef">FROM</span> crash_course.products;
</code></pre></td></tr></table>
</div>
</div><p>可以限制在某个数据库的某个表中进行查询，上面的例子是限制了，必须在crash_course数据库的products表取prod_name列的数据</p>
<h2 id="第五章排序检索数据">第五章：排序检索数据</h2>
<blockquote>
<p>本章将讲授如何使用SELECT语句的ORDER BY子句，根据需要排序检索出的数据。</p>
</blockquote>
<h3 id="排序数据">排序数据</h3>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> prod_name <span style="color:#66d9ef">FROM</span> products <span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> product_name;
</code></pre></td></tr></table>
</div>
</div><h3 id="按多个列排序">按多个列排序</h3>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> prod_id, prod_price, prod_name <span style="color:#66d9ef">FROM</span> products <span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> prod_price, prod_name;
</code></pre></td></tr></table>
</div>
</div><p>在 ORDER BY 指定多个字段，可以按规定的顺序，按多个列排序，例子中的数据会先根据 product_price 从低到高进行排序，如果 product_price相同，再按 product_name ，就进行比较从A到Z进行排序</p>
<h3 id="指定排序方向">指定排序方向</h3>
<p>默认的排序方向是升序，也就是ASC，有时候需要进行降序排序，例如价格从高到低进行排序，可以使用降序DESC</p>
<h2 id="第六章过滤数据">第六章：过滤数据</h2>
<h3 id="使用where子句">使用WHERE子句</h3>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> prod_name, prod_price <span style="color:#66d9ef">FROM</span> products <span style="color:#66d9ef">WHERE</span> prod_price <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>.<span style="color:#ae81ff">50</span>;
</code></pre></td></tr></table>
</div>
</div><h3 id="where子句操作符">WHERE子句操作符</h3>
<table>
<thead>
<tr>
<th align="center">操作符</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">=</td>
<td align="center">等于</td>
</tr>
<tr>
<td align="center">!=  或  &lt;&gt;</td>
<td align="center">不等于</td>
</tr>
<tr>
<td align="center">&lt;</td>
<td align="center">小于</td>
</tr>
<tr>
<td align="center">&gt;</td>
<td align="center">大于</td>
</tr>
<tr>
<td align="center">&lt;=</td>
<td align="center">小于等于</td>
</tr>
<tr>
<td align="center">&gt;=</td>
<td align="center">大于等于</td>
</tr>
<tr>
<td align="center">BETWEEN</td>
<td align="center">在指定两个值之间</td>
</tr>
</tbody>
</table>
<h4 id="检查单个值">检查单个值</h4>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> prod_name, prod_price <span style="color:#66d9ef">FROM</span> products <span style="color:#66d9ef">WHERE</span> prod_name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;fuses&#39;</span>;

<span style="color:#66d9ef">SELECT</span> prod_name, prod_price <span style="color:#66d9ef">FROM</span> products <span style="color:#66d9ef">WHERE</span> prod_price <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">10</span>;
</code></pre></td></tr></table>
</div>
</div><h4 id="不匹配检查">不匹配检查</h4>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> vend_id, prod_name <span style="color:#66d9ef">FROM</span> products <span style="color:#66d9ef">WHERE</span> vend_id <span style="color:#f92672">&lt;&gt;</span> <span style="color:#ae81ff">1003</span>;
</code></pre></td></tr></table>
</div>
</div><h4 id="范围值检查">范围值检查</h4>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> prod_name, prod_price <span style="color:#66d9ef">FROM</span> products <span style="color:#66d9ef">WHERE</span> prod_price <span style="color:#66d9ef">BETWEEN</span> <span style="color:#ae81ff">5</span> <span style="color:#66d9ef">AND</span> <span style="color:#ae81ff">10</span>;
<span style="color:#75715e"># 包括5和10
</span></code></pre></td></tr></table>
</div>
</div><h4 id="空值检查">空值检查</h4>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> prod_name <span style="color:#66d9ef">FROM</span> products <span style="color:#66d9ef">WHERE</span> prod_price <span style="color:#66d9ef">IS</span> <span style="color:#66d9ef">NULL</span>;
</code></pre></td></tr></table>
</div>
</div><h2 id="第七章数据过滤">第七章：数据过滤</h2>
<blockquote>
<p>本章讲授如何组合WHERE子句以建立功能更强的更高级的搜索条件。
我们还将学习如何使用NOT和IN操作符。</p>
</blockquote>
<h3 id="组合where子句">组合WHERE子句</h3>
<h4 id="and操作符">AND操作符</h4>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> prod_id, prod_price, prod_name <span style="color:#66d9ef">FROM</span> products <span style="color:#66d9ef">WHERE</span> vend_id <span style="color:#f92672">=</span> <span style="color:#ae81ff">1003</span> <span style="color:#66d9ef">AND</span> prod_price <span style="color:#f92672">&lt;=</span> <span style="color:#ae81ff">10</span>;
</code></pre></td></tr></table>
</div>
</div><p>AND 用在WHERE子句中的关键字，用来指示检索满足所有给定条件的行。</p>
<h4 id="or操作符">OR操作符</h4>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> prod_name, prod_price <span style="color:#66d9ef">FROM</span> products <span style="color:#66d9ef">WHERE</span> vend_id <span style="color:#f92672">=</span> <span style="color:#ae81ff">1002</span> <span style="color:#66d9ef">OR</span> vend_id <span style="color:#f92672">=</span> <span style="color:#ae81ff">1003</span>;
</code></pre></td></tr></table>
</div>
</div><h4 id="计算次序">计算次序</h4>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> prod_name, prod_price 
<span style="color:#66d9ef">FROM</span> products 
<span style="color:#66d9ef">WHERE</span> vend_id <span style="color:#f92672">=</span> <span style="color:#ae81ff">1002</span> <span style="color:#66d9ef">OR</span> vend_id <span style="color:#f92672">=</span> <span style="color:#ae81ff">1003</span> <span style="color:#66d9ef">AND</span> prod_price <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">10</span>;
</code></pre></td></tr></table>
</div>
</div><p>组合AND和OR使用时，因为AND优先级最高计算时会优先处理AND操作符。IN取合法值的由逗号分隔的清单，全都括在圆括号中。</p>
<h3 id="in操作符">IN操作符</h3>
<p>IN操作符用来指定条件范围，范围中的每个条件都可以进行匹配。</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> prod_name, prod_price
<span style="color:#66d9ef">FROM</span> products
<span style="color:#66d9ef">WHERE</span> vend_id <span style="color:#66d9ef">IN</span> (<span style="color:#ae81ff">1002</span>,<span style="color:#ae81ff">1003</span>)
<span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> prod_name;
</code></pre></td></tr></table>
</div>
</div><h3 id="not操作符">NOT操作符</h3>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> prod_name, prod_price
<span style="color:#66d9ef">FROM</span> products
<span style="color:#66d9ef">WHERE</span> vend_id <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">IN</span> (<span style="color:#ae81ff">1002</span>,<span style="color:#ae81ff">1003</span>)
<span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> prod_name;
</code></pre></td></tr></table>
</div>
</div><h2 id="第八章用通配符进行过滤">第八章：用通配符进行过滤</h2>
<blockquote>
<p>这一章主要是介绍了LIKE操作符，以及%，_ 这两个通配符。</p>
</blockquote>
<p>通配符：用来匹配值的一部分的特殊字符。</p>
<h3 id="like操作符">LIKE操作符</h3>
<p>LIKE主要是配合通配符一起使用的，LIKE 操作符用于在 WHERE 子句中搜索列中的指定模式。</p>
<h4 id="百分号">百分号%</h4>
<p>%表示任何字符出现任意次数。例如，为了找出所有以词jet起头的产品，可使用以下SELECT语句：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> prod_id, prod_name
<span style="color:#66d9ef">FROM</span> products
<span style="color:#66d9ef">WHERE</span> prod_name <span style="color:#66d9ef">LIKE</span> <span style="color:#e6db74">&#39;jet%&#39;</span>;
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> prod_id, prod_name
<span style="color:#66d9ef">FROM</span> products
<span style="color:#66d9ef">WHERE</span> prod_name <span style="color:#66d9ef">LIKE</span> <span style="color:#e6db74">&#39;%anvil%&#39;</span>;
</code></pre></td></tr></table>
</div>
</div><p>&lsquo;%anvil%&lsquo;表示匹配任何位置包含文本anvil的值，而不论它之前或之后出现什么字符。</p>
<p>%还能匹配0个字符。%代表搜索模式中给定位置的0个、1个或多个字符。</p>
<h4 id="下划线_">下划线_</h4>
<p>下划线的用途与%一样，但下划线只匹配单个字符而不是多个字符。</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> prod_id, prod_name
<span style="color:#66d9ef">FROM</span> products
<span style="color:#66d9ef">WHERE</span> prod_name <span style="color:#66d9ef">LIKE</span> <span style="color:#e6db74">&#39;_ to anvil&#39;</span>;
</code></pre></td></tr></table>
</div>
</div><h3 id="使用通配符的技巧">使用通配符的技巧</h3>
<p>1.在能使用其他操作符的请款下，尽量不要使用通配符，因为它的搜索事件要比其他操作符的长</p>
<p>2.尽量不要把通配符用在搜索模式的开始处。放在搜索模式的开始处，搜索起来是最慢的。</p>
<p>3.仔细检查通配符的位置。如果放错地方，可能不会返回想要的数据。</p>
<h2 id="第九章用正则表达式进行搜索">第九章：用正则表达式进行搜索</h2>
<p>略</p>
<h2 id="第十章创建计算字段">第十章：创建计算字段</h2>
<p>本章介绍什么是计算字段，如何创建计算字段以及怎样从应用程序中使用别名引用它们。</p>
<p>某些场景下，存储在的表中的数据不是我们所需要的，我们需要对它进行转换、计算或格式化过，这就是计算字段的用途</p>
<p>字段（field）： 基本上与列（column）的意思相同，经常互换使用，不过数据库列一般称为列，而术语字段通常用在计算字段的连接上。</p>
<h3 id="拼接字段">拼接字段</h3>
<p>拼接（concatenate） 将值联结到一起构成单个值。</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> <span style="color:#a6e22e">Concat</span>(vend_name, <span style="color:#e6db74">&#39;(&#39;</span>, vend_country,<span style="color:#e6db74">&#39;)&#39;</span>)
<span style="color:#66d9ef">FROM</span> vendors
<span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> vend_name;

<span style="color:#75715e">/**
</span><span style="color:#75715e">+------------------------------------------+
</span><span style="color:#75715e">| Concat(vend_name, &#39;(&#39;, vend_country,&#39;)&#39;) |
</span><span style="color:#75715e">+------------------------------------------+
</span><span style="color:#75715e">| ACME(USA)                                |
</span><span style="color:#75715e">| Anvils R Us(USA)                         |
</span><span style="color:#75715e">| Furball Inc.(USA)                        |
</span><span style="color:#75715e">| Jet Set(England)                         |
</span><span style="color:#75715e">| Jouets Et Ours(France)                   |
</span><span style="color:#75715e">| LT Supplies(USA)                         |
</span><span style="color:#75715e">+------------------------------------------+
</span><span style="color:#75715e">**/</span>
</code></pre></td></tr></table>
</div>
</div><p>Trim()函数 ：去除字符串左右两边的空格 LTrim()函数 ：去除字符串左边的空格 RTrim()函数 ：去除字符串右边的空格 下面是使用RTrim()函数的例子</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> <span style="color:#a6e22e">Concat</span>(<span style="color:#a6e22e">RTrim</span>(vend_name), <span style="color:#e6db74">&#39;(&#39;</span>, <span style="color:#a6e22e">RTrim</span>(vend_country),<span style="color:#e6db74">&#39;)&#39;</span>)
<span style="color:#66d9ef">FROM</span> vendors
<span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> vend_name;
</code></pre></td></tr></table>
</div>
</div><h4 id="使用别名">使用别名</h4>
<p>我们使用Concat()函数拼接出来的字段是没有名字的，可以使用AS关键字给它赋予一个名字，当然当已有的字段包含不符合规定的字符时，也可以AS关键字给一个已有字段起别名。</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> <span style="color:#a6e22e">Concat</span>(<span style="color:#a6e22e">RTrim</span>(vend_name), <span style="color:#e6db74">&#39;(&#39;</span>, <span style="color:#a6e22e">RTrim</span>(vend_country),<span style="color:#e6db74">&#39;)&#39;</span>) <span style="color:#66d9ef">AS</span> vend_title
<span style="color:#66d9ef">FROM</span> vendors
<span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> vend_name;
</code></pre></td></tr></table>
</div>
</div><h3 id="执行算术计算">执行算术计算</h3>
<p>除了使用Concat()函数得到一个计算字符，也可以使用+，-，*，/计算得到一个字段。如图所示：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> prod_id,quantity,item_price,quantity<span style="color:#f92672">*</span>item_price <span style="color:#66d9ef">AS</span> expanded_price
<span style="color:#66d9ef">FROM</span> orderitems
<span style="color:#66d9ef">WHERE</span> order_num <span style="color:#f92672">=</span> <span style="color:#ae81ff">20005</span>;
</code></pre></td></tr></table>
</div>
</div><h2 id="第十一章使用数据处理函数">第十一章：使用数据处理函数</h2>
<blockquote>
<p>本章介绍什么是函数，MySQL支持何种函数，以及如何使用这些函数。</p>
</blockquote>
<h3 id="文本处理函数">文本处理函数</h3>
<table>
<thead>
<tr>
<th align="center">函数</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">Left()</td>
<td align="center">返回串左边的字符</td>
</tr>
<tr>
<td align="center">Length()</td>
<td align="center">返回串的长度</td>
</tr>
<tr>
<td align="center">Locate()</td>
<td align="center">找出串的一个子串</td>
</tr>
<tr>
<td align="center">Lower()</td>
<td align="center">将串转换为小写</td>
</tr>
<tr>
<td align="center">LTrim()</td>
<td align="center">去掉串左边的空格</td>
</tr>
<tr>
<td align="center">Right()</td>
<td align="center">返回串右边的字符</td>
</tr>
<tr>
<td align="center">RTrim()</td>
<td align="center">去掉串右边的空格</td>
</tr>
<tr>
<td align="center">Soundex()</td>
<td align="center">返回串的SOUNDEX值</td>
</tr>
<tr>
<td align="center">SubString()</td>
<td align="center">返回子串的字符</td>
</tr>
<tr>
<td align="center">Upper()</td>
<td align="center">将串转换为大写</td>
</tr>
</tbody>
</table>
<p>上面这些常见函数大家可能都能够理解，只有Soundex()不太常见，SOUNDEX是一个将任何文 本串转换为描述其语音表示的字母数字模式的算法。</p>
<p>假设有一个顾客的cust_contact值为Y.Lee，但是我们不知道Y.Lee，只知道这个顾客的名字的发音近似于Y.Lie，这个时候我们可以使用Soundex()将cust_contact列值转换为它的SOUNDEX值，因为Y.Lee和 Y.Lie发音相似，所以它们的SOUNDEX值匹配，因此可以查询到这个顾客。</p>
<h3 id="日期和时间处理函数">日期和时间处理函数</h3>
<p><img src="https://i.loli.net/2021/01/29/dWPBMLuXRTo5E79.png" alt="image-20210123134227001"></p>
<h3 id="数值处理函数">数值处理函数</h3>
<p><img src="https://i.loli.net/2021/01/29/J2l8Ky9O7V5HGzm.png" alt="image-20210123134438001"></p>
<h2 id="第十二章汇总数据">第十二章：汇总数据</h2>
<p>在日常开发中，我们除了获得检索得到的数据，还可以使用聚合函数对数据汇总，得到处理后的结果。</p>
<h3 id="聚集函数">聚集函数</h3>
<p>聚集函数（aggregate function） 运行在行组上，计算和返回单个值的函数。</p>
<p><img src="https://i.loli.net/2021/01/29/DmPfsz18TdUYbtQ.png" alt="image-20210123134732477"></p>
<h3 id="聚集不同值">聚集不同值</h3>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> <span style="color:#a6e22e">AVG</span>(<span style="color:#66d9ef">DISTINCT</span> prod_price) <span style="color:#66d9ef">AS</span> avg_price
<span style="color:#66d9ef">FROM</span> products
<span style="color:#66d9ef">WHERE</span> vend_Id <span style="color:#f92672">=</span> <span style="color:#ae81ff">1003</span>;
</code></pre></td></tr></table>
</div>
</div><h3 id="组合聚集函数">组合聚集函数</h3>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> <span style="color:#a6e22e">COUNT</span>(<span style="color:#f92672">*</span>) <span style="color:#66d9ef">AS</span> num_items,
				<span style="color:#a6e22e">MIN</span>(prod_price) <span style="color:#66d9ef">AS</span> price_min,
				<span style="color:#a6e22e">MAX</span>(prod_price) <span style="color:#66d9ef">AS</span> price_max,
				<span style="color:#a6e22e">AVG</span>(prod_price) <span style="color:#66d9ef">AS</span> price_avg
<span style="color:#66d9ef">FROM</span> products;
</code></pre></td></tr></table>
</div>
</div><h2 id="第十三章分组数据">第十三章：分组数据</h2>
<blockquote>
<p>这一章主要讲了如果使用GROUP BY 对数据进行分组。</p>
</blockquote>
<h3 id="创建分组">创建分组</h3>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> vend_id, <span style="color:#a6e22e">COUNT</span>(<span style="color:#f92672">*</span>) <span style="color:#66d9ef">AS</span> num_prods
<span style="color:#66d9ef">FROM</span> products
<span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> vend_id;
</code></pre></td></tr></table>
</div>
</div><h3 id="过滤分组">过滤分组</h3>
<p>如果要对分组进行过滤，我们可以使用WHERE语句对表中数据进行过滤后，然后使用GROUP BY进行分组，也可以在使用GROUP BY进行分组后，再使用HAVING语句过滤掉一些分组。</p>
<p>在过滤分组这方面，HAVING要比WHERE更加强大，比如我们想要对数据分组，并且得到数量大于2的组，那么WHERE就无法实现，只能用HAVING语句。</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> cust_id, <span style="color:#a6e22e">COUNT</span>(<span style="color:#f92672">*</span>) <span style="color:#66d9ef">AS</span> orders
<span style="color:#66d9ef">FROM</span> orders
<span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> cust_id
<span style="color:#66d9ef">HAVING</span> <span style="color:#a6e22e">COUNT</span>(<span style="color:#f92672">*</span>) <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">2</span>;
</code></pre></td></tr></table>
</div>
</div><h3 id="分组和排序">分组和排序</h3>
<p>使用GROUP BY在对数据进行分组后，输出的组的顺序通常是按从小到到大，从A到Z升序输出的，但是SQL规范并没有对此进行明确要求，所以有可能不是顺序的，可以使用ORDER BY来对分组进行升序或者降序排序。</p>
<p><img src="https://i.loli.net/2021/01/29/AiqrcEUZMaJyI2Q.png" alt="image-20210123141523152"></p>
<h3 id="select-子句顺序">SELECT 子句顺序</h3>
<p>在使用这些语句时，它们的先后顺序应该要按下面的表中顺序来写</p>
<p><img src="https://i.loli.net/2021/01/29/lTIrq3s1PvKQego.png" alt="image-20210123145050601"></p>
<h2 id="第十四章使用子查询">第十四章：使用子查询</h2>
<h3 id="子查询作为where子句的条件">子查询作为WHERE子句的条件</h3>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> cust_name, cust_contact
<span style="color:#66d9ef">FROM</span> customers
<span style="color:#66d9ef">WHERE</span> cust_id <span style="color:#66d9ef">IN</span> (<span style="color:#66d9ef">SELECT</span> cust_id
                 <span style="color:#66d9ef">FROM</span> orders
                 <span style="color:#66d9ef">WHERE</span> order_num <span style="color:#66d9ef">IN</span>(<span style="color:#66d9ef">SELECT</span> order_num
                                   <span style="color:#66d9ef">FROM</span> orderitems
                                   <span style="color:#66d9ef">WHERE</span> prod_id<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;TNT2&#39;</span>));
</code></pre></td></tr></table>
</div>
</div><h3 id="子查询结果作为计算字段">子查询结果作为计算字段</h3>
<p>例如：我们想要在获取顾客的信息的同时，获取客户的订单数，可以使用子查询来实现，如下图所示：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> cust_name,cust_state,
		(<span style="color:#66d9ef">SELECT</span> <span style="color:#a6e22e">COUNT</span>(<span style="color:#f92672">*</span>)<span style="color:#66d9ef">FROM</span> orders <span style="color:#66d9ef">WHERE</span> orders.cust_id<span style="color:#f92672">=</span>customers.cust_id)<span style="color:#66d9ef">AS</span> orders
<span style="color:#66d9ef">FROM</span> customers
<span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> cust_name;
</code></pre></td></tr></table>
</div>
</div><h2 id="第十五章联结表">第十五章：联结表</h2>
<blockquote>
<p>本章将介绍什么是联结，为什么要使用联结，如何编写使用联结的SELECT语句。</p>
</blockquote>
<p>外键（foreign key） 外键为某个表中的一列，它包含另一个表的主键值，定义了两个表之间的关系。</p>
<h3 id="创建联结">创建联结</h3>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> vend_name, prod_name, prod_price
<span style="color:#66d9ef">FROM</span> vendors, products
<span style="color:#66d9ef">WHERE</span> vendors.vend_id <span style="color:#f92672">=</span> products.vend_id
<span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> vend_name, prod_name;
</code></pre></td></tr></table>
</div>
</div><p>&mdash;-（等值联结、也叫内部联结）</p>
<blockquote>
<p>笛卡尔积：由没有联结条件的表关系返回的结果为笛卡尔积。检索出的行的数目将是第一个表中的行数乘以第二个表中的行数。</p>
</blockquote>
<h3 id="内部联结">内部联结</h3>
<p>上面的这种连接其实是等值连接，可以用连接的语法来写，可以更加明确连接类型</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> vend_name, prod_name, prod_price
<span style="color:#66d9ef">FROM</span> vendors <span style="color:#66d9ef">INNER</span> <span style="color:#66d9ef">JOIN</span> products
<span style="color:#66d9ef">ON</span> vendors.vend_id <span style="color:#f92672">=</span> products.vend_id;
</code></pre></td></tr></table>
</div>
</div><h3 id="联结多个表">联结多个表</h3>
<p>一条SELECT语句可以连接的表的数量没有限制，可以连接多个表，进行查询</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> prod_name, vend_name, prod_price, quantity
<span style="color:#66d9ef">FROM</span> orderitems, products, vendors
<span style="color:#66d9ef">WHERE</span> products.vend_id <span style="color:#f92672">=</span> vendors.vend_id
	<span style="color:#66d9ef">AND</span> orderitems.prod_id <span style="color:#f92672">=</span> products.prod_id
	<span style="color:#66d9ef">AND</span> order_num <span style="color:#f92672">=</span> <span style="color:#ae81ff">20005</span>;
</code></pre></td></tr></table>
</div>
</div><h3 id="使用联结来替代子查询">使用联结来替代子查询</h3>
<p>之前通过子查询嵌套来完成多表查询，现在可以使用连接来实现</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> cust_name, cust_contact
<span style="color:#66d9ef">FROM</span> customers
<span style="color:#66d9ef">WHERE</span> cust_id <span style="color:#66d9ef">IN</span> (<span style="color:#66d9ef">SELECT</span> cust_id
                 <span style="color:#66d9ef">FROM</span> orderitems
                 <span style="color:#66d9ef">WHERE</span> order_num <span style="color:#66d9ef">IN</span>(<span style="color:#66d9ef">SELECT</span> order_num
                                   <span style="color:#66d9ef">FROM</span> orderitems
                                   <span style="color:#66d9ef">WHERE</span> prod_id<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;TNT2&#39;</span>));
</code></pre></td></tr></table>
</div>
</div><p>下面使用联结的相同查询：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> cust_name, cust_contact
<span style="color:#66d9ef">FROM</span> customers, orders, orderitems
<span style="color:#66d9ef">WHERE</span> customers.cust_id <span style="color:#f92672">=</span> orders.cust_id
	<span style="color:#66d9ef">AND</span> orderitems.order_num <span style="color:#f92672">=</span> orders.order_num
	<span style="color:#66d9ef">AND</span> prod_id <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;TNT2&#39;</span>;
</code></pre></td></tr></table>
</div>
</div><h2 id="第十六章创建高级联结">第十六章：创建高级联结</h2>
<p>本章将讲解外连接，以及如何对被联结的表使用表别名和聚集函数。</p>
<h3 id="使用表别名">使用表别名</h3>
<p>除了可以对列，计算字段起别名以外，还可以对表起别名。主要有以下好处：</p>
<ol>
<li>缩短SQL语句(有些表名太长，可以起短的别名</li>
<li>允许在单条SELECT语句中多次使用相同的表（对表进行自连接查询时会需要多次使用相同的表，在下面有相应的例子说明）</li>
</ol>
<p>除了上一章讲到的内部连接(等值连接)以为，还有自连接，自然连接，外部连接三种连接：</p>
<h4 id="自联结">自联结</h4>
<p>自连接指的是一张表对自身进行连接，进行信息查询。 例如： 某物品(其ID为DTNTR)存在问题，因此想知道生产该物品的供应商生产的其他物品是否也存在这些问题。此查询要求首先找到 生产ID为DTNTR的物品的供应商，然后找出这个供应商生产的其他物品。 可以使用自连接的实现：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> p1.prod_id, p1.prod_name
<span style="color:#66d9ef">FROM</span> products <span style="color:#66d9ef">AS</span> p1, products <span style="color:#66d9ef">AS</span> p2
<span style="color:#66d9ef">WHERE</span> p1.vend_id <span style="color:#f92672">=</span> p2.vend_id
	<span style="color:#66d9ef">AND</span> p2.prod_id <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;DTNTR&#39;</span>;
</code></pre></td></tr></table>
</div>
</div><p>此查询中需要的两个表实际上是相同的表，因此products表在 FROM子句中出现了两次。虽然这是完全合法的，但对products 的引用具有二义性，所以使用表别名避免歧义。 当然解决上面的这个查询需求也可以使用子查询来实现，如下图所示：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> prod_id, prod_name
<span style="color:#66d9ef">FROM</span> products
<span style="color:#66d9ef">WHERE</span> vend_id <span style="color:#f92672">=</span> (<span style="color:#66d9ef">SELECT</span> vend_id
                <span style="color:#66d9ef">FROM</span> products
                <span style="color:#66d9ef">WHERE</span> prod_id <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;DTNTR&#39;</span>);
</code></pre></td></tr></table>
</div>
</div><h4 id="外联结">外联结</h4>
<p>内部连接会将一个表中的行与另一个表中的行想关联，有时候也需要包含不满足关联条件的那些行，这就是外连接。 例如：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> customers.cust_id, orders.order_num
<span style="color:#66d9ef">FROM</span> customers <span style="color:#66d9ef">LEFT</span> <span style="color:#66d9ef">OUTER</span> <span style="color:#66d9ef">JOIN</span> orders
 <span style="color:#66d9ef">ON</span> customers.cust_id <span style="color:#f92672">=</span> orders.cust_id;
</code></pre></td></tr></table>
</div>
</div><p>这条SELECT语句使用了关键字OUTER JOIN来指定联结的类型(而不是在WHERE子句中指 定)。但是，与内部联结关联两个表中的行不同的是，外部联结还包括没 有关联行的行。在使用OUTER JOIN语法时，必须使用RIGHT或LEFT关键字 指定包括其所有行的表(RIGHT指出的是OUTER JOIN右边的表，而LEFT 指出的是OUTER JOIN左边的表)。上面的例子使用LEFT OUTER JOIN从FROM 子句的左边表(customers表)中选择所有行。</p>
<h4 id="聚焦函数">聚焦函数</h4>
<p>使用带聚集函数的连接 聚集函数也可以和连接结合起来使用。</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> customers.cust_name,
	   customers.cust_id,
	   <span style="color:#a6e22e">COUNT</span>(orders.order_num) <span style="color:#66d9ef">AS</span> num_ord
<span style="color:#66d9ef">FROM</span> customers <span style="color:#66d9ef">INNER</span> <span style="color:#66d9ef">JOIN</span> orders
<span style="color:#66d9ef">ON</span> customers.cust_id <span style="color:#f92672">=</span> orders.cust_id
<span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> customers.cust_id;
</code></pre></td></tr></table>
</div>
</div><p>在这个例子中，使用INNER JOIN将customers和orders表互相关联。GROUP BY子句按客户分组数据，因此，函数调用COUNT (orders.order_num)对每个客户的订单计数，将它作为num_ord返回。</p>
<h5 id="注意事项">注意事项：</h5>
<ol>
<li>注意所使用的联结类型。一般我们使用内部联结，但使用外部联结也是有效的。</li>
<li>保证使用正确的联结条件，否则将返回不正确的数据。</li>
<li>应该总是提供联结条件，否则会得出笛卡儿积。</li>
<li>在一个联结中可以包含多个表，甚至对于每个联结可以采用不同的联结类型。虽然这样做是合法的，一般也很有用，但应该在一起测试它们前，分别测试每个联结。这将使故障排除更为简单。</li>
</ol>
<h2 id="第十七章组合查询">第十七章：组合查询</h2>
<blockquote>
<p>本章讲述如何利用UNION操作符将多条SELECT语句组合成一个结果集。</p>
</blockquote>
<p>在 MySQL 中，可以执行多条查询语句，然后对多个结果集，使用UNION语句合并成单个查询结果集返回。主要有以下两种应用场景：</p>
<ol>
<li>在单个查询中从不同的表返回类似结构的数据。</li>
<li>对单个表执行多个查询，将结果集合并成一个结果集。</li>
</ol>
<h3 id="使用union">使用UNION</h3>
<p>例如我们需要价格小于等于5的所有物品的一个列表，而且 还想包括供应商1001和1002生产的所有物品(不考虑价格)，</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> vend_id, prod_id, prod_price
<span style="color:#66d9ef">FROM</span> products
<span style="color:#66d9ef">WHERE</span> prod_price <span style="color:#f92672">&lt;=</span> <span style="color:#ae81ff">5</span> 
<span style="color:#66d9ef">UNION</span>
<span style="color:#66d9ef">SELECT</span> vend_id, prod_id, prod_price
<span style="color:#66d9ef">FROM</span> products
<span style="color:#66d9ef">WHERE</span> vend_id <span style="color:#66d9ef">IN</span> (<span style="color:#ae81ff">1001</span>, <span style="color:#ae81ff">1002</span>);
</code></pre></td></tr></table>
</div>
</div><p>这条语句由前面的两条SELECT语句组成，语句中用UNION关键 字分隔。UNION指示MySQL执行两条SELECT语句，并把输出组 合成单个查询结果集，当然这个需求也可以使用多条WHERE语句来实现。</p>
<h4 id="注意事项-1">注意事项：</h4>
<ol>
<li>
<p>UNION必须由两条或两条以上的SELECT语句组成，语句之间用关 键字UNION分隔(因此，如果组合4条SELECT语句，将要使用3个 UNION关键字)。</p>
</li>
<li>
<p>UNION中的每个查询必须包含相同的列、表达式或聚集函数(不过 3.列数据类型必须兼容:类型不必完全相同，但必须是DBMS可以 隐含地转换的类型(例如，不同的数值类型或不同的日期类型)。 如果遵守了这些基本规则或限制，则可以将并用于任何数据检索任务。</p>
</li>
<li>
<p>在用UNION组合查询时，如果需要对结果进行排序，只能使用一条ORDER BY子句，它必须出现在最后一条SELECT语句之后。对 于结果集，不存在用一种方式排序一部分，而又用另一种方式排序另一 部分的情况，因此不允许使用多条ORDER BY子句。</p>
</li>
</ol>
<p>UNION从查询结果集中自动去除了重复的行(换句话说，它的行为与 单条SELECT语句中使用多个WHERE子句条件一样)。因为供应商1002生产 的一种物品的价格也低于5，所以两条SELECT语句都返回该行。在使用 UNION时，重复的行被自动取消。这是UNION的默认行为，但是如果允许重复，可以使用UNION ALL而不是UNION。如下图所示：</p>
<p><img src="https://i.loli.net/2021/01/29/hsRYdHGwUFezNnQ.png" alt="image-20210124112004703">
//</p>
<h2 id="第十八章全文本搜索">第十八章：全文本搜索</h2>
<blockquote>
<p>本章将学习如何使用MySQL的全文本搜索功能进行高级的数据查询和选择。</p>
</blockquote>
<p>当我们需要对文本进行匹配，可以使用LIKE+通配符，或正则表达式的方式来实现，但是这样会存在很多限制：</p>
<ol>
<li>
<p>性能不高——通配符和正则表达式匹配通常要求MySQL尝试匹配表中所有行(而且这些搜索极少使用表索引)。因此，由于被搜索行数不断增加，这些搜索可能非常耗时。</p>
</li>
<li>
<p>不太灵活——使用通配符和正则表达式匹配，很难(而且并不总是能)明确地控制匹配什么和不匹配什么。例如，指定一个词必须匹配，一个词必须不匹配，而一个词仅在第一个词确实匹配的情况下才可以匹配或者才可以不匹配。</p>
</li>
<li>
<p>无法智能化——虽然基于通配符和正则表达式的搜索提供了非常灵活的搜索，但它们都不能提供一种智能化的选择结果的方法。 例如，一个特殊词的搜索将会返回包含该词的所有行，而不区分包含单个匹配的行和包含多个匹配的行(按照可能是更好的匹配 来排列它们)。类似，一个特殊词的搜索将不会找出不包含该词但包含其他相关词的行。所以就有了全文搜索，为了进行全文本搜索，必须索引被搜索的列，而且要随着数据的改 变不断地重新索引。在对表列进行适当设计后，MySQL会自动进行所有 的索引和重新索引。在索引之后，SELECT可与Match()和Against()一起使用以实际执行 搜索。</p>
</li>
</ol>
<h3 id="启用全文本支持">启用全文本支持</h3>
<p>在建表时或者建表以后使用FULLTEXT语句指定全文搜索的列，MySQL根据子句FULLTEXT(note_text)的指示对它进行索引，在之后该列增加、更新或删除行时， 索引随之自动更新 如下图所示：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> <span style="color:#a6e22e">productnotes</span>
(
	note_id <span style="color:#66d9ef">int</span>      <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span> <span style="color:#66d9ef">AUTO_INCREMENT</span>,
    prod_id <span style="color:#66d9ef">char</span>(<span style="color:#ae81ff">10</span>) <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span>,
    note_date <span style="color:#66d9ef">datetime</span> <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span>,
    note_test <span style="color:#66d9ef">text</span> <span style="color:#66d9ef">NULL</span>,
    <span style="color:#66d9ef">PRIMARY</span> <span style="color:#66d9ef">KEY</span>(note_id),
    <span style="color:#66d9ef">FULLTEXT</span>(note_text)
) <span style="color:#66d9ef">ENGINE</span><span style="color:#f92672">=</span>MyISAM;
</code></pre></td></tr></table>
</div>
</div><h4 id="注意事项-2">注意事项：</h4>
<p>如果正在导入数据到一个新表， 此时不应该启用FULLTEXT索引。应该首先导入所有数据，然后再修改表，定义FULLTEXT，这样花费的时间会更少。</p>
<h3 id="进行全文本搜索">进行全文本搜索</h3>
<p>在索引之后，使用两个函数Match()和Against()执行全文本搜索， Match() 指定被搜索的列 Against() 指定要使用的搜索表达式 如下图所示：SELECT语句检索单个列note_text，将包含rabbit的行进行返回。(全文搜索默认不区分大小写，除非使用BINARY语句进行修饰)</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> note_text
<span style="color:#66d9ef">FROM</span> productnotes
<span style="color:#66d9ef">WHERE</span> <span style="color:#66d9ef">Match</span>(note_text) <span style="color:#a6e22e">Against</span>(<span style="color:#e6db74">&#39;rabbit&#39;</span>);
</code></pre></td></tr></table>
</div>
</div><p>全文搜索还可以使用Rank对结果进行排序，Match()和Against() 用来建立一个计算列(别名为rank)，此列包含全文本搜索计算出的等级 值。等级由MySQL根据行中词的数目、唯一词的数目、整个索引中词的 总数以及包含该词的行的数目计算出来。不包含搜索词的行等级为0(因此不被前一例子中的WHERE子句选择)。确实包含搜索词的两个行每行都有一个等级值，文本中词靠前的行的等级值比词靠后的行的等级值高。如所示：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> note_text,
		<span style="color:#66d9ef">Match</span>(note_text) <span style="color:#a6e22e">Against</span>(<span style="color:#e6db74">&#39;rabbit&#39;</span>) <span style="color:#66d9ef">AS</span> rank
<span style="color:#66d9ef">FROM</span> productnotes;
</code></pre></td></tr></table>
</div>
</div><p>如果指定多个搜索项，则包含多数匹配词的 那些行将具有比包含较少词(或仅有一个匹配)的那些行高的 等级值。</p>
<h3 id="使用查询扩展">使用查询扩展</h3>
<p>查询扩展用来设法放宽所返回的全文本搜索结果的范围，它可以先进行一个基本的全文本搜索，找出与搜索条件匹配的所有行。其次，MySQL检查这些匹配行并选择所有有用的词，再其次，MySQL再次进行全文本搜索，这次不仅使用原来的条件， 而且还使用所有有用的词。如下图所示；</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> note_text
<span style="color:#66d9ef">FROM</span> productnotes
<span style="color:#66d9ef">WHERE</span> <span style="color:#66d9ef">Match</span>(note_text) <span style="color:#a6e22e">Against</span>(<span style="color:#e6db74">&#39;anvils&#39;</span> <span style="color:#66d9ef">WITH</span> QUERY EXPANSION);
</code></pre></td></tr></table>
</div>
</div><h3 id="布尔文本搜索">布尔文本搜索</h3>
<p>MySQL支持全文本搜索的另外一种形式，称为布尔方式(boolean mode)。可以指定要匹配的词，要排斥的词，排列提示(指定某些词比其他词更重要，更重要的词等级更高)，表达式分组等。即使没有定义 FULLTEXT索引，也可以使用它。但这是一种非常缓慢的操作。 例如: 在下图里面的查询中，会匹配词heavy，但-rope<em>明确地 分析指示MySQL排除包含rope</em>(任何以rope开始的词，包括 ropes)的行。</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> note_text
<span style="color:#66d9ef">FROM</span> productnotes
<span style="color:#66d9ef">WHERE</span> <span style="color:#66d9ef">Match</span>(note_text) <span style="color:#a6e22e">Against</span>(<span style="color:#e6db74">&#39;heavy -rope*&#39;</span> <span style="color:#66d9ef">IN</span> BOOLEAN MODE);
</code></pre></td></tr></table>
</div>
</div><p>除了布尔操作符-和*，-排除一个词，而* 是截断操作符(可想象为用于词尾的一个通配符)。还有以下全文本布尔操作符：</p>
<p><img src="https://i.loli.net/2021/01/29/hyJS4ANMxTm5f6z.png" alt="image-20210124115258970"></p>
<p>全文本搜索的使用说明</p>
<ol>
<li>
<p>在索引全文本数据时，短词被忽略且从索引中排除。短词定义为 那些具有3个或3个以下字符的词(如果需要，这个数目可以更改)</p>
</li>
<li>
<p>MySQL带有一个内建的非用词(stopword)列表，这些词在索引全文本数据时总是被忽略。如果需要，可以覆盖这个列表(请参阅MySQL文档以了解如何完成此工作)。</p>
</li>
<li>
<p>许多词出现的频率很高，搜索它们没有用处(返回太多的结果)。因此，MySQL规定了一条50%规则，如果一个词出现在50%以上的行中，则将它作为一个非用词忽略。50%规则不用于IN BOOLEAN MODE。</p>
</li>
<li>
<p>如果表中的行数少于3行，则全文本搜索不返回结果(因为每个词或者不出现，或者至少出现在50%的行中)。</p>
</li>
<li>
<p>忽略词中的单引号。例如，don&rsquo;t索引为dont。</p>
</li>
<li>
<p>不具有词分隔符(包括日语和汉语)的语言不能恰当地返回全文 本搜索结果。</p>
</li>
<li>
<p>如前所述，仅在MyISAM数据库引擎中支持全文本搜索。</p>
</li>
<li>
<p>没有邻近操作符，邻近搜索是许多全文本搜索支持的一个特 性，它能搜索相邻的词(在相同的句子中、相同的段落中或者 在特定数目的词的部分中，等等。MySQL全文本搜索现在还不支持邻近操作符。</p>
</li>
</ol>
<h2 id="第十九章插入数据">第十九章：插入数据</h2>
<p>本章介绍如何利用SQL的INSERT语句将数据插入表中。</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> Customers <span style="color:#66d9ef">VALUES</span>(<span style="color:#e6db74">&#34;tom&#34;</span>, <span style="color:#e6db74">&#34;29&#34;</span>);

<span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> <span style="color:#a6e22e">Customers</span>(name, age) <span style="color:#66d9ef">VALUES</span>(<span style="color:#e6db74">&#34;tom&#34;</span>, <span style="color:#e6db74">&#34;29&#34;</span>);
</code></pre></td></tr></table>
</div>
</div><p>一般推荐第二张方式，因为第一种方式的数据顺序必须与列在表中的数据保持一致，容易写错，其次是当表结构发生改变时，第一种方式需要变更数据顺序，第二种方式不需要。</p>
<h3 id="插入检索出的数据">插入检索出的数据</h3>
<p>INSERT一般用来给表插入一个指定列值的行。但是，INSERT还存在 另一种形式，可以利用它将一条SELECT语句的结果插入表中。如下图所示，这个例子使用INSERT SELECT从custnew表中将所有数据导入customers表</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">INTO</span> <span style="color:#a6e22e">customers</span>(cust_id,
                     cust_contact,
                     cust_email,
                     cust_name,
                     cust_address,
                     cust_city,
                     cust_state,
                     cust_zip,
                     cust_country)
<span style="color:#66d9ef">SELECT</span> 				 cust_id,
	   				 cust_contact,
                     cust_email,
                     cust_name,
                     cust_address,
                     cust_city,
                     cust_state,
                     cust_zip,
                     cust_country
<span style="color:#66d9ef">FROM</span> custnew;
</code></pre></td></tr></table>
</div>
</div><h2 id="第二十章更新和删除数据">第二十章：更新和删除数据</h2>
<h3 id="更新数据">更新数据</h3>
<p>一般UPDATE语句组成部分如下：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">UPDATE</span> <span style="color:#960050;background-color:#1e0010">表名</span>
<span style="color:#66d9ef">SET</span> <span style="color:#960050;background-color:#1e0010">列名</span> <span style="color:#f92672">=</span> <span style="color:#960050;background-color:#1e0010">新值</span>
<span style="color:#66d9ef">WHERE</span> <span style="color:#960050;background-color:#1e0010">过滤条件</span>;
</code></pre></td></tr></table>
</div>
</div><p>如：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">UPDATE</span> customers
<span style="color:#66d9ef">SET</span> cust_email <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;hello@fudd.com&#39;</span>
<span style="color:#66d9ef">WHERE</span> cust_id <span style="color:#f92672">=</span> <span style="color:#ae81ff">10005</span>;
</code></pre></td></tr></table>
</div>
</div><p>需要注意的是：</p>
<ol>
<li>
<p>在使用UPDATE语句时，不要省略WHERE子句 ，否则就会更新表中所有行。</p>
</li>
<li>
<p>IGNORE关键字，如果用UPDATE语句更新多行，并且在更新这些行中的一行或多行时出一个现错误，则整个UPDATE操作被取消 (错误发生前更新的所有行被恢复到它们原来的值)。为即使是发生错误，也继续进行更新，可使用IGNORE关键字，如下所示: UPDATE IGNORE customers&hellip;</p>
</li>
</ol>
<h3 id="删除数据">删除数据</h3>
<p>一般DELETE语句组成部分如下：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">DELETE</span> <span style="color:#66d9ef">FROM</span> <span style="color:#960050;background-color:#1e0010">表名</span> <span style="color:#66d9ef">WHERE</span> <span style="color:#960050;background-color:#1e0010">过滤条件</span>;
</code></pre></td></tr></table>
</div>
</div><p>如：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">DELETE</span> <span style="color:#66d9ef">FROM</span> customers
<span style="color:#66d9ef">WHERE</span> cust_id <span style="color:#f92672">=</span> <span style="color:#ae81ff">10006</span>;
</code></pre></td></tr></table>
</div>
</div><p>需要注意的是：</p>
<ol>
<li>
<p>在使用DELETE语句时，不要省略DELETE子句 ，否则会删除表中所有行。</p>
</li>
<li>
<p>DELETE语句从表中删除行，甚至是删除表中所有行。但是，DELETE不删除表本身。</p>
</li>
<li>
<p>如果想从表中删除所有行，不要使用DELETE。 可使用TRUNCATE TABLE语句，它完成相同的工作，但速度更快,因为TRUNCATE实际是删除原来的表并重新创建一个表，而不是逐行删除表中的数据</p>
</li>
</ol>
<p>更新和删除的指导原则</p>
<ol>
<li>
<p>除非确实打算更新和删除每一行，否则绝对不要使用不带WHERE 子句的UPDATE或DELETE语句。</p>
</li>
<li>
<p>保证每个表都有主键(如果忘记这个内容，请参阅第15章)，尽可能 像WHERE子句那样使用它(可以指定各主键、多个值或值的范围)。</p>
</li>
<li>
<p>在对UPDATE或DELETE语句使用WHERE子句前，应该先用SELECT进行测试，保证它过滤的是正确的记录，以防编写的WHERE子句不正确。</p>
</li>
<li>
<p>使用强制实施引用完整性的数据库(关于这个内容，请参阅第15 章)，这样MySQL将不允许删除具有与其他表相关联的数据的行。</p>
</li>
<li>
<p>MySQL没有撤销(undo)按钮。应该非常小心地使用UPDATE和DELETE，否则你会发现自己更新或删除了错误的数据。</p>
</li>
</ol>
<h2 id="第二十一章创建和操纵表">第二十一章：创建和操纵表</h2>
<h3 id="创建表">创建表</h3>
<p>使用CREATE语句来创建一个表，大家都很熟悉了，如下图所示</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> <span style="color:#a6e22e">customers</span>
(
    cust_id		 	<span style="color:#66d9ef">int</span>			<span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span> <span style="color:#66d9ef">AUTO_INCREMENT</span>,
    cust_name	 	<span style="color:#66d9ef">char</span>(<span style="color:#ae81ff">50</span>)	<span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span>,
    cust_address 	<span style="color:#66d9ef">char</span>(<span style="color:#ae81ff">50</span>)	<span style="color:#66d9ef">NULL</span>,
    cust_city	 	<span style="color:#66d9ef">char</span>(<span style="color:#ae81ff">50</span>)	<span style="color:#66d9ef">NULL</span>,
    cust_state	 	<span style="color:#66d9ef">char</span>(<span style="color:#ae81ff">5</span>)		<span style="color:#66d9ef">NULL</span>,
    cust_zip		<span style="color:#66d9ef">char</span>(<span style="color:#ae81ff">10</span>)	<span style="color:#66d9ef">NULL</span>,
    cust_country 	<span style="color:#66d9ef">char</span>(<span style="color:#ae81ff">50</span>)	<span style="color:#66d9ef">NULL</span>,
    cust_contact	<span style="color:#66d9ef">char</span>(<span style="color:#ae81ff">50</span>) 	<span style="color:#66d9ef">NULL</span>,
    cust_email		<span style="color:#66d9ef">char</span>(<span style="color:#ae81ff">50</span>) 	<span style="color:#66d9ef">NULL</span>,
    <span style="color:#66d9ef">PRIMARY</span> <span style="color:#66d9ef">KEY</span> (cust_id)
) <span style="color:#66d9ef">ENGINE</span><span style="color:#f92672">=</span>InnoDB;
</code></pre></td></tr></table>
</div>
</div><p>需要注意的有以下几点：</p>
<ol>
<li>
<p>在建表时，每一列要么是可为NULL列，要么是NOT NULL列，如果不指定，默认为可为NULL列。</p>
</li>
<li>
<p>主键必须保证唯一，不能为NULL。如果使用一个列作为主键，值必须唯一，如果使用多个列作为主键，那么多个列组合的值必须唯一。</p>
</li>
<li>
<p>MySQL有一个具体管理和处理数据的内部引擎，在执行SQL语句时，可以使用ENGINE语句指定引擎，如果省略ENGINE=语句，则使用默认引擎(很可能是MyISAM)，以下为MySQL常见的几个引擎：</p>
<p>InnoDB是一个可 靠的事务处理引擎 ( 参 见 第 26 章 )， 它不支持全文本搜索;</p>
<p>MEMORY在功能等同于MyISAM，但由于数据存储在内存(不是磁盘) 中，速度很快，所以特别适合于临时表;</p>
<p>MyISAM是一个性能极高的引擎，它支持全文本搜索(参见第18章)， 但不支持事务处理。</p>
</li>
</ol>
<h3 id="更新表">更新表</h3>
<p>在表建立以后，如果需要对表结构进行修改，我们可以使用ALTER TABLE语句对表进行修改。例如：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#75715e"># 增加一个列
</span><span style="color:#75715e"></span><span style="color:#66d9ef">ALTER</span> <span style="color:#66d9ef">TABLE</span> vendors
<span style="color:#66d9ef">ADD</span> vend_phone <span style="color:#66d9ef">CHAR</span>(<span style="color:#ae81ff">20</span>);
<span style="color:#75715e"># 删除刚刚添加的列
</span><span style="color:#75715e"></span><span style="color:#66d9ef">ALTER</span> <span style="color:#66d9ef">TABLE</span> vendors
<span style="color:#66d9ef">DROP</span> <span style="color:#66d9ef">COLUMN</span> vend_phone;
</code></pre></td></tr></table>
</div>
</div><p>复杂的表结构更改一般需要手动删除过程，它涉及以下步骤:</p>
<ol>
<li>
<p>用新的列布局创建一个新表。</p>
</li>
<li>
<p>使用INSERT SELECT语句从旧表复制数据到新表。如果有必要，可使用转换函数和计算字段。</p>
</li>
<li>
<p>检验包含所需数据的新表。</p>
</li>
<li>
<p>重命名旧表(如果确定，可以删除它)。</p>
</li>
<li>
<p>用旧表原来的名字重命名新表。</p>
</li>
<li>
<p>根据需要，重新创建触发器、存储过程、索引和外键。</p>
</li>
</ol>
<h3 id="删除表">删除表</h3>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">DROP</span> <span style="color:#66d9ef">TABLE</span> customers2;
</code></pre></td></tr></table>
</div>
</div><h3 id="重命名表">重命名表</h3>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">RENAME</span> <span style="color:#66d9ef">TABLE</span> customers <span style="color:#66d9ef">to</span> customers;
</code></pre></td></tr></table>
</div>
</div><h2 id="第二十二章使用视图">第二十二章：使用视图</h2>
<p>视图为虚拟的表。它们包含的不是数据而是根据需要检索数据的查询。视图提供了一种MySQL的SELECT语句层次的封装，可用来简化数据 处理以及重新格式化基础数据或保护基础数据。</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> cust_name, cust_contact
<span style="color:#66d9ef">FROM</span> customers, orders, orderitems
<span style="color:#66d9ef">WHERE</span> customers.cust_id <span style="color:#f92672">=</span> orders.cust_id
	<span style="color:#66d9ef">AND</span> orderitems.order_num <span style="color:#f92672">=</span> orders.order_num
	<span style="color:#66d9ef">AND</span> prod_id <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;TNT2&#39;</span>;
</code></pre></td></tr></table>
</div>
</div><p>后面就可以把productcustomers视图看成一个虚拟表进行查询，如下图所示：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> cust_name, cust_contact
<span style="color:#66d9ef">FROM</span> productcustomers
<span style="color:#66d9ef">WHERE</span> prod_id <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;TNT2&#39;</span>;
</code></pre></td></tr></table>
</div>
</div><h3 id="视图主要用途">视图主要用途：</h3>
<ol>
<li>
<p>重用SQL语句。</p>
</li>
<li>
<p>简化复杂的SQL操作。在编写查询后，可以方便地重用它而不必 知道它的基本查询细节。</p>
</li>
<li>
<p>使用表的组成部分而不是整个表。</p>
</li>
<li>
<p>保护数据。可以给用户授予表的特定部分的访问权限而不是整个表的访问权限。</p>
</li>
<li>
<p>更改数据格式和表示。视图可返回与底层表的表示和格式不同的数据。</p>
</li>
</ol>
<h3 id="视图的规则和限制">视图的规则和限制</h3>
<ol>
<li>
<p>与表一样，视图必须唯一命名(不能给视图取与别的视图或表相 同的名字)。</p>
</li>
<li>
<p>对于可以创建的视图数目没有限制。</p>
</li>
<li>
<p>为了创建视图，必须具有足够的访问权限。这些限制通常由数据库管理人员授予。</p>
</li>
<li>
<p>视图可以嵌套，即可以利用从其他视图中检索数据的查询来构造一个视图。</p>
</li>
<li>
<p>ORDER BY可以用在视图中，但如果从该视图检索数据SELECT中也含有ORDER BY，那么该视图中的ORDER BY将被覆盖。</p>
</li>
<li>
<p>视图不能索引，也不能有关联的触发器或默认值。</p>
</li>
<li>
<p>视图可以和表一起使用。例如，编写一条联结表和视图的SELECT语句。</p>
</li>
</ol>
<h3 id="常见的视图操作语句">常见的视图操作语句</h3>
<ol>
<li>
<p>视图用CREATE VIEW语句来创建。</p>
</li>
<li>
<p>使用SHOW CREATE VIEW viewname;来查看创建视图的语句。</p>
</li>
<li>
<p>用DROP删除视图，其语法为DROP VIEW viewname;。</p>
</li>
<li>
<p>更新视图时，可以先用DROP再用CREATE，也可以直接用CREATE OR REPLACE VIEW。如果要更新的视图不存在，则第2条更新语句会创建一个视图;如果要更新的视图存在，则第2条更新语句会替换原有视图。</p>
</li>
</ol>
<p>我们上面的例子中视图的作用其实是简化复杂SQL的使用，其实视图还有其他的作用，例如：</p>
<h3 id="使用视图简化复杂的联结">使用视图简化复杂的联结</h3>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">CREATE</span> VIEW productcustomers <span style="color:#66d9ef">AS</span>
<span style="color:#66d9ef">SELECT</span> cust_name, cust_contact, prod_id
<span style="color:#66d9ef">FROM</span> customers, orders, orderitems
<span style="color:#66d9ef">WHERE</span> customers.cust_id <span style="color:#f92672">=</span> orders.cust_id
	<span style="color:#66d9ef">AND</span> orderitems.order_num <span style="color:#f92672">=</span> orders.order_num;
</code></pre></td></tr></table>
</div>
</div><h3 id="用视图重新格式化检索出的数据">用视图重新格式化检索出的数据：</h3>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">CREATE</span> VIEW vendorlocations <span style="color:#66d9ef">AS</span>
<span style="color:#66d9ef">SELECT</span> <span style="color:#a6e22e">Concat</span>(<span style="color:#a6e22e">RTrim</span>(vend_name),<span style="color:#e6db74">&#39;(&#39;</span>,<span style="color:#a6e22e">RTrim</span>(vend_country),<span style="color:#e6db74">&#39;)&#39;</span>)
		<span style="color:#66d9ef">AS</span> vend_title
<span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> vend_name;
</code></pre></td></tr></table>
</div>
</div><h3 id="用视图过滤不想要的数据">用视图过滤不想要的数据</h3>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">CREATE</span> VIEW customeremaillist <span style="color:#66d9ef">AS</span> 
<span style="color:#66d9ef">SELECT</span> cust_id, cust_name, cust_email
<span style="color:#66d9ef">FROM</span> customers
<span style="color:#66d9ef">WHERE</span> cust_email <span style="color:#66d9ef">IS</span> <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span>;
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> 
<span style="color:#66d9ef">FROM</span> customeremaillist;
</code></pre></td></tr></table>
</div>
</div><h3 id="更新视图">更新视图</h3>
<p>视图是可更新的(也就是可以对它们使用INSERT、UPDATE和DELETE)。更新一个视图将更新其基表(可以回忆一下，视图本身没有数据)。如果你对视图增加或删除行，实际上是对其基表增加或删除行。但是当视图定义中有以下操作时，则不能进行视图的更新:</p>
<ol>
<li>
<p>分组(使用GROUP BY和HAVING); 联结;</p>
</li>
<li>
<p>子查询;</p>
</li>
<li>
<p>并;</p>
</li>
<li>
<p>聚集函数(Min()、Count()、Sum()等);</p>
</li>
<li>
<p>DISTINCT;</p>
</li>
<li>
<p>导出(计算)列。</p>
</li>
</ol>
<h2 id="第二十三章使用存储过程">第二十三章：使用存储过程</h2>
<p>存储过程，就是可以一条或多条MySQL语句的组合起来，并且可以加入一些业务逻辑。</p>
<h3 id="创建存储过程">创建存储过程</h3>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">DELIMITER <span style="color:#f92672">//</span>
<span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">PrOCEDURE</span> <span style="color:#a6e22e">productpricing</span>()
BEGIN
	<span style="color:#66d9ef">SELECT</span> <span style="color:#a6e22e">Avg</span>(prod_price)<span style="color:#66d9ef">AS</span> priceaverage
	<span style="color:#66d9ef">FROM</span> products;
END <span style="color:#f92672">//</span>

DELIMITER ;
</code></pre></td></tr></table>
</div>
</div><p><img src="https://i.loli.net/2021/01/29/8B3N5YSHAD7mciR.png" alt="image-20210127120710716"></p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">CALL</span> <span style="color:#a6e22e">productpricing</span>()
</code></pre></td></tr></table>
</div>
</div><h3 id="删除存储过程">删除存储过程</h3>
<p>可以使用DROP PROCEDURE 语句来删除一个存储过程，例如： 删除名为productpricing的存储过程</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">DROP</span> <span style="color:#66d9ef">PROCEDURE</span> productpricing<span style="color:#960050;background-color:#1e0010">；</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="使用参数">使用参数</h3>
<p>在创建存储过程时，可以使用IN语句来存储传入参数，OUT语句来存储返回结果。 在下面这个例子中，20005是传入参数，@total是返回结果。传入参数和返回结果也可以定义多个。</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">DELIMITER <span style="color:#f92672">//</span>

<span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">PROCEDURE</span> <span style="color:#a6e22e">ordertotal</span>(
	<span style="color:#66d9ef">IN</span> onumber <span style="color:#66d9ef">INT</span>,
    <span style="color:#66d9ef">OUT</span> ototal <span style="color:#66d9ef">DECIMAL</span>(<span style="color:#ae81ff">8</span>,<span style="color:#ae81ff">2</span>)
)BEGIN
	<span style="color:#66d9ef">SELECT</span> <span style="color:#a6e22e">Sum</span>(item_price<span style="color:#f92672">*</span>quantity)
 <span style="color:#66d9ef">FROM</span> orderitems
 <span style="color:#66d9ef">WHERE</span> order_num <span style="color:#f92672">=</span> onnumber
 <span style="color:#66d9ef">INTO</span> ototal;
END<span style="color:#f92672">//</span>

DELIMITER ;




<span style="color:#66d9ef">CALL</span> <span style="color:#a6e22e">ordertotal</span>(<span style="color:#ae81ff">20005</span>, <span style="color:#f92672">@</span>total);
</code></pre></td></tr></table>
</div>
</div><h3 id="建立智能存储过程">建立智能存储过程</h3>
<p>在创建存储过程中，也可以使用IF，THEN，END IF语句来设置判断条件，这是存储过程与简单的语句封装最大的区别。D</p>
<p><img src="https://i.loli.net/2021/01/29/zxiodmWBenKQOYa.png" alt="image-20210127124623187"></p>
<p><img src="https://i.loli.net/2021/01/29/Xqx63mN2AaBnLgG.png" alt="image-20210127124645413"></p>
<p><img src="https://i.loli.net/2021/01/29/WfREq28pTzOJr15.png" alt="image-20210127124748949"></p>
<h3 id="检查存储过程">检查存储过程</h3>
<p>可以使用 SHOW CREATE PROCEDURE 语句显示用来创建一个存储过程的 CREATE 语句也可以使用 SHOW PROCEDURE STATUS 列出所有存储过程。为限制其输出，可使用LIKE指定一个过滤模式，例如:SHOW PROCEDURE STATUS LIKE &lsquo;ordertotal&rsquo;;</p>
<h2 id="第二十四章使用游标">第二十四章：使用游标</h2>
<p>游标(cursor)是一个存储在MySQL服务器上的数据库查询， 它不是一条SELECT语句，而是被该语句检索出来的结果集。在存储了游 标之后，应用程序可以根据需要滚动或浏览结果集中的数据。</p>
<h3 id="创建游标">创建游标</h3>
<p>定义了一个名为ordernumbers的游标</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">PROCEDURE</span> <span style="color:#a6e22e">processorders</span>()
BEGIN
	<span style="color:#66d9ef">DECLARE</span> ordernumbers <span style="color:#66d9ef">CURSOR</span>
	<span style="color:#66d9ef">FOR</span>
	<span style="color:#66d9ef">SELECT</span> order_num <span style="color:#66d9ef">FROM</span> orders;
END;
</code></pre></td></tr></table>
</div>
</div><h3 id="打开和关闭游标">打开和关闭游标</h3>
<p>打开名为ordernumbers的游标</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">OPEN ordernumbers;
</code></pre></td></tr></table>
</div>
</div><p>关闭名为ordernumbers的游标</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">CLOSE ordernumbers;
</code></pre></td></tr></table>
</div>
</div><p>如果不明确关闭游标，MySQL将会在到达END语句时自动关闭它。</p>
<h3 id="使用游标数据">使用游标数据</h3>
<h2 id="第二十五章使用触发器">第二十五章：使用触发器</h2>
<p>可以使用触发器是在MySQL响应 INSERT UPDATE DELETE 语句前后自动执行一条MySQL语句。</p>
<h3 id="创建触发器">创建触发器</h3>
<p>创建触发器语句的格式一般是 CREATE TRIGGER 触发器名称 触发时机 触发操作 FOR EACH ROW 执行操作; 例如：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TRIGGER</span> newproduct AFTER <span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">FOR</span> <span style="color:#66d9ef">EACH</span> ROW <span style="color:#66d9ef">SELECT</span> <span style="color:#e6db74">&#39;Product added&#39;</span>;
</code></pre></td></tr></table>
</div>
</div><p>CREATE TRIGGER用来创建名为newproduct的新触发器。触发器 可在一个操作发生之前或之后执行，这里给出了AFTER INSERT， 所以此触发器将在INSERT语句成功执行后执行。这个触发器还指定FOR EACH ROW，因此代码对每个插入行执行。在这个例子中，文本Product added将对每个插入的行显示一次。</p>
<h3 id="删除触发器">删除触发器</h3>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">DROP</span> <span style="color:#66d9ef">TRIGGER</span> newproduct;<span style="color:#960050;background-color:#1e0010">删除名为</span>newproduct的触发器
</code></pre></td></tr></table>
</div>
</div><h3 id="insert触发器">INSERT触发器</h3>
<ol>
<li>在INSERT触发器代码内，可引用一个名为NEW的虚拟表，访问被 插入的行;</li>
<li>在BEFORE INSERT触发器中，NEW中的值也可以被更新(允许更改 被插入的值);</li>
<li>对于AUTO_INCREMENT列，NEW在INSERT执行之前列的值会是0，在INSERT 执行之后包含新的自动生成值。</li>
</ol>
<h3 id="delete触发器">DELETE触发器</h3>
<p>DELETE触发器在DELETE语句执行之前或之后执行，在DELETE触发器代码内，你可以引用一个名为OLD的虚拟表，访问被删除的行。OLD中的值全都是只读的，不能更新。</p>
<h3 id="update触发器">UPDATE触发器</h3>
<p>UPDATE触发器在UPDATE语句执行之前或之后执行。在UPDATE触发器代码中，你可以引用一个名为OLD的虚拟表访问 以前(UPDATE语句前)的值，引用一个名为NEW的虚拟表访问新 更新的值。在BEFORE UPDATE触发器中，NEW中的值可能也被更新(允许更改 将要用于UPDATE语句中的值)。OLD中的值全都是只读的，不能更新。</p>
<h3 id="注意事项-3">注意事项：</h3>
<ol>
<li>
<p>只有表才支持触发器，视图不支持(临时表也不 支持)。</p>
</li>
<li>
<p>如果BEFORE触发器失败，则MySQL将不执行请求的操作。此外，如果BEFORE触发器或语句本身失败，MySQL 将不执行AFTER触发器(如果有的话)。</p>
</li>
<li>
<p>与其他DBMS相比，MySQL 5中支持的触发器相当初级。未来的MySQL版本中有一些改进和增强触发器支持的计划。</p>
</li>
<li>
<p>创建触发器可能需要特殊的安全访问权限，但是，触发器的执行是自动的。如果INSERT、UPDATE或DELETE语句能够执行，则相关 的触发器也能执行。</p>
</li>
<li>
<p>应该用触发器来保证数据的一致性(大小写、格式等)。在触发器中执行这种类型的处理的优点是它总是进行这种处理，而且是透 明地进行，与客户机应用无关。</p>
</li>
<li>
<p>触发器的一种非常有意义的使用是创建审计跟踪。使用触发器， 把更改(如果需要，甚至还有之前和之后的状态)记录到另一个 表非常容易。</p>
</li>
<li>
<p>遗憾的是，MySQL触发器中不支持CALL语句。这表示不能从触发 器内调用存储过程。所需的存储过程代码需要复制到触发器内。</p>
</li>
</ol>
<h2 id="第二十六章管理事务处理">第二十六章：管理事务处理</h2>
<p>事务处理可以用来维护数据库的完整性，它保证一组SQL语句要么完全执行，要么完全不执行。利用事务处理，可以保证一组操作不会中途停止，它们 或者作为整体执行，或者完全不执行(除非明确指示)。如果没有错误发 生，整组语句提交给(写到)数据库表。如果发生错误，则进行回退(撤 销)以恢复数据库到某个已知且安全的状态。 事务(transaction)指一组SQL语句; 回退(rollback)指撤销指定SQL语句的过程; 提交(commit)指将未存储的SQL语句结果写入数据库表; 保留点(savepoint)指事务处理中设置的临时占位符(place- holder)，你可以对它发布回退(与回退整个事务处理不同)。</p>
<h3 id="控制事务处理">控制事务处理</h3>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#960050;background-color:#1e0010">事务开始</span> START TRANSACTION
</code></pre></td></tr></table>
</div>
</div><h3 id="使用rollback">使用ROLLBACK</h3>
<h3 id="使用commit">使用COMMIT</h3>
<h3 id="使用保留点">使用保留点</h3>
<h3 id="创建占位符">创建占位符</h3>
<h3 id="更改默认的提交行为">更改默认的提交行为</h3>
<h2 id="第二十七章全球化和本地化">第二十七章：全球化和本地化</h2>
<p>数据库表被用来存储和检索数据。不同的语言和字符集需要以不同 的方式存储和检索。因此，MySQL需要适应不同的字符集(不同的字母 和字符)，适应不同的排序和检索数据的方法。</p>
<h3 id="使用字符集和校对顺序">使用字符集和校对顺序</h3>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">show</span> <span style="color:#66d9ef">CHARACTER</span> <span style="color:#66d9ef">SET</span>;
</code></pre></td></tr></table>
</div>
</div><p>可以展示可用的字符集，MySQL 默认字符集是latin1，一般我们常用的就是utf8</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">show</span> COLLATION;
</code></pre></td></tr></table>
</div>
</div><p>可以展示所支持校对以及它们适用的字符集的完整列表，有的字符集具有不止一种校对。</p>
<p>通常系统管理在安装时定义一个默认的字符集和校对。此外，也可 以在创建数据库时，指定默认的字符集和校对。和校对，可以使用以下语句进行查看：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">show</span> VARIABLES <span style="color:#66d9ef">like</span> <span style="color:#e6db74">&#39;character%&#39;</span><span style="color:#960050;background-color:#1e0010">；查看字符集相关的配置</span>
<span style="color:#66d9ef">show</span> VARIABLES <span style="color:#66d9ef">like</span> <span style="color:#e6db74">&#39;collation%&#39;</span><span style="color:#960050;background-color:#1e0010">；查看校对相关的配置</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="给表指定字符集和校对">给表指定字符集和校对</h3>
<p><img src="https://i.loli.net/2021/01/29/Gw3vyxFZzeSsMrd.png" alt="image-20210129143622872"></p>
<p>这个例子中指定了CHARACTER SET和COLLATE两者。一般，MySQL如 下确定使用什么样的字符集和校对。</p>
<ol>
<li>
<p>如果指定CHARACTER SET和COLLATE两者，则使用这些值。</p>
</li>
<li>
<p>如果只指定CHARACTER SET，则使用此字符集及其默认的校对(如SHOW CHARACTER SET的结果中所示)。</p>
</li>
<li>
<p>如果既不指定CHARACTER SET，也不指定COLLATE，则使用数据库默认。</p>
</li>
</ol>
<h3 id="对列指定字符集和校对">对列指定字符集和校对</h3>
<p><img src="https://i.loli.net/2021/01/29/OSGhM25NxXqyjzo.png" alt="image-20210129143646095"></p>
<h3 id="查询时指定校对顺序">查询时指定校对顺序</h3>
<p><img src="https://i.loli.net/2021/01/29/CPWaAgIm64oK8sk.png" alt="image-20210129143825567"></p>
<p>此SELECT使用COLLATE指定一个备用的校对顺序(在这个例子 中，为区分大小写的校对)。除了这里看到的在ORDERBY子 句中使用以外，COLLATE还可以用于GROUP BY、HAVING、聚集 函数、别名等。</p>
<h2 id="第二十八章安全管理">第二十八章：安全管理</h2>
<p>MySQL用户账号和信息存储在名为mysql的MySQL数据库中。 获得所有用户账号列表</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">USE</span> mysql;
<span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">user</span> <span style="color:#66d9ef">FROM</span> <span style="color:#66d9ef">user</span>;
</code></pre></td></tr></table>
</div>
</div><h3 id="创建用户账号">创建用户账号</h3>
<h3 id="重新命名一个用户账号">重新命名一个用户账号</h3>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">RENAME</span> <span style="color:#66d9ef">USER</span> ben <span style="color:#66d9ef">TO</span> bforta;
</code></pre></td></tr></table>
</div>
</div><h3 id="删除用户账号">删除用户账号</h3>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">DROP</span> <span style="color:#66d9ef">USER</span> bforta;
</code></pre></td></tr></table>
</div>
</div><h3 id="设置访问权限">设置访问权限</h3>
<p>为看到赋予用户账号的权限，使用SHOW GRANTS FOR，如下图所示:</p>
<p><img src="https://i.loli.net/2021/01/29/iDwfoyR9UMHTbtS.png" alt="image-20210129143719280"></p>
<p>输出结果显示用户bforta有一个权限USAGE ON <em>.</em>。此结果表示在任意数据库和任意表上对任何数据没有权限。 用户定义为user@host MySQL的权限将会把用户名和主机名结合定义。如果不指定主机名，则使用默认的主机名%(授予用户访问权限而不管主机名)。</p>
<h3 id="grant语句">GRANT语句</h3>
<p>GRANT语句的一般格式是 GRANT 权限 ON 范围 TO 用户; 例如：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">GRANT</span> <span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">ON</span> crashhouse.<span style="color:#f92672">*</span> <span style="color:#66d9ef">TO</span> bforta;
</code></pre></td></tr></table>
</div>
</div><p>GRANT允许用户在crashcourse.*(crashcourse数据库的所 有表)上使用SELECT语句。</p>
<p>SHOW GRANTS可以用来显示bforta用户的权限</p>
<p><img src="https://i.loli.net/2021/01/29/uBhztkL5iNE8JoY.png" alt="image-20210129143856915"></p>
<h3 id="revoke">REVOKE</h3>
<p>GRANT的反操作为REVOKE，用它来撤销特定的权限。</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">REVOKE</span> <span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">ON</span> crashhouse.<span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> bforta;
</code></pre></td></tr></table>
</div>
</div><p>这条REVOKE语句取消刚赋予用户bforta的SELECT访问权限。被 撤销的访问权限必须存在，否则会出错。</p>
<p>GRANT和REVOKE可在几个层次上控制访问权限:</p>
<ol>
<li>
<p>整个服务器，使用GRANT ALL和REVOKE ALL;</p>
</li>
<li>
<p>整个数据库，使用ON database.*;</p>
</li>
<li>
<p>特定的表，使用ON database.table;</p>
</li>
<li>
<p>特定的列;</p>
</li>
<li>
<p>特定的存储过程。</p>
</li>
</ol>
<p>下面是可以授予或撤销的每个权限：</p>
<p><img src="https://i.loli.net/2021/01/29/OVfMH7woC4myQTs.png" alt="image-20210129144003237"></p>
<p><img src="https://i.loli.net/2021/01/29/jH4Jd6cNT7IMfti.png" alt="image-20210129144016328"></p>
<h3 id="注意事项-4">注意事项</h3>
<h4 id="提前授权">提前授权</h4>
<p>在使用GRANT和REVOKE时，用户账号必须存在， 但对所涉及的对象没有这个要求。这允许管理员在创建数据库 和表之前设计和实现安全措施。这样做的副作用是，当某个数据库或表被删除时(用DROP语 句)，相关的访问权限仍然存在。而且，如果将来重新创建该 数据库或表，这些权限仍然起作用。</p>
<h4 id="更改密码">更改密码</h4>
<p>更改特定用户的密码</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SET</span> PASSWORD <span style="color:#66d9ef">FOR</span> bforta <span style="color:#f92672">=</span> <span style="color:#a6e22e">Password</span>(<span style="color:#e6db74">&#39;123456&#39;</span>);
</code></pre></td></tr></table>
</div>
</div><p>更改当前用户的密码</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#66d9ef">SET</span> PASSWORD <span style="color:#f92672">=</span> <span style="color:#a6e22e">Password</span>(<span style="color:#e6db74">&#39;123456&#39;</span>);
</code></pre></td></tr></table>
</div>
</div><h2 id="第二十九章数据库维护">第二十九章：数据库维护</h2>
<p>备份数据一般有以下几种方案：</p>
<p>1.使用命令行实用程序 mysqldump 转储所有数据库内容到某个外部 文件。在进行常规备份前这个实用程序应该正常运行，以便能正 确地备份转储文件。</p>
<p>2.可用命令行实用程序 mysqlhotcopy 从一个数据库复制所有数据 (并非所有数据库引擎都支持这个实用程序)。</p>
<p>3.可以使用 MySQL 的 BACKUP TABLE 或 SELECT INTO OUTFILE 转储所有数据到某个外部文件。这两条语句都接受将要创建的系统文件名，此系统文件必须不存在，否则会出错。数据可以用 RESTORE TABLE 来复原。</p>
<h3 id="数据库维护">数据库维护</h3>
<p>ANALYZE TABLE 用来检查表键是否正确,返回的状态信息如下:</p>
<p><img src="https://i.loli.net/2021/01/29/xoeQOyzbZdw6Ul3.png" alt="image-20210129144153342"></p>
<p>CHECK TABLE 用来针对许多问题对表进行检查。在MyISAM表上还对索引进行检查。 CHECK TABLE支持一系列的检查选项（仅用于MyISAM表） :</p>
<p>CHANGED 检查自最后一次检查以来改动过的表</p>
<p>EXTENDED 执行最彻底的检查</p>
<p>FAST 只检查未正常关闭的表</p>
<p>MEDIUM 检查所有被删 除的链接并进行键检验</p>
<p>QUICK 只进行快速扫描 如下所示，CHECK TABLE发现和修复问题:</p>
<p><img src="https://i.loli.net/2021/01/29/xnQBhrZFdevKL8g.png" alt="image-20210129144215223"></p>
<p>如果MyISAM表访问产生不正确和不一致的结果，可能需要用REPAIR TABLE来修复相应的表。这条语句不应该经常使用，如果需要经常使用，可能会有更大的问题要解决。 如果从一个表中删除大量数据，应该使用OPTIMIZE TABLE来收回所用的空间，从而优化表的性能。</p>
<h3 id="诊断启动问题">诊断启动问题</h3>
<p>服务器启动问题通常在对MySQL配置或服务器本身进行更改时出现。MySQL在这个问题发生时报告错误，但由于多数MySQL服务器是作为系统进程或服务自动启动的，这些消息可能看不到。 在排除系统启动问题时，首先应该尽量用手动启动服务器。MySQL 服务器自身通过在命令行上执行mysqld启动。下面是几个重要的mysqld命令行选项:</p>
<p>&ndash;help 显示帮助</p>
<p>&ndash;safe-mode 装载减去某些最佳配置的服务器</p>
<p>&ndash;verbose 显示全文本消息(为获得更详细的帮助消息与&ndash;help联合使用)</p>
<p>&ndash;version 显示版本信息然后退出</p>
<p>查看日志文件</p>
<p>MySQL维护管理员依赖的一系列日志文件。主要的日志文件有以下几种。</p>
<p>错误日志</p>
<p>它包含启动和关闭问题以及任意关键错误的细节。此日志通常名为hostname.err，位于data目录中。此日志名可用 &ndash;log-error命令行选项更改。</p>
<p>查询日志</p>
<p>它记录所有MySQL活动，在诊断问题时非常有用。此日志文件可能会很快地变得非常大，因此不应该长期使用它。此 日志通常名为hostname.log，位于data目录中。此名字可以用 &ndash;log命令行选项更改。</p>
<p>二进制日志</p>
<p>它记录更新过数据(或者可能更新过数据)的所有语句。此日志通常名为hostname-bin，位于data目录内。此名字 可以用&ndash;log-bin命令行选项更改。注意，这个日志文件是MySQL 5 中添加的，以前的MySQL版本中使用的是更新日志。</p>
<p>缓慢查询日志</p>
<p>顾名思义，此日志记录执行缓慢的任何查询。这 个日志在确定数据库何处需要优化很有用。此日志通常名为 hostname-slow.log，位于data目录中。此名字可以用 &ndash;log-slow-queries命令行选项更改。 在使用日志时，可用FLUSH LOGS语句来刷新和重新开始所有日志文件。</p>
<h2 id="第三十章改善性能">第三十章：改善性能</h2>
<h3 id="改善性能的一些方法">改善性能的一些方法：</h3>
<ol>
<li>
<p>首先，MySQL(与所有DBMS一样)具有特定的硬件建议。在学习和研究MySQL时，使用任何旧的计算机作为服务器都可以。但对用于生产的服务器来说，应该坚持遵循这些硬件建议。</p>
</li>
<li>
<p>一般来说，关键的生产DBMS应该运行在自己的专用服务器上。</p>
</li>
<li>
<p>MySQL是用一系列的默认设置预先配置的，从这些设置开始通常是很好的。但过一段时间后你可能需要调整内存分配、缓冲区大 小等。(为查看当前设置，可使用SHOW VARIABLES;和SHOW STATUS;)</p>
</li>
<li>
<p>MySQL一个多用户多线程的DBMS，换言之，它经常同时执行多个任务。如果这些任务中的某一个执行缓慢，则所有请求都会执 行缓慢。如果你遇到显著的性能不良，可使用SHOW PROCESSLIST 显示所有活动进程(以及它们的线程ID和执行时间)。你还可以用KILL命令终结某个特定的进程(使用这个命令需要作为管理员登录)。</p>
</li>
<li>
<p>总是有不止一种方法编写同一条SELECT语句。应该试验联结、并、子查询等，找出最佳的方法。</p>
</li>
<li>
<p>使用EXPLAIN语句让MySQL解释它将如何执行一条SELECT语句。</p>
</li>
<li>
<p>一般来说，存储过程执行得比一条一条地执行其中的各条MySQL语句更快</p>
</li>
<li>
<p>应该总是使用正确的数据类型。</p>
</li>
<li>
<p>决不要检索比需求还要多的数据。换言之，不要用SELECT *(除非你真正需要每个列)。</p>
</li>
<li>
<p>有的操作(包括INSERT)支持一个可选的DELAYED关键字，如果使用它，将把控制立即返回给调用程序，并且一旦有可能就实际执行该操作。</p>
</li>
<li>
<p>在导入数据时，应该关闭自动提交。你可能还想删除索引(包括FULLTEXT索引)，然后在导入完成后再重建它们。</p>
</li>
<li>
<p>必须索引数据库表以改善数据检索的性能。确定索引什么不是一件微不足道的任务，需要分析使用的SELECT语句以找出重复的 WHERE和ORDER BY子句。如果一个简单的WHERE子句返回结果所花的时间太长，则可以断定其中使用的列(或几个列)就是需要索引的对象。</p>
</li>
<li>
<p>你的SELECT语句中有一系列复杂的OR条件吗?通过使用多条SELECT语句和连接它们的UNION语句，你能看到极大的性能改进。</p>
</li>
<li>
<p>索引改善数据检索的性能，但损害数据插入、删除和更新的性能。如果你有一些表，它们收集数据且不经常被搜索，则在有必要之前不要索引它们。(索引可根据需要添加和删除。)</p>
</li>
<li>
<p>LIKE很慢。一般来说，最好是使用FULLTEXT而不是LIKE。</p>
</li>
<li>
<p>数据库是不断变化的实体。一组优化良好的表一会儿后可能就面目全非了。由于表的使用和内容的更改，理想的优化和配置也会改变。</p>
</li>
<li>
<p>最重要的规则就是，每条规则在某些条件下都会被打破。</p>
</li>
</ol>
<h2 id="数据库样例表">数据库样例表</h2>
<p><img src="https://i.loli.net/2021/01/29/onr1PsgqKzjDNQ6.png" alt="142417_6796074b_4798225"></p>
<p><img src="https://i.loli.net/2021/01/29/H5AtNe8IqbD3BPx.png" alt="143434_4be6687d_4798225"></p>
<p><img src="https://i.loli.net/2021/01/29/s5aicw7BtVYDdIU.png" alt="143701_98821d6c_4798225"></p>
<p><img src="https://i.loli.net/2021/01/29/pnDCIfmg4ZXKi6t.png" alt="143733_e65c21d9_4798225"></p>
<p><img src="https://i.loli.net/2021/01/29/ZduMgTeXzywRaK8.png" alt="143805_fbdbbf12_4798225"></p>
<p><img src="https://i.loli.net/2021/01/29/CbRT3Q8Dr4jkLlO.png" alt="143846_dc705945_4798225"></p>
<p><img src="https://i.loli.net/2021/01/29/XAD7grVOYdLTpkw.png" alt="143914_ec67db0f_4798225"></p>
<blockquote>
<p>感谢：https://juejin.cn/post/6844903885757218824</p>
</blockquote>

        </div>

        


        

<div class="post-archive">
    <h2>See Also</h2>
    <ul class="listing">
        
        <li><a href="/about/">About</a></li>
        
        <li><a href="/post/%E5%93%88%E5%B8%8C%E6%98%A0%E5%B0%84%E5%92%8C%E9%9B%86%E5%90%88%E7%BB%83%E4%B9%A0/">哈希映射和集合练习</a></li>
        
        <li><a href="/post/%E6%A0%88%E5%92%8C%E9%98%9F%E5%88%97%E7%BB%83%E4%B9%A0%E9%A2%98/">栈和队列练习题</a></li>
        
        <li><a href="/post/%E6%95%B0%E7%BB%84%E9%93%BE%E8%A1%A8%E7%BB%83%E4%B9%A0%E9%A2%98/">数组、链表练习题</a></li>
        
        <li><a href="/post/%E9%80%92%E5%BD%92/">递归</a></li>
        
    </ul>
</div>


        <div class="post-meta meta-tags">
            
            <ul class="clearfix">
                
                <li><a href='https://aszhc.github.io/tags/%E7%AC%94%E8%AE%B0'>笔记</a></li>
                
            </ul>
            
        </div>
    </article>
    
    

    
    
    <div class="post bg-white">
      <script src="https://utteranc.es/client.js"
            repo= "aszhc/aszhc.github.io"
            issue-term="pathname"
            theme="github-light"
            crossorigin="anonymous"
            async>
      </script>
    </div>
    
</div>

                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://aszhc.github.io/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://aszhc.github.io">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://aszhc.github.io/post/%E5%93%88%E5%B8%8C%E6%98%A0%E5%B0%84%E5%92%8C%E9%9B%86%E5%90%88%E7%BB%83%E4%B9%A0/" title="哈希映射和集合练习">哈希映射和集合练习</a>
    </li>
    
    <li>
        <a href="https://aszhc.github.io/post/%E6%A0%88%E5%92%8C%E9%98%9F%E5%88%97%E7%BB%83%E4%B9%A0%E9%A2%98/" title="栈和队列练习题">栈和队列练习题</a>
    </li>
    
    <li>
        <a href="https://aszhc.github.io/post/%E6%95%B0%E7%BB%84%E9%93%BE%E8%A1%A8%E7%BB%83%E4%B9%A0%E9%A2%98/" title="数组、链表练习题">数组、链表练习题</a>
    </li>
    
    <li>
        <a href="https://aszhc.github.io/post/%E9%80%92%E5%BD%92/" title="递归">递归</a>
    </li>
    
    <li>
        <a href="https://aszhc.github.io/post/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/" title="动态规划">动态规划</a>
    </li>
    
    <li>
        <a href="https://aszhc.github.io/post/%E6%8E%A5%E9%9B%A8%E6%B0%B4/" title="接雨水">接雨水</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">分类</h3>
<ul class="widget-list">
    
    <li><a href="https://aszhc.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库 (1)</a></li>
    
    <li><a href="https://aszhc.github.io/categories/%E7%AE%97%E6%B3%95/">算法 (6)</a></li>
    
    <li><a href="https://aszhc.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络 (1)</a></li>
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title">标签</h3>
<div class="tagcloud">
    
    <a href="https://aszhc.github.io/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/">动态规划</a>
    
    <a href="https://aszhc.github.io/tags/%E5%8F%8C%E6%8C%87%E9%92%88/">双指针</a>
    
    <a href="https://aszhc.github.io/tags/%E5%93%88%E5%B8%8C/">哈希</a>
    
    <a href="https://aszhc.github.io/tags/%E6%95%B0%E7%BB%84/">数组</a>
    
    <a href="https://aszhc.github.io/tags/%E6%A0%88/">栈</a>
    
    <a href="https://aszhc.github.io/tags/%E7%AC%94%E8%AE%B0/">笔记</a>
    
    <a href="https://aszhc.github.io/tags/%E9%80%92%E5%BD%92/">递归</a>
    
    <a href="https://aszhc.github.io/tags/%E9%93%BE%E6%8E%A5/">链接</a>
    
    <a href="https://aszhc.github.io/tags/%E9%93%BE%E8%A1%A8/">链表</a>
    
    <a href="https://aszhc.github.io/tags/%E9%98%9F%E5%88%97/">队列</a>
    
    <a href="https://aszhc.github.io/tags/%E9%9B%86%E5%90%88/">集合</a>
    
</div>
    </section>

    
<section class="widget">
    <h3 class="widget-title">友情链接</h3>
    <ul class="widget-list">
        
        <li>
            <a target="_blank" href="https://blog.csdn.net/Andrew_ZhouC" title="我的CSDN博客">我的CSDN博客</a>
        </li>
        
        <li>
            <a target="_blank" href="https://github.com/aszhc" title="我的github">我的github</a>
        </li>
        
    </ul>
</section>

	
	<section class="widget">
        <h3 class="widget-title">公众号</h3>
		<ul class="widget-list">
        <li>
            
                <img src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJ%0AChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/%0A2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgo%0AKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCABkAGQDASIAAhEBAxEB/8QA%0AHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUF%0ABAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkK%0AFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1%0Adnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXG%0Ax8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEB%0AAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAEC%0AAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRom%0AJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOE%0AhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU%0A1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD6jvLqCytJ%0Arq8mjgtoEaSWWVgqRqBksxPAAHJJrmf+FkeB/wDocfDn/gzh/wDiqX4tf8kr%0A8Y/9ga8/9EPXzJ4h1rwv4C8B+AZJfAOgaxdarpKXE89zGFcsAuSTtOSc0AfT%0A9r8QfBt1cxW9r4s8PzTyuI4449RhZnYnAUANkknjFaE/ibQrddRafWtNiXTS%0Aq3pe6RRaljhRJk/JntnGa+Wmm0DxB4O8A+J9J8K6VoF7J4ytbN/sUYBKLk4L%0AYBwTg49hR8Vvhb8T9V8deLpvDlhM2g6xcI8iJfwxpcqgG3chcHg5xkUAfWwu%0AoDaC6E0ZtinmiXcNmzGd2emMc5rP0LxLoXiAzDQdZ03UzBt837HdJN5ec43b%0A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%0AigAooooAKKKKACiiigD/2Q==">
           
        </li>
    </ul>
    </section>
	
    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://aszhc.github.io/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
    <footer id="footer">
    <div class="container">
        &copy; 2021 <a href="https://aszhc.github.io">周闖的博客 By 周闖</a>.
        Powered by <a rel="nofollow noreferer noopener" href="https://gohugo.io" target="_blank">Hugo</a>.
        <a href="https://www.flysnow.org/" target="_blank"></a>         备案号 | 辽ICP备18005500号-2	</a>.
        
    </div>
</footer>


    
    <script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>


<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




    <script src='/js/douban.js'></script>

</body>

</html>